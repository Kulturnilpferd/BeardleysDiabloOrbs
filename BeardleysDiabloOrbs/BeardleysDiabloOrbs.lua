-- Copyright:
-- "Beardley's Diablo Orbs" and parts of the code are All Rights Reserved by Kai K. aka Kulturnilpferd
-- Other parts of the code and pictures are from "Mistra's Diablo Orbs" under MIT License.
-- 
-- The MIT License
-- 
-- Copyright (c) <year> <copyright holders>
-- 
-- Permission is hereby granted, free of charge, to any person obtaining a copy
-- of this software and associated documentation files (the "Software"), to deal
-- in the Software without restriction, including without limitation the rights
-- to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
-- copies of the Software, and to permit persons to whom the Software is
-- furnished to do so, subject to the following conditions:

-- The above copyright notice and this permission notice shall be included in
-- all copies or substantial portions of the Software.

-- THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
-- IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
-- FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
-- AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
-- LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
-- OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
-- THE SOFTWARE.
local BD32localizedDisplayName,BD32className,BD32classNumber=UnitClass("\112\108\97\121\101\114")local charClassNumber=0 local defaultOrbSize=150 local orbFillingTexture="\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\56\46\116\103\97";local fillRotationTexture="\111\114\98\95\102\105\108\108\82\111\116\97\116\105\111\110";local images="\73\110\116\101\114\102\97\99\101\92\65\100\100\79\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\105\109\97\103\101\115\92";local fonts="\73\110\116\101\114\102\97\99\101\92\65\100\100\111\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\102\111\110\116\115\92";local orbClassColors={[0]={health={r=0.78,g=0.61,b=0.43,a=1},mana={r=0.8,g=0,b=0,a=1},animation="\83\80\69\76\76\83\92\87\104\105\116\101\82\97\100\105\97\116\105\111\110\70\111\103\46\109\50",name="\87\65\82\82\73\79\82"},[1]={health={r=0.96,b=0.55,b=0.73,a=1},mana={r=0.0,g=0.44,b=0.87,a=1},animation="\83\80\69\76\76\83\92\87\104\105\116\101\82\97\100\105\97\116\105\111\110\70\111\103\46\109\50",name="\80\65\76\65\68\73\78"},[2]={health={r=0.67,g=0.83,b=0.45,a=1},mana={r=1.1,g=0.5,b=0.25,a=1},animation="\83\80\69\76\76\83\92\87\104\105\116\101\82\97\100\105\97\116\105\111\110\70\111\103\46\109\50",name="\72\85\78\84\69\82"},[3]={health={r=1.00,g=0.96,b=0.41,a=1},mana={r=1.00,g=0.96,b=0.41,a=1},animation="\83\80\69\76\76\83\92\87\104\105\116\101\82\97\100\105\97\116\105\111\110\70\111\103\46\109\50",name="\82\79\71\85\69"},[4]={health={r=1.00,g=1.00,b=1.00,a=1},mana={r=0.0,g=0.44,b=0.87,a=1},animation="\83\80\69\76\76\83\92\87\104\105\116\101\82\97\100\105\97\116\105\111\110\70\111\103\46\109\50",name="\80\82\73\69\83\84"},[5]={health={r=0.77,g=0.12,b=0.23,a=1},mana={r=0.35,g=0.9,b=0.9,a=1},animation="\83\80\69\76\76\83\92\87\104\105\116\101\82\97\100\105\97\116\105\111\110\70\111\103\46\109\50",name="\68\69\65\84\72\75\78\73\71\72\84"},[6]={health={r=0.0,g=0.44,b=0.87,a=1},mana={r=0.0,g=0.44,b=0.87,a=1},animation="\83\80\69\76\76\83\92\87\104\105\116\101\82\97\100\105\97\116\105\111\110\70\111\103\46\109\50",name="\83\72\65\77\65\78"},[7]={health={r=0.41,g=0.80,b=0.94,a=1},mana={r=0.0,g=0.44,b=0.87,a=1},animation="\83\80\69\76\76\83\92\87\104\105\116\101\82\97\100\105\97\116\105\111\110\70\111\103\46\109\50",name="\77\65\71\69"},[8]={health={r=0.58,g=0.51,b=0.79,a=1},mana={r=0.0,g=0.44,b=0.87,a=1},animation="\83\80\69\76\76\83\92\87\104\105\116\101\82\97\100\105\97\116\105\111\110\70\111\103\46\109\50",name="\87\65\82\76\79\67\75"},[9]={health={r=0.33,g=0.54,b=0.52,a=1},mana={r=1.00,g=1.00,b=1.00,a=1},animation="\83\80\69\76\76\83\92\71\114\101\101\110\82\97\100\105\97\116\105\111\110\70\111\103\46\109\50",name="\77\79\78\75"},[10]={health={r=1.00,g=0.49,b=0.04,a=1},mana={r=0.0,g=0.44,b=0.87,a=1},animation="\83\80\69\76\76\83\92\87\104\105\116\101\82\97\100\105\97\116\105\111\110\70\111\103\46\109\50",name="\68\82\85\73\68"},[11]={health={r=0.19,g=0.8,b=0.19,a=1},mana={r=0.69,g=0.31,b=0.93,a=1},animation="\83\80\69\76\76\83\92\87\104\105\116\101\82\97\100\105\97\116\105\111\110\70\111\103\46\109\50",name="\68\69\77\79\78\72\85\78\84\69\82"},}BD32_fontChoices={[0]="\70\79\78\84\83\92\70\82\73\90\81\84\95\95\46\116\116\102",[1]="\73\110\116\101\114\102\97\99\101\92\65\100\100\79\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\102\111\110\116\115\92\100\105\97\98\108\111\45\108\105\103\104\116\46\116\116\102",[2]="\73\110\116\101\114\102\97\99\101\92\65\100\100\79\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\102\111\110\116\115\92\100\105\97\98\108\111\45\104\101\97\118\121\46\116\116\102",[3]="\73\110\116\101\114\102\97\99\101\92\65\100\100\79\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\102\111\110\116\115\92\112\105\120\101\108\108\46\116\116\102",[4]="\73\110\116\101\114\102\97\99\101\92\65\100\100\79\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\102\111\110\116\115\92\100\105\103\105\116\97\108\108\46\116\116\102",[5]="\73\110\116\101\114\102\97\99\101\92\65\100\100\79\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\102\111\110\116\115\92\100\105\97\109\111\110\100\115\115\46\116\116\102",[6]="\73\110\116\101\114\102\97\99\101\92\65\100\100\79\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\102\111\110\116\115\92\99\114\97\115\104\45\97\45\108\105\107\101\46\116\116\102",[7]="\73\110\116\101\114\102\97\99\101\92\65\100\100\79\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\102\111\110\116\115\92\71\114\97\102\102\105\116\105\46\116\116\102",[8]="\73\110\116\101\114\102\97\99\101\92\65\100\100\79\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\102\111\110\116\115\92\99\97\114\121\98\101\45\114\101\103\117\108\97\114\46\116\116\102",[9]="\73\110\116\101\114\102\97\99\101\92\65\100\100\79\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\102\111\110\116\115\92\97\117\115\116\105\110\104\105\108\108\121\97\114\100\46\116\116\102",}function NotForbiddenAddonLoaded()if IsAddOnLoaded("\66\97\114\116\101\110\100\101\114\52")or IsAddOnLoaded("\82\97\122\101\114\78\97\103\97")or IsAddOnLoaded("\68\111\109\105\110\111\115")or IsAddOnLoaded("\66\97\114\116\101\110\100\101\114\51")or IsAddOnLoaded("\77\111\118\97\98\108\101\65\99\116\105\111\110\66\117\116\116\111\110\115")or IsAddOnLoaded("\69\108\118\85\73")then return false else return true end end local function chsize(char)if not char then return 0 elseif char>240 then return 4 elseif char>225 then return 3 elseif char>192 then return 2 else return 1 end end local function utf8sub(str,startChar,numChars)local startIndex=1 while startChar>1 do local char=string.byte(str,startIndex)startIndex=startIndex+chsize(char)startChar=startChar-1 end local currentIndex=startIndex while numChars>0 and currentIndex<=#str do local char=string.byte(str,currentIndex)currentIndex=currentIndex+chsize(char)numChars=numChars-1 end return str:sub(startIndex,currentIndex-1)end local function getClassColor()local BD32localizedDisplayName,BD32className,BD32classNumber=UnitClass("\112\108\97\121\101\114")if BD32classNumber then BD32className=BD32localizedDisplayName return BD32classNumber-1 else local num=table.getn(orbClassColors)for i=0,num,1 do if orbClassColors[i].name==UnitClass("\112\108\97\121\101\114")then BD32className=UnitClass("\112\108\97\121\101\114")return i end end print("\68\105\100\32\110\111\116\32\102\105\110\100\32\116\104\101\32\99\108\97\115\115\46\32"..UnitClass("\112\108\97\121\101\114"))return 0 end end charClassNumber=getClassColor()local Hr,Hg,Hb,Ha=orbClassColors[charClassNumber].health.r,orbClassColors[charClassNumber].health.g,orbClassColors[charClassNumber].health.b,orbClassColors[charClassNumber].health.a local Mr,Mg,Mb,Ma=orbClassColors[charClassNumber].mana.r,orbClassColors[charClassNumber].mana.g,orbClassColors[charClassNumber].mana.b,orbClassColors[charClassNumber].mana.a local defaultsTable={healthOrb={scale=1,hasMoved=false,fontType=0,OrbXOffset=0,showAbsorb=true,textures={fill="\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\50\46\116\103\97",rotation="\111\114\98\95\114\111\116\97\116\105\111\110\95\98\117\98\98\108\101\115"},orbColor={r=Hr,g=Hg,b=Hb,a=Ha},galaxy={r=Hr,g=Hg,b=Hb,a=Ha},font1={r=1,g=1,b=1,a=1,show=true},font2={r=1,g=1,b=1,a=1,show=true}},manaOrb={scale=1,hasMoved=false,fontType=0,OrbXOffset=0,textures={fill="\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\50\46\116\103\97",rotation="\111\114\98\95\114\111\116\97\116\105\111\110\95\98\117\98\98\108\101\115"},orbColor={r=Mr,g=Mg,b=Mb,a=Ma},galaxy={r=Mr,g=Mg,b=Mb,a=Ma},font1={r=1,g=1,b=1,a=1,show=true},font2={r=1,g=1,b=1,a=1,show=true}},petOrb={scale=1,enabled=true,showValue=false,showPercentage=true,healthOrb={r=Hr,g=Hg,b=Hb,a=Ha},manaOrb={r=Mr,g=Mg,b=Mb,a=Ma}},targetOrb={eliteFrame=true,scale=1,enabled=false,showBlizzTargetFrame=true,showValue=false,showPercentage=true},miniOrb={scale=1,enabled=true,showValue=true,showPercentage=false,swapOrb=false,healthOrb={r=Hr,g=Hg,b=Hb,a=Ha},manaOrb={r=Mr,g=Mg,b=Mb,a=Ma}},font=BD32_fontChoices[0],values={formatted=true},artwork={show=true},barFrame={scale=1,show=true,locked=false},multiBar={left={hasMoved=false},right={hasMoved=false}},combat={enabled=true,orbColor={r=0.8,g=0,b=0,a=1},galaxy={r=0.8,g=0,b=0,a=1},font1={r=1,g=1,b=1,a=1},font2={r=1,g=1,b=1,a=1}},druidColors={cat={orbColor={r=1.00,g=0.96,b=0.41,a=1},galaxy={r=1.00,g=0.96,b=0.41,a=1},font1={r=1,g=1,b=1,a=1},font2={r=1,g=1,b=1,a=1}},bear={orbColor={r=0.8,g=0,b=0,a=1},galaxy={r=0.8,g=0,b=0,a=1},font1={r=1,g=1,b=1,a=1},font2={r=1,g=1,b=1,a=1}},moonkin={orbColor={r=0.0,g=0.44,b=0.87,a=1},galaxy={r=0.0,g=0.44,b=0.87,a=1},font1={r=1,g=1,b=1,a=1},font2={r=1,g=1,b=1,a=1}},tree={orbColor={r=0.0,g=0.44,b=0.87,a=1},galaxy={r=0.0,g=0.44,b=0.87,a=1},font1={r=1,g=1,b=1,a=1},font2={r=1,g=1,b=1,a=1}}},defaultPlayerFrame={show=false},BD32minimapIcon={show=true},BD32Orbs={scale=1,enabled=true},smoothing=true,}local defaultTextures={healthOrb={fill="\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\50\46\116\103\97",rotation="\111\114\98\95\114\111\116\97\116\105\111\110\95\98\117\98\98\108\101\115"},manaOrb={fill="\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\50\46\116\103\97",rotation="\111\114\98\95\114\111\116\97\116\105\111\110\95\98\117\98\98\108\101\115"},}BD32FillTextureChoices={[0]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\49\46\116\103\97",[1]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\50\46\116\103\97",[2]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\51\46\116\103\97",[3]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\52\46\116\103\97",[4]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\53\46\116\103\97",[5]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\54\46\116\103\97",[6]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\55\46\116\103\97",[7]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\56\46\116\103\97",[8]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\57\46\116\103\97",[9]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\49\48\46\116\103\97",[10]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\49\49\46\116\103\97",[11]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\49\50\46\116\103\97",[12]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\49\51\46\116\103\97",[13]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\49\52\46\116\103\97",[14]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\49\53\46\116\103\97",[15]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\49\54\46\116\103\97",[16]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\49\55\46\116\103\97",[17]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\49\56\46\116\103\97",[18]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\49\57\46\116\103\97",[19]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\50\48\46\116\103\97",[20]=images.."\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\50\49\46\116\103\97",}BD32RotationTextureChoices={[0]=images.."\111\114\98\95\114\111\116\97\116\105\111\110\95\103\97\108\97\120\121",[1]=images.."\111\114\98\95\114\111\116\97\116\105\111\110\95\98\117\98\98\108\101\115",[2]=images.."\111\114\98\95\114\111\116\97\116\105\111\110\95\105\114\105\115",[3]=images.."\111\114\98\95\114\111\116\97\116\105\111\110\95\119\105\110\100\109\105\108\108\115",[4]=images.."\111\114\98\95\114\111\116\97\116\105\111\110\95\112\111\108\121\103\111\110\115",[5]=images.."\111\114\98\95\114\111\116\97\116\105\111\110\95\115\119\105\114\108",[6]=images.."\111\114\98\95\114\111\116\97\116\105\111\110\95\99\97\109\105\108\108\97",}BD32CharacterData=defaultsTable BD32Textures=defaultTextures function handlePlayerFrame(show)if show then if not PlayerFrame:IsVisible()then PlayerFrame:SetScript("\79\110\69\118\101\110\116",PlayerFrame_OnEvent)PlayerFrame:Show()end else if PlayerFrame:IsVisible()then PlayerFrame:SetScript("\79\110\69\118\101\110\116",nil)PlayerFrame:Hide()end end end function handleTargetFrame(show,reset)if not show then TargetFrame:ClearAllPoints()TargetFrame:SetPoint("\84\79\80",0,1000)TargetFrame.SetPoint=function()end elseif show and reset then TargetFrame:ClearAllPoints()TargetFrame:SetPoint("\84\79\80\76\69\70\84",250,-4)end TargetFrame:SetFrameStrata("\77\69\68\73\85\77")end local function makeFrameMovable(frame,button)local btnString="\76\101\102\116\66\117\116\116\111\110";local factionGroup,factionName=UnitFactionGroup("\112\108\97\121\101\114")if button then btnString=button end frame:SetMovable(true)frame:EnableMouse(true)frame:SetUserPlaced(true)frame:SetClampedToScreen(true)if frame==bar1Frame or frame==bar2Frame or frame==bar3Frame then if frame==bar2Frame then frame:SetClampRectInsets(67,-68,-41,4)elseif frame==bar3Frame then frame:SetClampRectInsets(67,-68,-8,4)else frame:SetClampRectInsets(67,-68,-6,4)end elseif frame==pvpFlagFrame then if factionGroup=="\72\111\114\100\101" then frame:SetClampRectInsets(3,-14,-1,16)else frame:SetClampRectInsets(6,-17,-1,14)end else frame:SetClampRectInsets(0,0,0,0)end frame:RegisterForDrag(btnString)frame:SetScript("\79\110\68\114\97\103\83\116\97\114\116",function(self)if frame==healthOrb then BD32CharacterData.healthOrb.hasMoved=true end if frame==manaOrb then BD32CharacterData.manaOrb.hasMoved=true end if frame==MultiBarLeft then BD32CharacterData.multiBar.left.hasMoved=true end if frame==MultiBarRight then BD32CharacterData.multiBar.right.hasMoved=true end if BD32CharacterData.barFrame.locked==false then if IsShiftKeyDown()then MultiBarRight:SetBackdrop({bgFile="\73\110\116\101\114\102\97\99\101\47\84\111\111\108\116\105\112\115\47\85\73\45\84\111\111\108\116\105\112\45\66\97\99\107\103\114\111\117\110\100",insets={left=-1,right=-1,top=-1,bottom=-1}})MultiBarRight:SetBackdropColor(0,0,0,1)MultiBarLeft:SetBackdrop({bgFile="\73\110\116\101\114\102\97\99\101\47\84\111\111\108\116\105\112\115\47\85\73\45\84\111\111\108\116\105\112\45\66\97\99\107\103\114\111\117\110\100",insets={left=-1,right=-1,top=-1,bottom=-1}})MultiBarLeft:SetBackdropColor(0,0,0,1)self:StartMoving()end end end)frame:SetScript("\79\110\68\114\97\103\83\116\111\112",function(self)self:StopMovingOrSizing()MultiBarRight:SetBackdropColor(0,0,0,0)MultiBarLeft:SetBackdropColor(0,0,0,0)end)end function Handle_BD32GUI()if BD32GUI:IsVisible()then BD32GUI:Hide()PlaySound("\54\48\52","\77\97\115\116\101\114");else BD32GUI:Show()PlaySound("\54\48\51","\77\97\115\116\101\114");end end local function valueFormat(val,petOverride)local newVal=val if BD32CharacterData.values.formatted==true then if val>1000000 then newVal=(floor((val/1000000)*10)/10).."\109";elseif val>99999 then newVal=floor((val/1000)).."\107";end end if petOverride then if val>1000000 then newVal=(floor((val/1000000)*10)/10).."\109";elseif val>99999 then newVal=floor((val/1000)).."\107";end end return newVal end local previousHealthValue=UnitHealth("\112\108\97\121\101\114")local maxHealth=UnitHealthMax("\112\108\97\121\101\114")local function monitorHealth(orb)local unitHealthString="\112\108\97\121\101\114";maxHealth=UnitHealthMax(unitHealthString)if not tonumber(maxHealth)or maxHealth==0 then maxHealth=1 end local currentHealth=UnitHealth(unitHealthString)if not tonumber(currentHealth)then currentHealth=1 end local healthPercentage=currentHealth/maxHealth local inverseHealthPercentage=math.abs(healthPercentage-1)local absorbAmount=UnitGetTotalAbsorbs("\112\108\97\121\101\114")or 0 if(BD32CharacterData.smoothing)then local step=0 local onePercentHealth=maxHealth/100 if not previousHealthValue then previousHealthValue=0 end local newValue=previousHealthValue if previousHealthValue<currentHealth then step=1 if previousHealthValue+(onePercentHealth*step)>currentHealth then newValue=currentHealth else newValue=previousHealthValue+(onePercentHealth*step)end elseif previousHealthValue>currentHealth then step=-1 if previousHealthValue+(onePercentHealth*step)<currentHealth then newValue=currentHealth else newValue=previousHealthValue+(onePercentHealth*step)end end previousHealthValue=newValue else previousHealthValue=currentHealth end local targetTexHeight=(previousHealthValue/maxHealth*orb.filling:GetWidth())local targetAbsorbHeight=((previousHealthValue+absorbAmount)/maxHealth*orb.Shield:GetWidth())if targetTexHeight<1 then targetTexHeight=1 end local newDisplayPercentage=previousHealthValue/maxHealth local newAbsorbPercentage=(previousHealthValue+absorbAmount)/maxHealth if newDisplayPercentage>1 then newDisplayPercentage=1 targetTexHeight=orb.filling:GetWidth()end local string1=math.floor(newDisplayPercentage*100)if tonumber(string1)==nil then string1=0 end orb.font1:SetText(string1)local string=valueFormat(currentHealth)orb.font2:SetText(string)if UnitIsDeadOrGhost(unitHealthString)and not orb.font1:IsVisible()then orb.font2:SetText(BD_DEAD_TEXT)elseif UnitIsDeadOrGhost(unitHealthString)then orb.font2:SetText(BD_DEAD_TEXT)end if UnitIsDeadOrGhost(unitHealthString)and not orb.font2:IsVisible()then orb.font1:SetText(BD_DEAD_TEXT)end orb.filling:SetHeight(targetTexHeight)orb.filling:SetTexCoord(0,1,math.abs(newDisplayPercentage-1),1)if BD32CharacterData.healthOrb.showAbsorb==true then if math.floor(newAbsorbPercentage*100)<100 then orb.Shield:SetHeight(targetAbsorbHeight-3)orb.Shield:SetTexCoord(0,1,math.abs(newAbsorbPercentage-1),1)else orb.Shield:SetHeight(orb.filling:GetWidth()+3)orb.Shield:SetTexCoord(0,1,0,1)end end orb.galaxy1:SetAlpha(newDisplayPercentage)orb.galaxy2:SetAlpha(newDisplayPercentage)orb.galaxy3:SetAlpha(newDisplayPercentage)end local function monitorPower(orb,passiveMode,MOmaxPower,MOcurrentPower)if not previousPowerValue then previousPowerValue=UnitPower("\112\108\97\121\101\114")end local unitPowerString="\112\108\97\121\101\114";if vehicleInUse==1 then unitPowerString="\118\101\104\105\99\108\101";end local maxPower=UnitPowerMax(unitPowerString)if not tonumber(maxPower)or maxPower==0 then maxPower=1 end local currentPower=UnitPower(unitPowerString)if not tonumber(currentPower)then currentPower=1 end local powerPercentage=currentPower/maxPower local inversePowerPercentage=math.abs(powerPercentage-1)if passiveMode==true then maxPower=MOmaxPower currentPower=MOcurrentPower powerPercentage=currentPower/maxPower end if(BD32CharacterData.smoothing)then local step=0 local onePercentPower=maxPower/100 if not previousPowerValue then previousPowerValue=0 end local newValue=previousPowerValue if previousPowerValue<currentPower then step=1 if previousPowerValue+(onePercentPower*step)>currentPower then newValue=currentPower else newValue=previousPowerValue+(onePercentPower*step)end elseif previousPowerValue>currentPower then step=-1 if previousPowerValue+(onePercentPower*step)<currentPower then newValue=currentPower else newValue=previousPowerValue+(onePercentPower*step)end end previousPowerValue=newValue else previousPowerValue=currentPower end local targetTexHeight=(previousPowerValue/maxPower*orb.filling:GetWidth())if targetTexHeight<1 then targetTexHeight=1 end local newDisplayPercentage=previousPowerValue/maxPower if newDisplayPercentage>1 then newDisplayPercentage=1 targetTexHeight=orb.filling:GetWidth()end local string1=math.floor(newDisplayPercentage*100)if tonumber(string1)==nil then string1=0 end orb.font1:SetText(string1)local string=valueFormat(currentPower)orb.font2:SetText(string)orb.filling:SetHeight(targetTexHeight)orb.filling:SetTexCoord(0,1,math.abs(newDisplayPercentage-1),1)orb.galaxy1:SetAlpha(newDisplayPercentage)orb.galaxy2:SetAlpha(newDisplayPercentage)orb.galaxy3:SetAlpha(newDisplayPercentage)end local function PetHealthUpdate(orb)local unitHealthString="\112\101\116";local maxHealth=UnitHealthMax(unitHealthString)if not tonumber(maxHealth)or maxHealth==0 then maxHealth=1 end local currentHealth=UnitHealth(unitHealthString)if not tonumber(currentHealth)then currentHealth=0 end local healthPercentage=currentHealth/maxHealth local inverseHealthPercentage=math.abs(healthPercentage-1)local step=0 local onePercentHealth=maxHealth/100 if not previousPetHealth then previousPetHealth=0 end local newValue=previousPetHealth if previousPetHealth<currentHealth then step=1 if previousPetHealth+(onePercentHealth*step)>currentHealth then newValue=currentHealth else newValue=previousPetHealth+(onePercentHealth*step)end elseif previousPetHealth>currentHealth then step=-1 if previousPetHealth+(onePercentHealth*step)<currentHealth then newValue=currentHealth else newValue=previousPetHealth+(onePercentHealth*step)end end previousPetHealth=newValue local targetTexHeight=(previousPetHealth/maxHealth*(45+orb.filling1:GetWidth()))if targetTexHeight<1 then targetTexHeight=1 end local newDisplayPercentage=previousPetHealth/maxHealth if newDisplayPercentage>1 then newDisplayPercentage=0 targetTexHeight=1 end local string1=math.floor(newDisplayPercentage*100)if tonumber(string1)==nil then string1=0 end if UnitIsDeadOrGhost("\112\101\116")and not BD32CharacterData.targetOrb.showValue or UnitIsDeadOrGhost("\112\101\116")and BD32CharacterData.targetOrb.showValue and BD32CharacterData.targetOrb.showValue then orb.font1:SetText(BD_DEAD_TEXT)else orb.font1:SetText(string1)end local string=valueFormat(currentHealth,true)if UnitIsDeadOrGhost("\112\101\116")and not BD32CharacterData.targetOrb.showPercentage then orb.font3:Show()orb.font3:SetText(BD_DEAD_TEXT)elseif UnitIsDeadOrGhost("\116\97\114\103\101\116")then orb.font3:Hide()else orb.font3:Show()orb.font3:SetText(string)end orb.filling1:SetHeight(targetTexHeight)orb.filling1:SetTexCoord(0,1,math.abs(newDisplayPercentage-1),1)orb.galaxy1:SetAlpha(newDisplayPercentage*0.2)orb.galaxy2:SetAlpha(newDisplayPercentage*0.2)orb.galaxy3:SetAlpha(newDisplayPercentage*0.2)end local function PetPowerUpdate(orb)local unitPowerString="\112\101\116";local maxPower=UnitPowerMax(unitPowerString)if not tonumber(maxPower)or maxPower==0 then maxPower=1 end local currentPower=UnitPower(unitPowerString)if not tonumber(currentPower)then currentPower=0 end local powerPercentage=currentPower/maxPower local inversePowerPercentage=math.abs(powerPercentage-1)local step=0 local fillPercentage=100 local onePercentPower=maxPower/fillPercentage local newValue=previousPetPower if not previousPetPower then previousPetPower=0 end if previousPetPower<currentPower then step=1 if previousPetPower+(onePercentPower*step)>currentPower then newValue=currentPower else newValue=previousPetPower+(onePercentPower*step)end elseif previousPetPower>currentPower then step=-1 if previousPetPower+(onePercentPower*step)<currentPower then newValue=currentPower else newValue=previousPetPower+(onePercentPower*step)end end previousPetPower=newValue local targetTexHeight=(previousPetPower/maxPower*(45+orb.filling2:GetWidth()))if targetTexHeight<1 then targetTexHeight=1 end local newDisplayPercentage=previousPetPower/maxPower if newDisplayPercentage>1 then newDisplayPercentage=0 targetTexHeight=1 end local string1=math.floor(newDisplayPercentage*100)if tonumber(string1)==nil then string1=0 end if string1==0 then orb.font2:SetText("")else orb.font2:SetText(string1)end local string=valueFormat(currentPower,true)if currentPower==0 then orb.font4:SetText("")else orb.font4:SetText(string)end orb.filling2:SetHeight(targetTexHeight)orb.filling2:SetTexCoord(0,1,math.abs(newDisplayPercentage-1),1)end local function TargetHealthUpdate(orb)local unitHealthString="\116\97\114\103\101\116";local maxHealth=UnitHealthMax(unitHealthString)if not tonumber(maxHealth)or maxHealth==0 then maxHealth=1 end local currentHealth=UnitHealth(unitHealthString)if not tonumber(currentHealth)then currentHealth=1 end local healthPercentage=currentHealth/maxHealth local inverseHealthPercentage=math.abs(healthPercentage-1)local step=0 local onePercentHealth=maxHealth/100 if not previousTargetHealth then previousTargetHealth=0 end local newValue=previousTargetHealth if previousTargetHealth<currentHealth then step=1 if previousTargetHealth+(onePercentHealth*step)>currentHealth then newValue=currentHealth else newValue=previousTargetHealth+(onePercentHealth*step)end elseif previousTargetHealth>currentHealth then step=-1 if previousTargetHealth+(onePercentHealth*step)<currentHealth then newValue=currentHealth else newValue=previousTargetHealth+(onePercentHealth*step)end end previousTargetHealth=newValue local targetTexHeight=(previousTargetHealth/maxHealth*(42+orb.filling1:GetWidth()))if targetTexHeight<1 then targetTexHeight=1 end local newDisplayPercentage=previousTargetHealth/maxHealth if newDisplayPercentage>1 then newDisplayPercentage=0 targetTexHeight=1 end local string1=math.floor(newDisplayPercentage*100)if tonumber(string1)==nil then string1=0 end if UnitIsDeadOrGhost("\116\97\114\103\101\116")and not BD32CharacterData.targetOrb.showValue or UnitIsDeadOrGhost("\116\97\114\103\101\116")and BD32CharacterData.targetOrb.showValue and BD32CharacterData.targetOrb.showValue then orb.font1:SetText(BD_DEAD_TEXT)else orb.font1:SetText(string1)end local string=valueFormat(currentHealth,true)if UnitIsDeadOrGhost("\116\97\114\103\101\116")and not BD32CharacterData.targetOrb.showPercentage then orb.font3:Show()orb.font3:SetText(BD_DEAD_TEXT)elseif UnitIsDeadOrGhost("\116\97\114\103\101\116")then orb.font3:Hide()else orb.font3:Show()orb.font3:SetText(string)end orb.filling1:SetHeight(targetTexHeight)orb.filling1:SetTexCoord(0,1,math.abs(newDisplayPercentage-1),1)orb.galaxy1:SetAlpha(newDisplayPercentage*0.2)orb.galaxy2:SetAlpha(newDisplayPercentage*0.2)orb.galaxy3:SetAlpha(newDisplayPercentage*0.2)end local function TargetPowerUpdate(orb)local unitPowerString="\116\97\114\103\101\116";local maxPower=UnitPowerMax(unitPowerString)if not tonumber(maxPower)or maxPower==0 then maxPower=1 end local currentPower=UnitPower(unitPowerString)if not tonumber(currentPower)then currentPower=0 end local powerPercentage=currentPower/maxPower local inversePowerPercentage=math.abs(powerPercentage-1)local step=0 local fillPercentage=100 local onePercentPower=maxPower/fillPercentage if not previousTargetPower then previousTargetPower=0 end local newValue=previousTargetPower if previousTargetPower<currentPower then step=1 if previousTargetPower+(onePercentPower*step)>currentPower then newValue=currentPower else newValue=previousTargetPower+(onePercentPower*step)end elseif previousTargetPower>currentPower then step=-1 if previousTargetPower+(onePercentPower*step)<currentPower then newValue=currentPower else newValue=previousTargetPower+(onePercentPower*step)end end previousTargetPower=newValue local targetTexHeight=(previousTargetPower/maxPower*(42+orb.filling2:GetWidth()))if targetTexHeight<1 then targetTexHeight=1 end local newDisplayPercentage=previousTargetPower/maxPower if newDisplayPercentage>1 then newDisplayPercentage=0 targetTexHeight=1 end local string1=math.floor(newDisplayPercentage*100)if tonumber(string1)==nil then string1=0 end if string1==0 then orb.font2:SetText("")else orb.font2:SetText(string1)end local string=valueFormat(currentPower,true)if currentPower==0 then orb.font4:SetText("")else orb.font4:SetText(string)end orb.filling2:SetHeight(targetTexHeight)orb.filling2:SetTexCoord(0,1,math.abs(newDisplayPercentage-1),1)end local function MiniOrbUpdate(orb,passiveMode,MOmaxPower,MOcurrentPower)local unitPowerString="\112\108\97\121\101\114";local maxPower=UnitPowerMax(unitPowerString,0)if not tonumber(maxPower)or maxPower==0 then maxPower=1 end local currentminiOrbPower=UnitPower(unitPowerString,0)if not tonumber(currentminiOrbPower)then currentminiOrbPower=0 end local powerPercentage=currentminiOrbPower/maxPower local inversePowerPercentage=math.abs(powerPercentage-1)if passiveMode==true then maxPower=MOmaxPower currentminiOrbPower=MOcurrentPower powerPercentage=currentminiOrbPower/maxPower end local step=0 local fillPercentage=100 local onePercentPower=maxPower/fillPercentage if not previousMiniOrbPower then previousMiniOrbPower=0 end local newValue=previousMiniOrbPower if previousMiniOrbPower<currentminiOrbPower then step=1 if previousMiniOrbPower+(onePercentPower*step)>currentminiOrbPower then newValue=currentminiOrbPower else newValue=previousMiniOrbPower+(onePercentPower*step)end elseif previousMiniOrbPower>currentminiOrbPower then step=-1 if previousMiniOrbPower+(onePercentPower*step)<currentminiOrbPower then newValue=currentminiOrbPower else newValue=previousMiniOrbPower+(onePercentPower*step)end end previousMiniOrbPower=newValue local targetTexHeight=(previousMiniOrbPower/maxPower*(orb.filling:GetWidth()))if targetTexHeight<1 then targetTexHeight=1 end local newDisplayPercentage=previousMiniOrbPower/maxPower if newDisplayPercentage>1 or newDisplayPercentage<0 then newDisplayPercentage=0 targetTexHeight=1 end local string1=math.floor(newDisplayPercentage*100)if tonumber(string1)==nil then string1=0 end orb.font1:SetText(string1)local string=valueFormat(currentminiOrbPower,true)orb.font2:SetText(string)orb.galaxy1:SetAlpha(newDisplayPercentage*0.8)orb.galaxy2:SetAlpha(newDisplayPercentage*0.8)orb.galaxy3:SetAlpha(newDisplayPercentage*0.8)orb.filling:SetHeight(targetTexHeight)orb.filling:SetTexCoord(0,1,math.abs(newDisplayPercentage-1),1)end local function updatePetValues(orb)PetHealthUpdate(orb)PetPowerUpdate(orb)end function BDOupdateTargetValues(orb)TargetHealthUpdate(orb)TargetPowerUpdate(orb)end local function CreateGalaxy(orb,file,duration,size,x,y)local galaxy=CreateFrame("\70\114\97\109\101",nil,orb)galaxy:SetHeight(size)galaxy:SetWidth(size)galaxy:SetPoint("\67\101\110\116\101\114",x,y)galaxy:SetFrameLevel(4)local galTex=galaxy:CreateTexture()galTex:SetAllPoints(galaxy)galTex:SetTexture(file)galTex:SetBlendMode("\65\68\68")galTex:SetAlpha(1)galaxy.texture=galTex local animGroup=galaxy:CreateAnimationGroup()galaxy.animGroup=animGroup local anim1=galaxy.animGroup:CreateAnimation("\82\111\116\97\116\105\111\110")anim1:SetDegrees(360)anim1:SetDuration(duration)galaxy.animGroup.anim1=anim1 animGroup:Play()animGroup:SetLooping("\82\69\80\69\65\84")return galaxy end local function CreateGlow(orb)local glow=CreateFrame("\80\108\97\121\101\114\77\111\100\101\108",nil,orb)glow:SetFrameStrata("\76\79\87")glow:SetFrameLevel(5)glow:SetAllPoints(orb)glow:SetModel(orbClassColors[charClassNumber].animation)glow:SetAlpha(1)glow:SetScript("\79\110\83\104\111\119",function()glow:SetModel(orbClassColors[charClassNumber].animation)glow:SetModelScale(1)glow:SetPosition(0,0,0)end)orb.glow=glow end local function CreateOrb(parent,name,size,fillTexture,galaxyTexture,offsetX,offsetY,relativePoint,monitorFunc)local orb orb=CreateFrame("\66\117\116\116\111\110",name,UIParent,"\83\101\99\117\114\101\85\110\105\116\66\117\116\116\111\110\84\101\109\112\108\97\116\101")orb:SetHeight(size)orb:SetWidth(size)orb:SetFrameStrata("\76\79\87")orb:SetFrameLevel(2)orb.bg=orb:CreateTexture(nil,"\79\86\69\82\76\65\89")orb.bg:SetTexture(images.."\111\114\98\95\103\108\111\115\115\51\46\116\103\97")orb.bg:SetAllPoints(orb)orb.filling=orb:CreateTexture(nil,"\76\79\87")orb.filling:SetTexture(images..fillTexture)orb.filling:SetPoint("\66\79\84\84\79\77\76\69\70\84",3,3)orb.filling:SetWidth(defaultOrbSize-6)orb.filling:SetHeight(defaultOrbSize-6)orb.filling:SetAlpha(1)local orbGlossHolder=CreateFrame("\70\114\97\109\101",nil,orb)orbGlossHolder:SetAllPoints(orb)orbGlossHolder:SetFrameStrata("\76\79\87")orbGlossHolder:SetFrameLevel(4)local orbGlossOverlay=orbGlossHolder:CreateTexture(nil,"\76\79\87")orbGlossOverlay:SetTexture(images.."\111\114\98\95\103\108\111\115\115\51\46\116\103\97")orbGlossOverlay:SetAllPoints(orbGlossHolder)local newRand=math.random(30,40)orb.galaxy1=CreateGalaxy(orb,images..galaxyTexture.."\49\46\116\103\97",newRand,defaultOrbSize-5,0,0)newRand=math.random(48,53)orb.galaxy2=CreateGalaxy(orb,images..galaxyTexture.."\50\46\116\103\97",newRand,defaultOrbSize-5,0,0)newRand=math.random(59,68)orb.galaxy3=CreateGalaxy(orb,images..galaxyTexture.."\51\46\116\103\97",newRand,defaultOrbSize-5,0,0)CreateGlow(orb)orb:SetScript("\79\110\85\112\100\97\116\101",monitorFunc)orb.fontHolder=CreateFrame("\70\82\65\77\69",nil,orb)orb.fontHolder:SetFrameStrata("\76\79\87")orb.fontHolder:SetFrameLevel(4)orb.fontHolder:SetAllPoints(orb)orb.font1=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font1:SetFont(BD32CharacterData.font,28,"\84\72\73\78\79\85\84\76\73\78\69")orb.font1:SetPoint("\67\69\78\84\69\82",0,10)orb.font2=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font2:SetFont(BD32CharacterData.font,16,"\84\72\73\78\79\85\84\76\73\78\69")orb.font2:SetPoint("\67\69\78\84\69\82",0,-10)orb:ClearAllPoints()orb:SetPoint(relativePoint,nil,relativePoint,offsetX,offsetY)if BD32CharacterData.BD32Orbs.enabled then orb:Show()else orb:Hide()end orb.filling:SetVertexColor(1,1,1,1)if name=="\66\68\51\50\95\72\101\97\108\116\104\79\114\98" then orb.Shield=orb:CreateTexture(nil,"\66\65\67\75\71\82\79\85\78\68")orb.Shield:SetTexture(images.."\111\114\98\95\100\101\98\117\102\102\95\103\108\111\119\46\116\103\97")orb.Shield:SetPoint("\66\79\84\84\79\77\76\69\70\84",0,0)orb.Shield:SetWidth(defaultOrbSize)orb.Shield:SetHeight(defaultOrbSize)orb.Shield:SetAlpha(1)orb:RegisterForClicks("\65\110\121\85\112")orb:SetAttribute("\117\110\105\116","\112\108\97\121\101\114")orb:SetAttribute("\42\116\121\112\101\49","\116\97\114\103\101\116")orb:SetAttribute("\42\116\121\112\101\50","\116\111\103\103\108\101\109\101\110\117")orb.PlayerFrameTooltip=CreateFrame("\71\97\109\101\84\111\111\108\116\105\112","\80\108\97\121\101\114\84\111\111\108\116\105\112",nil,"\71\97\109\101\84\111\111\108\84\105\112\84\101\109\112\108\97\116\101")orb:SetScript("\79\110\69\110\116\101\114",function()GameTooltip_SetDefaultAnchor(GameTooltip,UIParent)GameTooltip:SetUnit("\112\108\97\121\101\114")GameTooltip:Show()end)orb:SetScript("\79\110\76\101\97\118\101",function()GameTooltip:Hide()PlayerFrameDropDown:Hide()end)end return orb end local function CreatePetOrb(parent,name,size,offsetX,offsetY,monitorFunc)local orb orb=CreateFrame("\66\117\116\116\111\110",name,parent,"\83\101\99\117\114\101\85\110\105\116\66\117\116\116\111\110\84\101\109\112\108\97\116\101")orb:SetHeight(size)orb:SetWidth(size)orb:SetFrameStrata("\66\65\67\75\71\82\79\85\78\68")orb:SetFrameLevel(0)orb.bg=orb:CreateTexture(nil,"\79\86\69\82\76\65\89")orb.bg:SetTexture(images.."\111\114\98\95\103\108\111\115\115\51\46\116\103\97")orb.bg:SetAllPoints(orb)orb.filling1=orb:CreateTexture(nil,"\66\65\67\75\71\82\79\85\78\68")orb.filling1:SetTexture(images.."\112\101\116\70\105\108\108\105\110\103\95\104\101\97\108\116\104\46\116\103\97")orb.filling1:SetPoint("\66\79\84\84\79\77\76\69\70\84",3,0)orb.filling1:SetWidth(size/2-3)orb.filling1:SetHeight(size-6)orb.filling1:SetAlpha(1)orb.filling2=orb:CreateTexture(nil,"\66\65\67\75\71\82\79\85\78\68")orb.filling2:SetTexture(images.."\112\101\116\70\105\108\108\105\110\103\95\112\111\119\101\114\46\116\103\97")orb.filling2:SetPoint("\66\79\84\84\79\77\82\73\71\72\84",-3,0)orb.filling2:SetWidth(size/2-3)orb.filling2:SetHeight(size-6)orb.filling2:SetAlpha(1)local orbGlossHolder=CreateFrame("\70\114\97\109\101",nil,orb)orbGlossHolder:SetAllPoints(orb)orbGlossHolder:SetFrameStrata("\66\65\67\75\71\82\79\85\78\68")local orbGlossOverlay=orbGlossHolder:CreateTexture(nil,"\66\65\67\75\71\82\79\85\78\68")orbGlossOverlay:SetTexture(images.."\111\114\98\95\103\108\111\115\115\51\46\116\103\97")orbGlossOverlay:SetAllPoints(orbGlossHolder)orb.divider=CreateFrame("\70\114\97\109\101",nil,orb)orb.divider.texture=orb.divider:CreateTexture(nil,"\79\86\69\82\76\65\89")orb.divider.texture:SetTexture(images.."\109\105\100\100\108\101\66\97\114\46\116\103\97")orb.divider:SetAllPoints(true)orb.divider.texture:SetAllPoints(true)local newRand=math.random(25,35)orb.galaxy1=CreateGalaxy(orb,BD32RotationTextureChoices[1].."\49\46\116\103\97",newRand,size-8,0,0)newRand=math.random(40,50)orb.galaxy2=CreateGalaxy(orb,BD32RotationTextureChoices[1].."\50\46\116\103\97",newRand,size-8,0,0)newRand=math.random(55,60)orb.galaxy3=CreateGalaxy(orb,BD32RotationTextureChoices[1].."\51\46\116\103\97",newRand,size-8,0,0)orb.galaxy1:SetAlpha(0.3)orb.galaxy2:SetAlpha(0.3)orb.galaxy3:SetAlpha(0.3)CreateGlow(orb)orb.fontHolder=CreateFrame("\70\82\65\77\69",nil,orb)orb.fontHolder:SetFrameStrata("\66\65\67\75\71\82\79\85\78\68")orb.fontHolder:SetAllPoints(orb)orb.font1=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font1:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")orb.font1:SetPoint("\67\69\78\84\69\82",-20,5)orb.font1:SetText("\49\48\48")orb.font2=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font2:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")orb.font2:SetPoint("\67\69\78\84\69\82",20,5)orb.font2:SetText("\49\48\48")orb.font3=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font3:SetFont(BD32CharacterData.font,9,"\84\72\73\78\79\85\84\76\73\78\69")orb.font3:SetPoint("\67\69\78\84\69\82",-20,-8)orb.font3:SetText("\49\48\48")orb.font4=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font4:SetFont(BD32CharacterData.font,9,"\84\72\73\78\79\85\84\76\73\78\69")orb.font4:SetPoint("\67\69\78\84\69\82",20,-8)orb.font4:SetText("\49\48\48")orb:SetScript("\79\110\85\112\100\97\116\101",updatePetValues)orb:ClearAllPoints()orb:SetPoint("\67\69\78\84\69\82",offsetX,offsetY)orb:Show()orb.filling1:SetVertexColor(healthOrb.filling:GetVertexColor())orb.filling2:SetVertexColor(manaOrb.filling:GetVertexColor())orb:RegisterForClicks("\65\110\121\85\112")orb:SetAttribute("\117\110\105\116","\112\101\116")orb:SetAttribute("\42\116\121\112\101\49","\116\97\114\103\101\116")orb:SetAttribute("\42\116\121\112\101\50","\116\111\103\103\108\101\109\101\110\117")orb.PetFrameTooltip=CreateFrame("\71\97\109\101\84\111\111\108\116\105\112","\80\101\116\84\111\111\108\84\105\112",nil,"\71\97\109\101\84\111\111\108\84\105\112\84\101\109\112\108\97\116\101")orb:SetScript("\79\110\69\110\116\101\114",function()GameTooltip_SetDefaultAnchor(GameTooltip,UIParent)GameTooltip:SetUnit("\112\101\116")GameTooltip:Show()end)orb:SetScript("\79\110\76\101\97\118\101",function()GameTooltip:Hide()end)RegisterUnitWatch(orb)return orb end local function CreateTargetOrb(parent,name,size,offsetX,offsetY,monitorFunc)local orb orb=CreateFrame("\66\117\116\116\111\110",name,parent,"\83\101\99\117\114\101\85\110\105\116\66\117\116\116\111\110\84\101\109\112\108\97\116\101")orb:SetHeight(size)orb:SetWidth(size)orb:SetFrameStrata("\77\69\68\73\85\77")orb:SetFrameLevel(0)orb.bg=orb:CreateTexture(nil,"\79\86\69\82\76\65\89")orb.bg:SetTexture(images.."\111\114\98\95\98\97\99\107\51\46\116\103\97")orb.bg:SetAllPoints(orb)orb.filling1=orb:CreateTexture(nil,"\77\69\68\73\85\77")orb.filling1:SetTexture(images.."\112\101\116\70\105\108\108\105\110\103\95\104\101\97\108\116\104\46\116\103\97")orb.filling1:SetPoint("\66\79\84\84\79\77\76\69\70\84",3,3)orb.filling1:SetWidth(size/2-3)orb.filling1:SetHeight(size-6)orb.filling1:SetAlpha(1)orb.filling2=orb:CreateTexture(nil,"\77\69\68\73\85\77")orb.filling2:SetTexture(images.."\112\101\116\70\105\108\108\105\110\103\95\112\111\119\101\114\46\116\103\97")orb.filling2:SetPoint("\66\79\84\84\79\77\82\73\71\72\84",-3,3)orb.filling2:SetWidth(size/2-3)orb.filling2:SetHeight(size-6)orb.filling2:SetAlpha(1)local orbGlossHolder=CreateFrame("\70\114\97\109\101",nil,orb)orbGlossHolder:SetAllPoints(orb)orbGlossHolder:SetFrameStrata("\77\69\68\73\85\77")local orbGlossOverlay=orbGlossHolder:CreateTexture(nil,"\66\65\67\75\71\82\79\85\78\68")orbGlossOverlay:SetTexture(images.."\111\114\98\95\103\108\111\115\115\51\46\116\103\97")orbGlossOverlay:SetAllPoints(orbGlossHolder)orbGlossOverlay:SetAlpha(0.5)orb.divider=CreateFrame("\70\114\97\109\101",nil,orb)orb.divider.texture=orb.divider:CreateTexture(nil,"\79\86\69\82\76\65\89")orb.divider.texture:SetTexture(images.."\109\105\100\100\108\101\66\97\114\46\116\103\97")orb.divider:SetAllPoints(true)orb.divider.texture:SetAllPoints(true)orb.namePlate=CreateFrame("\70\114\97\109\101","\66\68\51\50\95\110\97\109\101\80\108\97\116\101",orb)orb.namePlate:SetWidth(158)orb.namePlate:SetHeight(22)orb.namePlate:SetFrameStrata("\77\69\68\73\85\77")orb.namePlate:SetFrameLevel(3)orb.namePlate:SetPoint("\84\79\80",0,17)orb.namePlate.texture=orb.namePlate:CreateTexture(nil,"\79\86\69\82\76\65\89")orb.namePlate.texture:SetTexture(images.."\110\97\109\101\80\108\97\116\101\46\116\103\97")orb.namePlate.texture:SetAllPoints(true)BD32_namePlate:Show()orb.eliteFrame=CreateFrame("\70\114\97\109\101","\66\68\51\50\95\101\108\105\116\101\70\114\97\109\101",orb)orb.eliteFrame:SetWidth(175)orb.eliteFrame:SetHeight(175)orb.eliteFrame:SetFrameStrata("\77\69\68\73\85\77")orb.eliteFrame:SetFrameLevel(1)orb.eliteFrame:SetPoint("\67\69\78\84\69\82",20,-8)orb.eliteFrame.texture=orb.eliteFrame:CreateTexture(nil,"\79\86\69\82\76\65\89")orb.eliteFrame.texture:SetTexture(images.."\101\108\105\116\101\70\114\97\109\101\46\116\103\97")orb.eliteFrame.texture:SetAllPoints(true)BD32_eliteFrame:Hide()orb.rareFrame=CreateFrame("\70\114\97\109\101","\66\68\51\50\95\114\97\114\101\70\114\97\109\101",orb)orb.rareFrame:SetWidth(175)orb.rareFrame:SetHeight(175)orb.rareFrame:SetFrameStrata("\77\69\68\73\85\77")orb.rareFrame:SetFrameLevel(1)orb.rareFrame:SetPoint("\67\69\78\84\69\82",20,-8)orb.rareFrame.texture=orb.rareFrame:CreateTexture(nil,"\79\86\69\82\76\65\89")orb.rareFrame.texture:SetTexture(images.."\114\97\114\101\70\114\97\109\101\46\116\103\97")orb.rareFrame.texture:SetAllPoints(true)BD32_rareFrame:Hide()orb.normalFrame=CreateFrame("\70\114\97\109\101","\66\68\51\50\95\110\111\114\109\97\108\70\114\97\109\101",orb)orb.normalFrame:SetWidth(100)orb.normalFrame:SetHeight(100)orb.normalFrame:SetFrameStrata("\77\69\68\73\85\77")orb.normalFrame:SetFrameLevel(1)orb.normalFrame:SetPoint("\67\69\78\84\69\82",0,0)orb.normalFrame.texture=orb.normalFrame:CreateTexture(nil,"\79\86\69\82\76\65\89")orb.normalFrame.texture:SetTexture(images.."\110\111\114\109\97\108\70\114\97\109\101\46\116\103\97")orb.normalFrame.texture:SetAllPoints(true)BD32_normalFrame:Show()orb.pvpAlliFrame=CreateFrame("\70\114\97\109\101","\66\68\51\50\95\112\118\112\65\108\108\105\70\114\97\109\101",orb)orb.pvpAlliFrame:SetWidth(64)orb.pvpAlliFrame:SetHeight(64)orb.pvpAlliFrame:SetFrameStrata("\77\69\68\73\85\77")orb.pvpAlliFrame:SetFrameLevel(2)orb.pvpAlliFrame:SetPoint("\67\69\78\84\69\82",56,-12)orb.pvpAlliFrame.texture=orb.pvpAlliFrame:CreateTexture(nil,"\79\86\69\82\76\65\89")orb.pvpAlliFrame.texture:SetTexture("\73\110\116\101\114\102\97\99\101\92\84\97\114\103\101\116\105\110\103\70\114\97\109\101\92\85\73\45\80\86\80\45\65\76\76\73\65\78\67\69")orb.pvpAlliFrame.texture:SetAllPoints(true)BD32_pvpAlliFrame:Hide()orb.pvpHordeFrame=CreateFrame("\70\114\97\109\101","\66\68\51\50\95\112\118\112\72\111\114\100\101\70\114\97\109\101",orb)orb.pvpHordeFrame:SetWidth(56)orb.pvpHordeFrame:SetHeight(56)orb.pvpHordeFrame:SetFrameStrata("\77\69\68\73\85\77")orb.pvpHordeFrame:SetFrameLevel(2)orb.pvpHordeFrame:SetPoint("\67\69\78\84\69\82",58,-14)orb.pvpHordeFrame.texture=orb.pvpHordeFrame:CreateTexture(nil,"\79\86\69\82\76\65\89")orb.pvpHordeFrame.texture:SetTexture("\73\110\116\101\114\102\97\99\101\92\84\97\114\103\101\116\105\110\103\70\114\97\109\101\92\85\73\45\80\86\80\45\72\79\82\68\69")orb.pvpHordeFrame.texture:SetAllPoints(true)BD32_pvpHordeFrame:Hide()orb.levelFrameSkull=CreateFrame("\70\114\97\109\101","\66\68\51\50\95\108\101\118\101\108\70\114\97\109\101\83\107\117\108\108",orb)orb.levelFrameSkull:SetWidth(16)orb.levelFrameSkull:SetHeight(16)orb.levelFrameSkull:SetFrameStrata("\77\69\68\73\85\77")orb.levelFrameSkull:SetFrameLevel(2)orb.levelFrameSkull:SetPoint("\67\69\78\84\69\82",38,-32)orb.levelFrameSkull.texture=orb.levelFrameSkull:CreateTexture(nil,"\79\86\69\82\76\65\89")orb.levelFrameSkull.texture:SetTexture("\73\110\116\101\114\102\97\99\101\92\84\97\114\103\101\116\105\110\103\70\114\97\109\101\92\85\73\45\84\97\114\103\101\116\105\110\103\70\114\97\109\101\45\83\107\117\108\108")orb.levelFrameSkull.texture:SetAllPoints(true)BD32_levelFrameSkull:Hide()local BDLevelBackdrop={bgFile="\73\110\116\101\114\102\97\99\101\92\68\105\97\108\111\103\70\114\97\109\101\92\85\73\45\68\105\97\108\111\103\66\111\120\45\66\97\99\107\103\114\111\117\110\100\45\68\97\114\107",tile=false,tileSize=16,edgeSize=16,insets={left=6,right=28,top=6,bottom=30 }}orb.levelFrame=CreateFrame("\70\114\97\109\101","\66\68\51\50\95\114\97\114\101\70\114\97\109\101",orb)orb.levelFrame:SetWidth(55)orb.levelFrame:SetHeight(56)orb.levelFrame:SetFrameStrata("\77\69\68\73\85\77")orb.levelFrame:SetFrameLevel(2)orb.levelFrame:SetPoint("\66\79\84\84\79\77\82\73\71\72\84",32,-28)orb.levelFrame.texture=orb.levelFrame:CreateTexture(nil,"\79\86\69\82\76\65\89")orb.levelFrame.texture:SetTexture("\73\110\116\101\114\102\97\99\101\92\77\105\110\105\109\97\112\92\77\105\110\105\77\97\112\45\84\114\97\99\107\105\110\103\66\111\114\100\101\114")orb.levelFrame.texture:SetAllPoints(true)orb.levelFrame:SetBackdrop(BDLevelBackdrop)local newRand=math.random(25,35)orb.galaxy1=CreateGalaxy(orb,BD32RotationTextureChoices[1].."\49\46\116\103\97",newRand,size-8,0,0)newRand=math.random(40,50)orb.galaxy2=CreateGalaxy(orb,BD32RotationTextureChoices[1].."\50\46\116\103\97",newRand,size-8,0,0)newRand=math.random(55,60)orb.galaxy3=CreateGalaxy(orb,BD32RotationTextureChoices[1].."\51\46\116\103\97",newRand,size-8,0,0)orb.galaxy1:SetAlpha(0.3)orb.galaxy2:SetAlpha(0.3)orb.galaxy3:SetAlpha(0.3)CreateGlow(orb)orb.fontHolder=CreateFrame("\70\82\65\77\69",nil,orb)orb.fontHolder:SetFrameStrata("\77\69\68\73\85\77")orb.fontHolder:SetFrameLevel(3)orb.fontHolder:SetAllPoints(orb)orb.font1=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font1:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")orb.font1:SetPoint("\67\69\78\84\69\82",-20,5)orb.font1:SetText("\49\48\48")orb.font2=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font2:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")orb.font2:SetPoint("\67\69\78\84\69\82",20,5)orb.font2:SetText("\49\48\48")orb.font3=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font3:SetFont(BD32CharacterData.font,9,"\84\72\73\78\79\85\84\76\73\78\69")orb.font3:SetPoint("\67\69\78\84\69\82",-20,-8)orb.font3:SetText("\49\48\48")orb.font4=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font4:SetFont(BD32CharacterData.font,9,"\84\72\73\78\79\85\84\76\73\78\69")orb.font4:SetPoint("\67\69\78\84\69\82",20,-8)orb.font4:SetText("\49\48\48")orb.font5=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font5:SetFont(BD32CharacterData.font,10,"\84\72\73\78\79\85\84\76\73\78\69")orb.font5:SetPoint("\67\69\78\84\69\82",37,-31)orb.font5:SetTextColor(1,0.75,0,1)orb.font5:SetText("\49\48\48")orb.font6=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font6:SetFont("\73\110\116\101\114\102\97\99\101\92\65\100\100\79\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\102\111\110\116\115\92\117\110\105\99\111\100\101\46\116\116\102",10)orb.font6:SetPoint("\84\79\80",0,11)orb.font6:SetTextColor(1,0.85,0,1)orb.font6:SetText("\116\97\114\103\101\116\78\97\109\101")orb.font7=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font7:SetFont(BD32CharacterData.font,10,"\84\72\73\78\79\85\84\76\73\78\69")orb.font7:SetPoint("\66\79\84\84\79\77",46,40)orb.font7:SetTextColor(1,1,1,1)orb.font7:SetText("\48")orb:SetScript("\79\110\85\112\100\97\116\101",BDOupdateTargetValues)orb:ClearAllPoints()orb:SetPoint("\67\69\78\84\69\82",offsetX,offsetY)orb:Show()orb.filling1:SetVertexColor(0,1,0,1)orb.filling2:SetVertexColor(0,0,1,1)orb:RegisterForClicks("\65\110\121\85\112")orb:SetAttribute("\117\110\105\116","\116\97\114\103\101\116")orb:SetAttribute("\42\116\121\112\101\49","\116\97\114\103\101\116")orb:SetAttribute("\42\116\121\112\101\50","\116\111\103\103\108\101\109\101\110\117")orb.TargetFrameTooltip=CreateFrame("\71\97\109\101\84\111\111\108\116\105\112","\84\97\114\103\101\116\84\111\111\108\84\105\112",nil,"\71\97\109\101\84\111\111\108\84\105\112\84\101\109\112\108\97\116\101")orb:SetScript("\79\110\69\110\116\101\114",function()GameTooltip_SetDefaultAnchor(GameTooltip,UIParent)GameTooltip:SetUnit("\116\97\114\103\101\116")GameTooltip:Show()end)orb:SetScript("\79\110\76\101\97\118\101",function()GameTooltip:Hide()end)return orb end local function CreateMiniOrb(parent,name,size,fillTexture,galaxyTexture,offsetX,offsetY,monitorFunc)local orb orb=CreateFrame("\66\117\116\116\111\110",name,parent,"\83\101\99\117\114\101\65\99\116\105\111\110\66\117\116\116\111\110\84\101\109\112\108\97\116\101")orb:SetHeight(size)orb:SetWidth(size)orb:SetFrameStrata("\66\65\67\75\71\82\79\85\78\68")orb.bg=orb:CreateTexture(nil,"\79\86\69\82\76\65\89")orb.bg:SetTexture(images.."\111\114\98\95\103\108\111\115\115\51\46\116\103\97")orb.bg:SetAllPoints(orb)orb.filling=orb:CreateTexture(nil,"\66\65\67\75\71\82\79\85\78\68")orb.filling:SetTexture(images..fillTexture)orb.filling:SetPoint("\66\79\84\84\79\77\76\69\70\84",3,3)orb.filling:SetWidth(size-6)orb.filling:SetHeight(size-6)orb.filling:SetAlpha(1)local orbGlossHolder=CreateFrame("\70\114\97\109\101",nil,orb)orbGlossHolder:SetAllPoints(orb)orbGlossHolder:SetFrameStrata("\66\65\67\75\71\82\79\85\78\68")local orbGlossOverlay=orbGlossHolder:CreateTexture(nil,"\66\65\67\75\71\82\79\85\78\68")orbGlossOverlay:SetTexture(images.."\111\114\98\95\103\108\111\115\115\51\46\116\103\97")orbGlossOverlay:SetAllPoints(orbGlossHolder)local newRand=math.random(25,35)orb.galaxy1=CreateGalaxy(orb,images..galaxyTexture.."\49\46\116\103\97",newRand,size-8,0,0)newRand=math.random(40,50)orb.galaxy2=CreateGalaxy(orb,images..galaxyTexture.."\50\46\116\103\97",newRand,size-8,0,0)newRand=math.random(55,60)orb.galaxy3=CreateGalaxy(orb,images..galaxyTexture.."\51\46\116\103\97",newRand,size-8,0,0)orb.galaxy1:SetAlpha(0.3)orb.galaxy2:SetAlpha(0.3)orb.galaxy3:SetAlpha(0.3)CreateGlow(orb)orb.fontHolder=CreateFrame("\70\82\65\77\69",nil,orb)orb.fontHolder:SetFrameStrata("\66\65\67\75\71\82\79\85\78\68")orb.fontHolder:SetFrameLevel(6)orb.fontHolder:SetAllPoints(orb)orb.font1=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font1:SetFont(BD32CharacterData.font,23,"\84\72\73\78\79\85\84\76\73\78\69")orb.font1:SetPoint("\67\69\78\84\69\82",0,8)orb.font1:SetText("\49\48\48")orb.font2=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font2:SetFont(BD32CharacterData.font,15,"\84\72\73\78\79\85\84\76\73\78\69")orb.font2:SetPoint("\67\69\78\84\69\82",0,-8)orb.font2:SetText("\49\48\48")orb:ClearAllPoints()orb:SetPoint("\67\69\78\84\69\82",offsetX,offsetY)orb:Show()orb.filling:SetVertexColor(healthOrb.filling:GetVertexColor())return orb end local function CreateXMLOrb(parent,name,size,fillTexture,galaxyTexture)local orb orb=CreateFrame("\66\117\116\116\111\110",name,parent,nil)orb:SetHeight(size)orb:SetWidth(size)orb:SetFrameStrata("\72\73\71\72")orb.bg=orb:CreateTexture(nil,"\79\86\69\82\76\65\89")orb.bg:SetTexture(images.."\111\114\98\95\103\108\111\115\115\51\46\116\103\97")orb.bg:SetAllPoints(orb)orb.filling=orb:CreateTexture(nil,"\72\73\71\72")orb.filling:SetTexture(images..fillTexture)orb.filling:SetPoint("\66\79\84\84\79\77\76\69\70\84",3,3)orb.filling:SetWidth(size-6)orb.filling:SetHeight(size-6)orb.filling:SetAlpha(1)local orbGlossHolder=CreateFrame("\70\114\97\109\101",nil,orb)orbGlossHolder:SetAllPoints(orb)orbGlossHolder:SetFrameStrata("\68\73\65\76\79\71")local orbGlossOverlay=orbGlossHolder:CreateTexture(nil,"\68\73\65\76\79\71")orbGlossOverlay:SetTexture(images.."\111\114\98\95\103\108\111\115\115\51\46\116\103\97")orbGlossOverlay:SetAllPoints(orbGlossHolder)local newRand=math.random(25,35)orb.galaxy1=CreateGalaxy(orb,images..galaxyTexture.."\49\46\116\103\97",newRand,size-3,0,0)newRand=math.random(40,50)orb.galaxy2=CreateGalaxy(orb,images..galaxyTexture.."\50\46\116\103\97",newRand,size-3,0,0)newRand=math.random(55,60)orb.galaxy3=CreateGalaxy(orb,images..galaxyTexture.."\51\46\116\103\97",newRand,size-3,0,0)CreateGlow(orb)orb.fontHolder=CreateFrame("\70\82\65\77\69",nil,orb)orb.fontHolder:SetFrameStrata("\68\73\65\76\79\71")orb.fontHolder:SetAllPoints(orb)orb.font1=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font1:SetFont(BD32CharacterData.font,35,"\84\72\73\78\79\85\84\76\73\78\69")orb.font1:SetText("\49\48\48")orb.font1:SetPoint("\67\69\78\84\69\82",0,12)orb.font2=orb.fontHolder:CreateFontString(nil,"\79\86\69\82\76\65\89")orb.font2:SetFont(BD32CharacterData.font,20,"\84\72\73\78\79\85\84\76\73\78\69")orb.font2:SetText("\49\48\48\48\48\48")orb.font2:SetPoint("\67\69\78\84\69\82",0,-12)orb:ClearAllPoints()orb:SetAllPoints(xmlOrbDisplayFrame2)orb:Show()orb.filling:SetVertexColor(1,1,1,1)return orb end local function addArtwork(file,orb,name,offsetX,offsetY,height,width)local art=CreateFrame("\70\114\97\109\101","\66\68\51\50"..name,orb)art:SetPoint("\67\69\78\84\69\82",offsetX,offsetY)art:SetHeight(height)art:SetWidth(width)art:SetFrameStrata("\76\79\87")art:SetFrameLevel(8)art.texture=art:CreateTexture(nil,"\79\86\69\82\76\65\89")art.texture:SetTexture(file)art.texture:SetAllPoints(art)return art end local function addCastBar(file,orb,name,offsetX,offsetY,height,width)local CastBar=CreateFrame("\70\114\97\109\101","\66\68\51\50"..name,orb)CastBar:SetPoint("\66\79\84\84\79\77",offsetX,offsetY)CastBar:SetHeight(height)CastBar:SetWidth(width)CastBar:SetFrameStrata("\66\65\67\75\71\82\79\85\78\68")CastBar:SetFrameLevel(9)CastBar.texture=CastBar:CreateTexture(nil,"\79\86\69\82\76\65\89")CastBar.texture:SetTexture(file)CastBar.texture:SetAllPoints(CastBar)CastBar:SetScript("\79\110\76\101\97\118\101",function()GameTooltip:Hide()end)return CastBar end local function addLowLevelTexture(file,orb,name,offsetX,offsetY,height,width)local art=CreateFrame("\70\114\97\109\101","\66\68\51\50"..name,orb)art:SetPoint("\67\69\78\84\69\82",offsetX,offsetY)art:SetHeight(height)art:SetWidth(width)art:SetFrameStrata("\76\79\87")art.texture=art:CreateTexture(nil,"\79\86\69\82\76\65\89")art.texture:SetTexture(file)art.texture:SetAllPoints(art)art.tooltip=CreateFrame("\71\97\109\101\84\111\111\108\116\105\112","\80\108\97\121\101\114\84\111\111\108\116\105\112",nil,"\71\97\109\101\84\111\111\108\84\105\112\84\101\109\112\108\97\116\101")return art end local function HowManyBarsShown()local BarCounter=0 if MainMenuExpBar:IsShown()then BarCounter=BarCounter+1 end if ArtifactWatchBar:IsShown()then BarCounter=BarCounter+1 end if HonorWatchBar:IsShown()then BarCounter=BarCounter+1 end if ReputationWatchBar:IsShown()then BarCounter=BarCounter+1 end return BarCounter end local function HandlePetBar()if not InCombatLockdown()then local hookButtonsAtFrame=bar1Frame local showBarBottomLeft,showBarBottomRight=GetActionBarToggles()local barButtonScale=BD32CharacterData.barFrame.scale local barYoffset=0 local ButtonYoffset=0 local ExpBarYoffset=0 if showBarBottomRight then hookButtonsAtFrame=bar3Frame barYoffset=115 elseif showBarBottomLeft and not showBarBottomRight then hookButtonsAtFrame=bar2Frame if HowManyBarsShown()>1 then barYoffset=53 ButtonYoffset=10 else barYoffset=55 ButtonYoffset=5 end elseif not showBarBottomLeft and not showBarBottomRight then hookButtonsAtFrame=bar1Frame if HowManyBarsShown()>1 then barYoffset=8 ButtonYoffset=9 else barYoffset=8 ButtonYoffset=3 end end PetActionButton1:ClearAllPoints()PetActionButton2:ClearAllPoints()PetActionButton3:ClearAllPoints()PetActionButton4:ClearAllPoints()PetActionButton5:ClearAllPoints()PetActionButton6:ClearAllPoints()PetActionButton7:ClearAllPoints()PetActionButton8:ClearAllPoints()PetActionButton9:ClearAllPoints()PetActionButton10:ClearAllPoints()PetActionButton1:SetScale(barButtonScale*60)PetActionButton2:SetScale(barButtonScale*60)PetActionButton3:SetScale(barButtonScale*60)PetActionButton4:SetScale(barButtonScale*60)PetActionButton5:SetScale(barButtonScale*60)PetActionButton6:SetScale(barButtonScale*60)PetActionButton7:SetScale(barButtonScale*60)PetActionButton8:SetScale(barButtonScale*60)PetActionButton9:SetScale(barButtonScale*60)PetActionButton10:SetScale(barButtonScale*60)PetActionButton1:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-278,86+barYoffset+ButtonYoffset)PetActionButton2:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-240,86+barYoffset+ButtonYoffset)PetActionButton3:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-204,86+barYoffset+ButtonYoffset)PetActionButton4:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-164,86+barYoffset+ButtonYoffset)PetActionButton5:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-124,86+barYoffset+ButtonYoffset)PetActionButton6:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-88,86+barYoffset+ButtonYoffset)PetActionButton7:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-50,86+barYoffset+ButtonYoffset)PetActionButton8:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-12,86+barYoffset+ButtonYoffset)PetActionButton9:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",30,86+barYoffset+ButtonYoffset)PetActionButton10:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",68,86+barYoffset+ButtonYoffset)MainMenuBarVehicleLeaveButton:ClearAllPoints()MainMenuBarVehicleLeaveButton:SetScale(barButtonScale*66)MainMenuBarVehicleLeaveButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-252,68+barYoffset+ButtonYoffset)ExtraActionButton1:ClearAllPoints()ExtraActionButton1:SetScale(barButtonScale*60)ExtraActionButton1:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,126+barYoffset)end end local function handlePossesBar()if not InCombatLockdown()then local GlobVal=BD32CharacterData.barFrame.scale local hookButtonsAtFrame=bar1Frame local showBarBottomLeft,showBarBottomRight=GetActionBarToggles()if showBarBottomRight then hookButtonsAtFrame=bar3Frame elseif showBarBottomLeft and not showBarBottomRight then hookButtonsAtFrame=bar2Frame elseif not showBarBottomLeft and not showBarBottomRight then hookButtonsAtFrame=bar1Frame end PossessBarFrame:SetMovable(true)PossessBarFrame:SetUserPlaced(true)if hookButtonsAtFrame==bar3Frame then PossessBarFrame:ClearAllPoints()PossessBarFrame:SetScale(GlobVal*55)PossessBarFrame:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-310,216)elseif hookButtonsAtFrame==bar2Frame then PossessBarFrame:ClearAllPoints()PossessBarFrame:SetScale(GlobVal*55)PossessBarFrame:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-310,157)elseif hookButtonsAtFrame==bar1Frame then PossessBarFrame:ClearAllPoints()PossessBarFrame:SetScale(GlobVal*55)PossessBarFrame:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-310,101)end end end function handleVehicleLeaveButton()local showBarBottomLeft,showBarBottomRight=GetActionBarToggles()local hookButtonsAtFrame=bar1Frame local barYoffset=0 local ButtonYoffset=0 if showBarBottomRight then hookButtonsAtFrame=bar3Frame barYoffset=115 elseif showBarBottomLeft and not showBarBottomRight then hookButtonsAtFrame=bar2Frame barYoffset=50 ButtonYoffset=5 elseif not showBarBottomLeft and not showBarBottomRight then hookButtonsAtFrame=bar1Frame barYoffset=0 ButtonYoffset=5 end MainMenuBarVehicleLeaveButton:ClearAllPoints()MainMenuBarVehicleLeaveButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-252,68+barYoffset+ButtonYoffset)end function BD32SetGlobalOrbScale(OrbVal)if not InCombatLockdown()then BD32CharacterData.BD32Orbs.scale=OrbVal/100 BD32HealthOrbScaleSlider:SetValue(OrbVal)BD32ManaOrbScaleSlider:SetValue(OrbVal)end end function BD32SetTargetOrbScale(TargetOrbVal)if not InCombatLockdown()and targetOrb then TargetOrbVal=TargetOrbVal/100 targetOrb:SetScale(TargetOrbVal)BD32CharacterData.targetOrb.scale=TargetOrbVal end if BD32CharacterData.targetOrb.enabled then TargetFrameToT:ClearAllPoints()TargetFrameToT:SetPoint('\66\79\84\84\79\77',BD32_TargetOrb,-10,-36)TargetFrameToT:SetScale(BD32CharacterData.targetOrb.scale)end end function BD32SetComboOrbScale(ComboOrbVal)if not InCombatLockdown()and miniOrb then ComboOrbVal=ComboOrbVal/100 miniOrb:SetScale(ComboOrbVal)BD32CharacterData.miniOrb.scale=ComboOrbVal end end function BD32SetPetOrbScale(PetOrbVal)if not InCombatLockdown()and petOrb then PetOrbVal=PetOrbVal/100 petOrb:SetScale(PetOrbVal)BD32CharacterData.petOrb.scale=PetOrbVal end end function BD32SetGlobalHealthOrbScale(healthOrbVal)if not InCombatLockdown()then healthOrbVal=healthOrbVal/100 healthOrb:SetScale(healthOrbVal)BD32CharacterData.healthOrb.scale=healthOrbVal end end function BD32SetGlobalManaOrbScale(manaOrbVal)if not InCombatLockdown()then manaOrbVal=manaOrbVal/100 manaOrb:SetScale(manaOrbVal)BD32CharacterData.manaOrb.scale=manaOrbVal end end function BD32SetGlobalScale(GlobVal)if not InCombatLockdown()then GlobVal=GlobVal/100 bar1Frame:SetScale(GlobVal)bar2Frame:SetScale(GlobVal)bar3Frame:SetScale(GlobVal)BD32CharacterData.barFrame.scale=GlobVal if NotForbiddenAddonLoaded()then local hookButtonsAtFrame=bar1Frame local showBarBottomLeft,showBarBottomRight=GetActionBarToggles()if showBarBottomRight then hookButtonsAtFrame=bar3Frame elseif showBarBottomLeft and not showBarBottomRight then hookButtonsAtFrame=bar2Frame elseif not showBarBottomLeft and not showBarBottomRight then hookButtonsAtFrame=bar1Frame end ActionButton1:ClearAllPoints()ActionButton2:ClearAllPoints()ActionButton3:ClearAllPoints()ActionButton4:ClearAllPoints()ActionButton5:ClearAllPoints()ActionButton6:ClearAllPoints()ActionButton7:ClearAllPoints()ActionButton8:ClearAllPoints()ActionButton9:ClearAllPoints()ActionButton10:ClearAllPoints()ActionButton11:ClearAllPoints()ActionButton12:ClearAllPoints()ActionButton1:SetScale(GlobVal*66)ActionButton2:SetScale(GlobVal*66)ActionButton3:SetScale(GlobVal*66)ActionButton4:SetScale(GlobVal*66)ActionButton5:SetScale(GlobVal*66)ActionButton6:SetScale(GlobVal*66)ActionButton7:SetScale(GlobVal*66)ActionButton8:SetScale(GlobVal*66)ActionButton9:SetScale(GlobVal*66)ActionButton10:SetScale(GlobVal*66)ActionButton11:SetScale(GlobVal*66)ActionButton12:SetScale(GlobVal*66)ActionButton1:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-249,35)ActionButton2:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-204,35)ActionButton3:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-159,35)ActionButton4:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-114,35)ActionButton5:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-69,35)ActionButton6:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-24,35)ActionButton7:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",22,35)ActionButton8:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",67,35)ActionButton9:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",112,35)ActionButton10:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",157,35)ActionButton11:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",202,35)ActionButton12:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",247,35)ChatFrame1:SetFrameStrata("\76\79\87")ChatFrame1:SetFrameLevel(9)ChatFrame2:SetFrameStrata("\76\79\87")ChatFrame1:SetFrameLevel(9)ChatFrame3:SetFrameStrata("\76\79\87")ChatFrame1:SetFrameLevel(9)ChatFrame4:SetFrameStrata("\76\79\87")ChatFrame1:SetFrameLevel(9)ChatFrame5:SetFrameStrata("\76\79\87")ChatFrame1:SetFrameLevel(9)ChatFrame6:SetFrameStrata("\76\79\87")ChatFrame1:SetFrameLevel(9)ChatFrame7:SetFrameStrata("\76\79\87")ChatFrame1:SetFrameLevel(9)ChatFrame8:SetFrameStrata("\76\79\87")ChatFrame1:SetFrameLevel(9)ChatFrame9:SetFrameStrata("\76\79\87")ChatFrame1:SetFrameLevel(9)ChatFrame10:SetFrameStrata("\76\79\87")ChatFrame1:SetFrameLevel(9)MultiBarBottomLeftButton1:ClearAllPoints()MultiBarBottomLeftButton2:ClearAllPoints()MultiBarBottomLeftButton3:ClearAllPoints()MultiBarBottomLeftButton4:ClearAllPoints()MultiBarBottomLeftButton5:ClearAllPoints()MultiBarBottomLeftButton6:ClearAllPoints()MultiBarBottomLeftButton7:ClearAllPoints()MultiBarBottomLeftButton8:ClearAllPoints()MultiBarBottomLeftButton9:ClearAllPoints()MultiBarBottomLeftButton10:ClearAllPoints()MultiBarBottomLeftButton11:ClearAllPoints()MultiBarBottomLeftButton12:ClearAllPoints()MultiBarBottomLeftButton1:SetScale(GlobVal*66)MultiBarBottomLeftButton2:SetScale(GlobVal*66)MultiBarBottomLeftButton3:SetScale(GlobVal*66)MultiBarBottomLeftButton4:SetScale(GlobVal*66)MultiBarBottomLeftButton5:SetScale(GlobVal*66)MultiBarBottomLeftButton6:SetScale(GlobVal*66)MultiBarBottomLeftButton7:SetScale(GlobVal*66)MultiBarBottomLeftButton8:SetScale(GlobVal*66)MultiBarBottomLeftButton9:SetScale(GlobVal*66)MultiBarBottomLeftButton10:SetScale(GlobVal*66)MultiBarBottomLeftButton11:SetScale(GlobVal*66)MultiBarBottomLeftButton12:SetScale(GlobVal*66)MultiBarBottomLeftButton1:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-249,82)MultiBarBottomLeftButton2:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-204,82)MultiBarBottomLeftButton3:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-159,82)MultiBarBottomLeftButton4:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-114,82)MultiBarBottomLeftButton5:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-69,82)MultiBarBottomLeftButton6:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-24,82)MultiBarBottomLeftButton7:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",22,82)MultiBarBottomLeftButton8:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",67,82)MultiBarBottomLeftButton9:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",112,82)MultiBarBottomLeftButton10:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",157,82)MultiBarBottomLeftButton11:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",202,82)MultiBarBottomLeftButton12:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",247,82)MultiBarBottomRightButton1:ClearAllPoints()MultiBarBottomRightButton2:ClearAllPoints()MultiBarBottomRightButton3:ClearAllPoints()MultiBarBottomRightButton4:ClearAllPoints()MultiBarBottomRightButton5:ClearAllPoints()MultiBarBottomRightButton6:ClearAllPoints()MultiBarBottomRightButton7:ClearAllPoints()MultiBarBottomRightButton8:ClearAllPoints()MultiBarBottomRightButton9:ClearAllPoints()MultiBarBottomRightButton10:ClearAllPoints()MultiBarBottomRightButton11:ClearAllPoints()MultiBarBottomRightButton12:ClearAllPoints()MultiBarBottomRightButton1:SetScale(GlobVal*66)MultiBarBottomRightButton2:SetScale(GlobVal*66)MultiBarBottomRightButton3:SetScale(GlobVal*66)MultiBarBottomRightButton4:SetScale(GlobVal*66)MultiBarBottomRightButton5:SetScale(GlobVal*66)MultiBarBottomRightButton6:SetScale(GlobVal*66)MultiBarBottomRightButton7:SetScale(GlobVal*66)MultiBarBottomRightButton8:SetScale(GlobVal*66)MultiBarBottomRightButton9:SetScale(GlobVal*66)MultiBarBottomRightButton10:SetScale(GlobVal*66)MultiBarBottomRightButton11:SetScale(GlobVal*66)MultiBarBottomRightButton12:SetScale(GlobVal*66)MultiBarBottomRightButton1:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-248,139)MultiBarBottomRightButton2:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-203,139)MultiBarBottomRightButton3:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-158,139)MultiBarBottomRightButton4:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-113,139)MultiBarBottomRightButton5:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-68,139)MultiBarBottomRightButton6:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-23,139)MultiBarBottomRightButton7:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",22,139)MultiBarBottomRightButton8:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",67,139)MultiBarBottomRightButton9:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",112,139)MultiBarBottomRightButton10:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",157,139)MultiBarBottomRightButton11:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",202,139)MultiBarBottomRightButton12:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",247,139)if not BD32CharacterData.multiBar then BD32CharacterData.multiBar=defaultsTable.multiBar end if not BD32CharacterData.multiBar.right.hasMoved then MultiBarRight:ClearAllPoints()MultiBarRight:SetScale(BD32CharacterData.barFrame.scale*66)MultiBarRight:SetPoint("\82\73\71\72\84",nil,"\82\73\71\72\84",0,0)end MultiBarRight:SetScale(GlobVal*66)MultiBarRight.ignoreFramePositionManager=true if not BD32CharacterData.multiBar.left.hasMoved then MultiBarLeft:ClearAllPoints()MultiBarLeft:SetScale(BD32CharacterData.barFrame.scale*66)MultiBarLeft:SetPoint("\82\73\71\72\84",nil,"\82\73\71\72\84",-40,0)end MultiBarLeft:SetScale(GlobVal*66)MultiBarLeft.ignoreFramePositionManager=true Spec=GetSpecializationInfo(GetSpecialization())if Spec==105 or Spec==102 then StanceButton1:ClearAllPoints()StanceButton1:SetScale(GlobVal*51)StanceButton1:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-332,9)StanceButton2:ClearAllPoints()StanceButton2:SetScale(GlobVal*51)StanceButton2:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-300,9)StanceButton3:ClearAllPoints()StanceButton3:SetScale(GlobVal*51)StanceButton3:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-268,9)StanceButton4:ClearAllPoints()StanceButton4:SetScale(GlobVal*51)StanceButton4:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-236,9)StanceButton5:ClearAllPoints()StanceButton5:SetScale(GlobVal*51)StanceButton5:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-204,9)StanceButton6:ClearAllPoints()StanceButton6:SetScale(GlobVal*51)StanceButton6:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-172,9)else StanceButton1:ClearAllPoints()StanceButton1:SetScale(GlobVal*55)StanceButton1:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-305,8)StanceButton2:ClearAllPoints()StanceButton2:SetScale(GlobVal*55)StanceButton2:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-271,8)StanceButton3:ClearAllPoints()StanceButton3:SetScale(GlobVal*55)StanceButton3:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-237,8)StanceButton4:ClearAllPoints()StanceButton4:SetScale(GlobVal*55)StanceButton4:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-203,8)StanceButton5:ClearAllPoints()StanceButton5:SetScale(GlobVal*55)StanceButton5:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-169,8)end ActionBarUpButton:ClearAllPoints()ActionBarUpButton:SetScale(GlobVal*48)ActionBarUpButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",174,16)ActionBarDownButton:ClearAllPoints()ActionBarDownButton:SetScale(GlobVal*48)ActionBarDownButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",174,-2)HandleMicroButtons()HandleProgressBarsShow()HandlePetBar()handlePossesBar()end end end function setSecureFunctions()if NotForbiddenAddonLoaded()then hooksecurefunc("\77\97\105\110\77\101\110\117\66\97\114\95\85\112\100\97\116\101\69\120\112\101\114\105\101\110\99\101\66\97\114\115",HandleProgressBarsShow)hooksecurefunc("\77\97\105\110\77\101\110\117\66\97\114\95\85\112\100\97\116\101\69\120\112\101\114\105\101\110\99\101\66\97\114\115",HandlePetBar)hooksecurefunc("\77\97\105\110\77\101\110\117\66\97\114\95\85\112\100\97\116\101\69\120\112\101\114\105\101\110\99\101\66\97\114\115",setSecureMicroButtons)hooksecurefunc("\80\111\115\115\101\115\115\66\97\114\95\85\112\100\97\116\101",handlePossesBar)hooksecurefunc("\77\97\105\110\77\101\110\117\66\97\114\86\101\104\105\99\108\101\76\101\97\118\101\66\117\116\116\111\110\95\85\112\100\97\116\101",handleVehicleLeaveButton)TotemFrame:HookScript("\79\110\69\118\101\110\116",function()TotemFrame:SetParent(healthOrb)TotemFrameTotem1:ClearAllPoints()TotemFrameTotem1:SetScale(BD32CharacterData.healthOrb.scale/1.1)TotemFrameTotem1:SetPoint("\84\79\80",BD32_HealthOrb,"\84\79\80",-32,40)TotemFrameTotem2:ClearAllPoints()TotemFrameTotem2:SetScale(BD32CharacterData.healthOrb.scale/1.1)TotemFrameTotem2:SetPoint("\84\79\80",BD32_HealthOrb,"\84\79\80",0,40)TotemFrameTotem3:ClearAllPoints()TotemFrameTotem3:SetScale(BD32CharacterData.healthOrb.scale/1.1)TotemFrameTotem3:SetPoint("\84\79\80",BD32_HealthOrb,"\84\79\80",32,40)end)ReputationWatchBar.OverlayFrame:SetScale(BD32CharacterData.barFrame.scale*2)ReputationWatchBar.OverlayFrame:SetAlpha(0)ReputationWatchBar:HookScript("\79\110\69\110\116\101\114",function()UIFrameFadeIn(ReputationWatchBar.OverlayFrame,1,ReputationWatchBar.OverlayFrame:GetAlpha(),1)end)ReputationWatchBar:HookScript("\79\110\76\101\97\118\101",function(self)UIFrameFadeOut(ReputationWatchBar.OverlayFrame,1,ReputationWatchBar.OverlayFrame:GetAlpha(),0)end)ArtifactWatchBar.OverlayFrame:SetScale(BD32CharacterData.barFrame.scale*2)ArtifactWatchBar.OverlayFrame:SetAlpha(0)ArtifactWatchBar:HookScript("\79\110\69\110\116\101\114",function()UIFrameFadeIn(ArtifactWatchBar.OverlayFrame,1,ArtifactWatchBar.OverlayFrame:GetAlpha(),1)end)ArtifactWatchBar:HookScript("\79\110\76\101\97\118\101",function()UIFrameFadeOut(ArtifactWatchBar.OverlayFrame,1,ArtifactWatchBar.OverlayFrame:GetAlpha(),0)end)MainMenuBarOverlayFrame:SetScale(BD32CharacterData.barFrame.scale*2)MainMenuBarOverlayFrame:SetAlpha(0)MainMenuExpBar:HookScript("\79\110\69\110\116\101\114",function()UIFrameFadeIn(MainMenuBarOverlayFrame,1,MainMenuBarOverlayFrame:GetAlpha(),1)end)MainMenuExpBar:HookScript("\79\110\76\101\97\118\101",function()UIFrameFadeOut(MainMenuBarOverlayFrame,1,MainMenuBarOverlayFrame:GetAlpha(),0)end)end end function HandleProgressBarsShow()if NotForbiddenAddonLoaded()then local showBarBottomLeft,showBarBottomRight=GetActionBarToggles()local hookButtonsAtFrame=bar1Frame local barYoffset=0 local ExpBarYoffset=0 local ButtonYoffset=0 if showBarBottomRight then hookButtonsAtFrame=bar3Frame barYoffset=115 elseif showBarBottomLeft and not showBarBottomRight then hookButtonsAtFrame=bar2Frame barYoffset=50 ButtonYoffset=5 ExpBarYoffset=55 elseif not showBarBottomLeft and not showBarBottomRight then hookButtonsAtFrame=bar1Frame barYoffset=0 ButtonYoffset=5 ExpBarYoffset=17 end ArtifactWatchBar:ClearAllPoints()MainMenuExpBar:ClearAllPoints()ReputationWatchBar:ClearAllPoints()HonorWatchBar.StatusBar:ClearAllPoints()ArtifactWatchBar:SetScale(BD32CharacterData.barFrame.scale*34.5)MainMenuExpBar:SetScale(BD32CharacterData.barFrame.scale*34.5)ReputationWatchBar:SetScale(BD32CharacterData.barFrame.scale*34.5)HonorWatchBar.StatusBar:SetScale(BD32CharacterData.barFrame.scale*34.5)if MainMenuExpBar:IsShown()and ArtifactWatchBar:IsShown()and ReputationWatchBar:IsShown()then MainMenuExpBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,138+barYoffset+ExpBarYoffset)ArtifactWatchBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,125+barYoffset+ExpBarYoffset)ReputationWatchBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,115+barYoffset+ExpBarYoffset)elseif MainMenuExpBar:IsShown()and ArtifactWatchBar:IsShown()then MainMenuExpBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,134+barYoffset+ExpBarYoffset)ArtifactWatchBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,120+barYoffset+ExpBarYoffset)elseif MainMenuExpBar:IsShown()and ReputationWatchBar:IsShown()then MainMenuExpBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,134+barYoffset+ExpBarYoffset)ReputationWatchBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,120+barYoffset+ExpBarYoffset)elseif ArtifactWatchBar:IsShown()and ReputationWatchBar:IsShown()then if hookButtonsAtFrame==bar3Frame then ArtifactWatchBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,134+barYoffset+ExpBarYoffset)ReputationWatchBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,117+barYoffset+ExpBarYoffset)else ArtifactWatchBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,137+barYoffset+ExpBarYoffset)ReputationWatchBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,125+barYoffset+ExpBarYoffset)end elseif ArtifactWatchBar:IsShown()and HonorWatchBar:IsShown()then if hookButtonsAtFrame==bar3Frame then ArtifactWatchBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,134+barYoffset+ExpBarYoffset)HonorWatchBar.StatusBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,120+barYoffset+ExpBarYoffset)else ArtifactWatchBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,139+barYoffset+ExpBarYoffset)HonorWatchBar.StatusBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,128+barYoffset+ExpBarYoffset)end elseif MainMenuExpBar:IsShown()then MainMenuExpBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,127+barYoffset+ExpBarYoffset)elseif ReputationWatchBar:IsShown()then ReputationWatchBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,127+barYoffset+ExpBarYoffset)elseif ArtifactWatchBar:IsShown()then ArtifactWatchBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,127+barYoffset+ExpBarYoffset)elseif HonorWatchBar:IsShown()then HonorWatchBar:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-3,127+barYoffset+ExpBarYoffset)end end end function HandleMicroButtons()if NotForbiddenAddonLoaded()then local GlobVal=BD32CharacterData.barFrame.scale local showBarBottomLeft,showBarBottomRight=GetActionBarToggles()local hookButtonsAtFrame=bar1Frame if showBarBottomRight then hookButtonsAtFrame=bar3Frame elseif showBarBottomLeft and not showBarBottomRight then hookButtonsAtFrame=bar2Frame elseif not showBarBottomLeft and not showBarBottomRight then hookButtonsAtFrame=bar1Frame end CharacterMicroButton:ClearAllPoints()SpellbookMicroButton:ClearAllPoints()TalentMicroButton:ClearAllPoints()AchievementMicroButton:ClearAllPoints()QuestLogMicroButton:ClearAllPoints()GuildMicroButton:ClearAllPoints()LFDMicroButton:ClearAllPoints()CollectionsMicroButton:ClearAllPoints()EJMicroButton:ClearAllPoints()StoreMicroButton:ClearAllPoints()MainMenuMicroButton:ClearAllPoints()MainMenuBarBackpackButton:ClearAllPoints()CharacterBag0Slot:ClearAllPoints()CharacterBag1Slot:ClearAllPoints()CharacterBag2Slot:ClearAllPoints()CharacterBag3Slot:ClearAllPoints()CharacterMicroButton:SetScale(GlobVal*56)SpellbookMicroButton:SetScale(GlobVal*56)TalentMicroButton:SetScale(GlobVal*56)AchievementMicroButton:SetScale(GlobVal*56)QuestLogMicroButton:SetScale(GlobVal*56)GuildMicroButton:SetScale(GlobVal*56)LFDMicroButton:SetScale(GlobVal*56)CollectionsMicroButton:SetScale(GlobVal*56)EJMicroButton:SetScale(GlobVal*56)StoreMicroButton:SetScale(GlobVal*56)MainMenuMicroButton:SetScale(GlobVal*56)MainMenuBarBackpackButton:SetScale(GlobVal*56)CharacterBag0Slot:SetScale(GlobVal*56)CharacterBag1Slot:SetScale(GlobVal*56)CharacterBag2Slot:SetScale(GlobVal*56)CharacterBag3Slot:SetScale(GlobVal*56)CharacterMicroButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-125,3)SpellbookMicroButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-100,3)TalentMicroButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-75,3)AchievementMicroButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-50,3)QuestLogMicroButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",-25,3)GuildMicroButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",0,3)LFDMicroButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",25,3)CollectionsMicroButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",50,3)EJMicroButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",75,3)StoreMicroButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",100,3)MainMenuMicroButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",125,3)MainMenuBarBackpackButton:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",300,7)CharacterBag0Slot:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",269,7)CharacterBag1Slot:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",238,7)CharacterBag2Slot:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",207,7)CharacterBag3Slot:SetPoint("\66\79\84\84\79\77",hookButtonsAtFrame,"\66\79\84\84\79\77",176,7)end end function BD32MonitorPowers(frame)local BD32localizedDisplayName,BD32className,BD32classNumber=UnitClass("\112\108\97\121\101\114")if BD32className=="\87\65\82\76\79\67\75" then local numShards=UnitPower("\112\108\97\121\101\114",7)local MaxNumShards=UnitPowerMax("\112\108\97\121\101\114",7)if BD32CharacterData.miniOrb.swapOrb then local ManaPower=UnitPower("\112\108\97\121\101\114",0)local MaxManaPower=UnitPowerMax("\112\108\97\121\101\114",0)MiniOrbUpdate(miniOrb,true,MaxManaPower,ManaPower)manaOrb:SetScript("\79\110\85\112\100\97\116\101",nil)monitorPower(BD32_ManaOrb,true,MaxNumShards,numShards)if previousPowerValue>numShards then previousPowerValue=numShards end elseif BD32CharacterData.miniOrb.swapOrb==false then MiniOrbUpdate(miniOrb,true,MaxNumShards,numShards)manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)if previousMiniOrbPower>numShards then previousMiniOrbPower=numShards end end elseif BD32className=="\80\65\76\65\68\73\78" then Spec=GetSpecializationInfo(GetSpecialization())if Spec==70 then if BD32CharacterData.miniOrb.enabled and not InCombatLockdown()then miniOrb:Show()end local numHolyPower=UnitPower("\112\108\97\121\101\114",9)local MaxNumHolyPower=UnitPowerMax("\112\108\97\121\101\114",9)if BD32CharacterData.miniOrb.swapOrb then local ManaPower=UnitPower("\112\108\97\121\101\114",0)local MaxManaPower=UnitPowerMax("\112\108\97\121\101\114",SPELL_POWER_MANA)MiniOrbUpdate(miniOrb,true,MaxManaPower,ManaPower)manaOrb:SetScript("\79\110\85\112\100\97\116\101",nil)monitorPower(BD32_ManaOrb,true,MaxNumHolyPower,numHolyPower)if previousPowerValue>numHolyPower then previousPowerValue=numHolyPower end elseif BD32CharacterData.miniOrb.swapOrb==false then MiniOrbUpdate(miniOrb,true,MaxNumHolyPower,numHolyPower)manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)if previousMiniOrbPower>numHolyPower then previousMiniOrbPower=numHolyPower end end else if not InCombatLockdown()then miniOrb:Hide()end end elseif BD32className=="\77\79\78\75" then local Spec=GetSpecializationInfo(GetSpecialization())local numMonkPower=UnitPower("\112\108\97\121\101\114",12)local MaxNumMonkPower=UnitPowerMax("\112\108\97\121\101\114",12)if Spec==269 then if BD32CharacterData.miniOrb.swapOrb then local EnergyPower=UnitPower("\112\108\97\121\101\114",SPELL_POWER_ENERGY)local MaxEnergyPower=UnitPowerMax("\112\108\97\121\101\114",SPELL_POWER_ENERGY)MiniOrbUpdate(miniOrb,true,MaxEnergyPower,EnergyPower)manaOrb:SetScript("\79\110\85\112\100\97\116\101",nil)monitorPower(BD32_ManaOrb,true,MaxNumMonkPower,numMonkPower)if previousPowerValue>numMonkPower then previousPowerValue=numMonkPower end elseif BD32CharacterData.miniOrb.swapOrb==false then MiniOrbUpdate(miniOrb,true,5,numMonkPower)manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)if previousMiniOrbPower>numMonkPower then previousMiniOrbPower=numMonkPower end end elseif Spec==268 then local MaxPlayerHealth=UnitHealthMax("\112\108\97\121\101\114")local PlayerStagger=UnitStagger("\112\108\97\121\101\114")if BD32CharacterData.miniOrb.swapOrb then local EnergyPower=UnitPower("\112\108\97\121\101\114",SPELL_POWER_ENERGY)local MaxEnergyPower=UnitPowerMax("\112\108\97\121\101\114",SPELL_POWER_ENERGY)MiniOrbUpdate(miniOrb,true,MaxEnergyPower,EnergyPower)manaOrb:SetScript("\79\110\85\112\100\97\116\101",nil)monitorPower(BD32_ManaOrb,true,MaxPlayerHealth,PlayerStagger)if previousPowerValue>numMonkPower then previousPowerValue=numMonkPower end elseif BD32CharacterData.miniOrb.swapOrb==false then MiniOrbUpdate(miniOrb,true,MaxPlayerHealth,PlayerStagger)manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)if previousMiniOrbPower>PlayerStagger then previousMiniOrbPower=PlayerStagger end end else manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)end elseif BD32className=="\80\82\73\69\83\84" then local shadowOrbs=UnitPower("\112\108\97\121\101\114",13)local MaxShadowOrbs=UnitPowerMax("\112\108\97\121\101\114",13)local SecondPower,FirstPower=UnitPowerType("\112\108\97\121\101\114")if SecondPower>0 then if BD32CharacterData.miniOrb.enabled and not InCombatLockdown()then miniOrb:Show()end if BD32CharacterData.miniOrb.swapOrb then local ManaPower=UnitPower("\112\108\97\121\101\114",0)local MaxManaPower=UnitPowerMax("\112\108\97\121\101\114",0)MiniOrbUpdate(miniOrb,true,MaxShadowOrbs,shadowOrbs)manaOrb:SetScript("\79\110\85\112\100\97\116\101",nil)monitorPower(BD32_ManaOrb,true,MaxManaPower,ManaPower)if previousPowerValue>ManaPower then previousPowerValue=ManaPower end elseif BD32CharacterData.miniOrb.swapOrb==false then MiniOrbUpdate(miniOrb,true,MaxShadowOrbs,shadowOrbs)manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)if previousPowerValue>shadowOrbs then previousPowerValue=shadowOrbs end end else if not InCombatLockdown()then miniOrb:Hide()end end elseif BD32className=="\82\79\71\85\69" then local comboPoints=UnitPower("\112\108\97\121\101\114",4)local maxComboPoints=UnitPowerMax("\112\108\97\121\101\114",4)local maxSpellPowerEnergy=UnitPowerMax("\112\108\97\121\101\114",SPELL_POWER_ENERGY)local SpellPowerEnergy=UnitPower("\112\108\97\121\101\114",SPELL_POWER_ENERGY)if BD32CharacterData.miniOrb.swapOrb then MiniOrbUpdate(miniOrb,true,maxSpellPowerEnergy,SpellPowerEnergy)manaOrb:SetScript("\79\110\85\112\100\97\116\101",nil)monitorPower(BD32_ManaOrb,true,maxComboPoints,comboPoints)if previousPowerValue>maxComboPoints then previousPowerValue=0 end else MiniOrbUpdate(miniOrb,true,maxComboPoints,comboPoints)manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)if previousPowerValue==0 then previousPowerValue=SpellPowerEnergy end if previousMiniOrbPower>maxComboPoints then previousMiniOrbPower=comboPoints end end elseif BD32className=="\68\82\85\73\68" then local Spec=GetSpecializationInfo(GetSpecialization())local form=GetShapeshiftFormID()local SecondPower,FirstPower=UnitPowerType("\112\108\97\121\101\114")if form==CAT_FORM then local comboPoints=UnitPower("\112\108\97\121\101\114",4)local MaxComboPoints=UnitPowerMax("\112\108\97\121\101\114",4)local MaxEnergyPower=UnitPowerMax("\112\108\97\121\101\114",SPELL_POWER_ENERGY)local EnergyPower=UnitPower("\112\108\97\121\101\114",SPELL_POWER_ENERGY)if BD32CharacterData.miniOrb.swapOrb then MiniOrbUpdate(miniOrb,true,MaxEnergyPower,EnergyPower)manaOrb:SetScript("\79\110\85\112\100\97\116\101",nil)monitorPower(BD32_ManaOrb,true,MaxComboPoints,comboPoints)if previousPowerValue>MaxComboPoints then previousPowerValue=0 end else MiniOrbUpdate(miniOrb,true,MaxComboPoints,comboPoints)manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)if previousMiniOrbPower>MaxComboPoints then previousMiniOrbPower=comboPoints end if previousPowerValue>MaxEnergyPower then previousPowerValue=EnergyPower end end elseif form==BEAR_FORM or form==27 then manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)elseif Spec==102 then local EclipsePower=UnitPower("\112\108\97\121\101\114",8)if BD32CharacterData.miniOrb.swapOrb or SecondPower==0 then local MaxEclipsePower=UnitPowerMax("\112\108\97\121\101\114",8)local ManaPower=UnitPower("\112\108\97\121\101\114",0)local MaxManaPower=UnitPowerMax("\112\108\97\121\101\114",0)MiniOrbUpdate(miniOrb,true,MaxEclipsePower,EclipsePower)manaOrb:SetScript("\79\110\85\112\100\97\116\101",nil)monitorPower(BD32_ManaOrb,true,MaxManaPower,ManaPower)if previousPowerValue>ManaPower then previousPowerValue=ManaPower end elseif BD32CharacterData.miniOrb.swapOrb==false then MiniOrbUpdate(miniOrb,false)manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)if previousPowerValue>EclipsePower then previousPowerValue=EclipsePower end end elseif form==nil then manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)end elseif BD32className=="\77\65\71\69" then local Spec=GetSpecializationInfo(GetSpecialization())if Spec==62 then if BD32CharacterData.miniOrb.enabled and not InCombatLockdown()then miniOrb:Show()end local numArcaneCharges=UnitPower("\112\108\97\121\101\114",16)local MaxNumAcraneCharges=UnitPowerMax("\112\108\97\121\101\114",16)if BD32CharacterData.miniOrb.swapOrb then local MaxManaPower=UnitPowerMax("\112\108\97\121\101\114",0)local ManaPower=UnitPower("\112\108\97\121\101\114",0)MiniOrbUpdate(miniOrb,true,MaxManaPower,ManaPower)manaOrb:SetScript("\79\110\85\112\100\97\116\101",nil)monitorPower(BD32_ManaOrb,true,MaxNumAcraneCharges,numArcaneCharges)if previousPowerValue>numArcaneCharges then previousPowerValue=numArcaneCharges end elseif BD32CharacterData.miniOrb.swapOrb==false then MiniOrbUpdate(miniOrb,true,MaxNumAcraneCharges,numArcaneCharges)manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)if previousMiniOrbPower>numArcaneCharges then previousMiniOrbPower=numArcaneCharges end end else if not InCombatLockdown()then miniOrb:Hide()end end elseif BD32className=="\83\72\65\77\65\78" then Spec=GetSpecializationInfo(GetSpecialization())local form=GetShapeshiftFormID()local numMaelstrom=UnitPower("\112\108\97\121\101\114",SPELL_POWER_MAELSTROM)if Spec==262 or Spec==263 then if BD32CharacterData.miniOrb.swapOrb or form==16 then local MaxNumMaelstrom=UnitPowerMax("\112\108\97\121\101\114",SPELL_POWER_MAELSTROM)local MaxManaPower=UnitPowerMax("\112\108\97\121\101\114",0)local ManaPower=UnitPower("\112\108\97\121\101\114",0)MiniOrbUpdate(miniOrb,true,MaxNumMaelstrom,numMaelstrom)manaOrb:SetScript("\79\110\85\112\100\97\116\101",nil)monitorPower(BD32_ManaOrb,true,MaxManaPower,ManaPower)if previousPowerValue>ManaPower then previousPowerValue=ManaPower end if previousMiniOrbPower>numMaelstrom then previousMiniOrbPower=numMaelstrom end elseif BD32CharacterData.miniOrb.swapOrb==false then MiniOrbUpdate(miniOrb,false)manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)if not previousPowerValue then previousPowerValue=1 end if previousPowerValue>numMaelstrom then previousPowerValue=numMaelstrom end end else manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)end elseif BD32className=="\68\69\65\84\72\75\78\73\71\72\84" then local activeRune=0 local RunicPower=UnitPower("\112\108\97\121\101\114",SPELL_POWER_RUNIC_POWER)if GetRuneCooldown(1)then for i=1,6 do if select(1,GetRuneCooldown(i))+select(2,GetRuneCooldown(i))-GetTime()<1 then activeRune=activeRune+1 end end end if BD32CharacterData.miniOrb.swapOrb then local MaxRunicPower=UnitPowerMax("\112\108\97\121\101\114",SPELL_POWER_RUNIC_POWER)MiniOrbUpdate(miniOrb,true,MaxRunicPower,RunicPower)manaOrb:SetScript("\79\110\85\112\100\97\116\101",nil)monitorPower(BD32_ManaOrb,true,6,activeRune)if previousPowerValue>6 then previousPowerValue=activeRune end if previousMiniOrbPower>RunicPower then previousMiniOrbPower=RunicPower end elseif BD32CharacterData.miniOrb.swapOrb==false then MiniOrbUpdate(miniOrb,true,6,activeRune)manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)if not previousPowerValue then previousPowerValue=1 end if previousPowerValue>RunicPower then previousPowerValue=RunicPower end if previousMiniOrbPower==0 then previousMiniOrbPower=RunicPower end end end end function checkComboFontPlacement()if BD32CharacterData.miniOrb.showValue and BD32CharacterData.miniOrb.showPercentage then miniOrb.font1:SetFont(BD32CharacterData.font,23*miniOrb:GetScale(),"\84\72\73\78\79\85\84\76\73\78\69")miniOrb.font1:SetPoint("\67\69\78\84\69\82",0,8)miniOrb.font2:SetFont(BD32CharacterData.font,15*miniOrb:GetScale(),"\84\72\73\78\79\85\84\76\73\78\69")miniOrb.font2:SetPoint("\67\69\78\84\69\82",0,-8)elseif BD32CharacterData.miniOrb.showValue and not BD32CharacterData.miniOrb.showPercentage then miniOrb.font2:SetFont(BD32CharacterData.font,23*miniOrb:GetScale(),"\84\72\73\78\79\85\84\76\73\78\69")miniOrb.font2:SetPoint("\67\69\78\84\69\82",0,0)elseif not BD32CharacterData.miniOrb.showValue and BD32CharacterData.miniOrb.showPercentage then miniOrb.font1:SetPoint("\67\69\78\84\69\82",0,0)miniOrb.font1:SetFont(BD32CharacterData.font,23*miniOrb:GetScale(),"\84\72\73\78\79\85\84\76\73\78\69")end end function checkTargetFontPlacement()if BD32CharacterData.targetOrb.showValue and BD32CharacterData.targetOrb.showPercentage then targetOrb.font1:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")targetOrb.font2:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")targetOrb.font3:SetFont(BD32CharacterData.font,9,"\84\72\73\78\79\85\84\76\73\78\69")targetOrb.font4:SetFont(BD32CharacterData.font,9,"\84\72\73\78\79\85\84\76\73\78\69")targetOrb.font1:SetAlpha(1)targetOrb.font2:SetAlpha(1)targetOrb.font3:SetAlpha(1)targetOrb.font4:SetAlpha(1)targetOrb.font1:SetPoint("\67\69\78\84\69\82",-20,5)targetOrb.font2:SetPoint("\67\69\78\84\69\82",20,5)targetOrb.font3:SetPoint("\67\69\78\84\69\82",-19,-8)targetOrb.font4:SetPoint("\67\69\78\84\69\82",19,-8)elseif BD32CharacterData.targetOrb.showValue and not BD32CharacterData.targetOrb.showPercentage then targetOrb.font1:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")targetOrb.font2:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")targetOrb.font3:SetFont(BD32CharacterData.font,11,"\84\72\73\78\79\85\84\76\73\78\69")targetOrb.font4:SetFont(BD32CharacterData.font,11,"\84\72\73\78\79\85\84\76\73\78\69")targetOrb.font1:SetAlpha(0)targetOrb.font2:SetAlpha(0)targetOrb.font3:SetAlpha(1)targetOrb.font4:SetAlpha(1)targetOrb.font3:SetPoint("\67\69\78\84\69\82",-20,0)targetOrb.font4:SetPoint("\67\69\78\84\69\82",20,0)elseif not BD32CharacterData.targetOrb.showValue and BD32CharacterData.targetOrb.showPercentage then targetOrb.font1:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")targetOrb.font2:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")targetOrb.font3:SetFont(BD32CharacterData.font,11,"\84\72\73\78\79\85\84\76\73\78\69")targetOrb.font4:SetFont(BD32CharacterData.font,11,"\84\72\73\78\79\85\84\76\73\78\69")targetOrb.font1:SetAlpha(1)targetOrb.font2:SetAlpha(1)targetOrb.font3:SetAlpha(0)targetOrb.font4:SetAlpha(0)targetOrb.font1:SetPoint("\67\69\78\84\69\82",-20,0)targetOrb.font2:SetPoint("\67\69\78\84\69\82",20,0)end end function checkPetFontPlacement()if BD32CharacterData.petOrb.showValue and BD32CharacterData.petOrb.showPercentage then petOrb.font1:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")petOrb.font2:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")petOrb.font3:SetFont(BD32CharacterData.font,9,"\84\72\73\78\79\85\84\76\73\78\69")petOrb.font4:SetFont(BD32CharacterData.font,9,"\84\72\73\78\79\85\84\76\73\78\69")petOrb.font1:SetAlpha(1)petOrb.font2:SetAlpha(1)petOrb.font3:SetAlpha(1)petOrb.font4:SetAlpha(1)petOrb.font1:SetPoint("\67\69\78\84\69\82",-20,5)petOrb.font2:SetPoint("\67\69\78\84\69\82",20,5)petOrb.font3:SetPoint("\67\69\78\84\69\82",-20,-8)petOrb.font4:SetPoint("\67\69\78\84\69\82",20,-8)elseif BD32CharacterData.petOrb.showValue and not BD32CharacterData.petOrb.showPercentage then petOrb.font1:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")petOrb.font2:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")petOrb.font3:SetFont(BD32CharacterData.font,11,"\84\72\73\78\79\85\84\76\73\78\69")petOrb.font4:SetFont(BD32CharacterData.font,11,"\84\72\73\78\79\85\84\76\73\78\69")petOrb.font1:SetAlpha(0)petOrb.font2:SetAlpha(0)petOrb.font3:SetAlpha(1)petOrb.font4:SetAlpha(1)petOrb.font3:SetPoint("\67\69\78\84\69\82",-20,0)petOrb.font4:SetPoint("\67\69\78\84\69\82",20,0)elseif not BD32CharacterData.petOrb.showValue and BD32CharacterData.petOrb.showPercentage then petOrb.font1:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")petOrb.font2:SetFont(BD32CharacterData.font,14,"\84\72\73\78\79\85\84\76\73\78\69")petOrb.font3:SetFont(BD32CharacterData.font,11,"\84\72\73\78\79\85\84\76\73\78\69")petOrb.font4:SetFont(BD32CharacterData.font,11,"\84\72\73\78\79\85\84\76\73\78\69")petOrb.font1:SetAlpha(1)petOrb.font2:SetAlpha(1)petOrb.font3:SetAlpha(0)petOrb.font4:SetAlpha(0)petOrb.font1:SetPoint("\67\69\78\84\69\82",-20,0)petOrb.font2:SetPoint("\67\69\78\84\69\82",20,0)end end function setOrbFontPlacement(orb,orbData)orb.font1:Show()orb.font2:Show()if orbData.font1.show and orbData.font2.show then orb.font1:SetFont(BD32CharacterData.font,28,"\84\72\73\78\79\85\84\76\73\78\69")orb.font2:SetFont(BD32CharacterData.font,16,"\84\72\73\78\79\85\84\76\73\78\69")orb.font1:SetPoint("\67\69\78\84\69\82",0,10)orb.font2:SetPoint("\67\69\78\84\69\82",1,-10)elseif orbData.font1.show and not orbData.font2.show then orb.font1:SetFont(BD32CharacterData.font,28,"\84\72\73\78\79\85\84\76\73\78\69")orb.font1:SetPoint("\67\69\78\84\69\82",0,2)orb.font2:Hide()elseif orbData.font2.show and not orbData.font1.show then orb.font2:SetFont(BD32CharacterData.font,28,"\84\72\73\78\79\85\84\76\73\78\69")orb.font2:SetPoint("\67\69\78\84\69\82",0,2)orb.font1:Hide()else orb.font1:Hide()orb.font2:Hide()end end function checkXMLOrbFontPlacement()fontiName,fontHeight,fontFlags=xmlOrbDisplayFrame2.orb.font1:GetFont()BD32CharacterData.font=fontiName xmlOrbDisplayFrame2.orb.font1:SetDrawLayer("\79\86\69\82\76\65\89",7)xmlOrbDisplayFrame2.orb.font2:SetDrawLayer("\79\86\69\82\76\65\89",7)xmlOrbDisplayFrame2.orb.font1:Show()xmlOrbDisplayFrame2.orb.font2:Show()if BD32OrbPercentageCheckBox:GetChecked()and BD32OrbValueCheckBox:GetChecked()then xmlOrbDisplayFrame2.orb.font1:SetFont(BD32CharacterData.font,35,"\84\72\73\78\79\85\84\76\73\78\69")xmlOrbDisplayFrame2.orb.font2:SetFont(BD32CharacterData.font,20,"\84\72\73\78\79\85\84\76\73\78\69")xmlOrbDisplayFrame2.orb.font1:SetPoint("\67\69\78\84\69\82",0,12)xmlOrbDisplayFrame2.orb.font2:SetPoint("\67\69\78\84\69\82",0,-12)elseif BD32OrbPercentageCheckBox:GetChecked()and not BD32OrbValueCheckBox:GetChecked()then xmlOrbDisplayFrame2.orb.font1:SetFont(BD32CharacterData.font,40,"\84\72\73\78\79\85\84\76\73\78\69")xmlOrbDisplayFrame2.orb.font1:SetPoint("\67\69\78\84\69\82",0,0)xmlOrbDisplayFrame2.orb.font2:Hide()elseif BD32OrbValueCheckBox:GetChecked()and not BD32OrbPercentageCheckBox:GetChecked()then xmlOrbDisplayFrame2.orb.font2:SetFont(BD32CharacterData.font,40,"\84\72\73\78\79\85\84\76\73\78\69")xmlOrbDisplayFrame2.orb.font2:SetPoint("\67\69\78\84\69\82",0,0)xmlOrbDisplayFrame2.orb.font1:Hide()else xmlOrbDisplayFrame2.orb.font1:Hide()xmlOrbDisplayFrame2.orb.font2:Hide()end end function resetXMLTextBoxes()BD32OrbPercentageCheckBox:SetChecked(CommitButton.orbData.font1.show)BD32OrbValueCheckBox:SetChecked(CommitButton.orbData.font2.show)BD32OrbAbsorbCheckBox:SetChecked(BD32CharacterData.healthOrb.showAbsorb)end local function checkDefaultsFromMemory()if not BD32CharacterData.healthOrb then BD32CharacterData.healthOrb=defaultsTable.healthOrb end if not BD32CharacterData.healthOrb.textures then BD32CharacterData.healthOrb.textures=defaultTextures.healthOrb end if BD32CharacterData.healthOrb.font1.show==nil then BD32CharacterData.healthOrb.font1.show=defaultsTable.healthOrb.font1.show end if BD32CharacterData.healthOrb.font2.show==nil then BD32CharacterData.healthOrb.font2.show=defaultsTable.healthOrb.font2.show end if BD32CharacterData.healthOrb.showAbsorb==nil then BD32CharacterData.healthOrb.showAbsorb=defaultsTable.healthOrb.showAbsorb end if not BD32CharacterData.manaOrb then BD32CharacterData.manaOrb=defaultsTable.manaOrb end if not BD32CharacterData.manaOrb.textures then BD32CharacterData.manaOrb.textures=defaultTextures.manaOrb end if BD32CharacterData.manaOrb.font1.show==nil then BD32CharacterData.manaOrb.font1.show=defaultsTable.manaOrb.font1.show end if BD32CharacterData.manaOrb.font2.show==nil then BD32CharacterData.manaOrb.font2.show=defaultsTable.manaOrb.font2.show end if not BD32CharacterData.druidColors then BD32CharacterData.druidColors=defaultsTable.druidColors end if not BD32CharacterData.combat then BD32CharacterData.combat=defaultsTable.combat end if not BD32CharacterData.combat.galaxy then BD32CharacterData.combat.galaxy=defaultsTable.combat.galaxy end if not BD32CharacterData.values then BD32CharacterData.values=defaultsTable.values end if not BD32CharacterData.artwork then BD32CharacterData.artwork=defaultsTable.artwork end if not BD32CharacterData.font then BD32CharacterData.font=defaultsTable.font end if not BD32CharacterData.petOrb then BD32CharacterData.petOrb=defaultsTable.petOrb end if not BD32CharacterData.petOrb.scale then BD32CharacterData.petOrb.scale=defaultsTable.petOrb.scale end if not BD32CharacterData.targetOrb then BD32CharacterData.targetOrb=defaultsTable.targetOrb end if not BD32CharacterData.miniOrb then BD32CharacterData.miniOrb=defaultsTable.miniOrb end if not BD32CharacterData.miniOrb.scale then BD32CharacterData.miniOrb.scale=defaultsTable.miniOrb.scale end if not BD32CharacterData.defaultPlayerFrame then BD32CharacterData.defaultPlayerFrame=defaultsTable.defaultPlayerFrame end if not BD32CharacterData.smoothing then BD32CharacterData.smoothing=defaultsTable.defaultSmoothing end if not BD32CharacterData.barFrame then BD32CharacterData.barFrame=defaultsTable.barFrame end if not BD32CharacterData.BD32minimapIcon then BD32CharacterData.BD32minimapIcon=defaultsTable.BD32minimapIcon end if not BD32CharacterData.BD32Orbs then BD32CharacterData.BD32Orbs=defaultsTable.BD32Orbs end if not BD32CharacterData.BD32Orbs.scale then BD32CharacterData.BD32Orbs.scale=defaultsTable.BD32Orbs.scale end if not BD32CharacterData.multiBar then BD32CharacterData.multiBar=defaultsTable.multiBar end UseBarImageCheckButton:SetChecked(BD32CharacterData.barFrame.show)AnimateOrbValuesCheckButton:SetChecked(BD32CharacterData.smoothing)TruncatedValuesCheckButton:SetChecked(BD32CharacterData.values.formatted)ShowArtworkCheckButton:SetChecked(BD32CharacterData.artwork.show)UsePetOrbCheckButton:SetChecked(BD32CharacterData.petOrb.enabled)TrackCombatCheckButton:SetChecked(BD32CharacterData.combat.enabled)ShowPetOrbPercentagesCheckButton:SetChecked(BD32CharacterData.petOrb.showPercentage)ShowPetOrbValuesCheckButton:SetChecked(BD32CharacterData.petOrb.showValue)UsePowerTrackerCheckButton:SetChecked(BD32CharacterData.miniOrb.enabled)ShowComboValuesCheckButton:SetChecked(BD32CharacterData.miniOrb.showValue)ShowComboPercentCheckButton:SetChecked(BD32CharacterData.miniOrb.showPercentage)SwapComboValuesCheckButton:SetChecked(BD32CharacterData.miniOrb.swapOrb)ShowBlizzPlayerFrameCheckButton:SetChecked(BD32CharacterData.defaultPlayerFrame.show)LockBDWindowsCheckButton:SetChecked(BD32CharacterData.barFrame.locked)showBDTargetOrbValue:SetChecked(BD32CharacterData.targetOrb.showValue)showBDTargetOrbPercentage:SetChecked(BD32CharacterData.targetOrb.showPercentage)ShowOrbEliteFrame:SetChecked(BD32CharacterData.targetOrb.eliteFrame)ShowBDTargetOrb:SetChecked(BD32CharacterData.targetOrb.enabled)ShowTargetFrame:SetChecked(BD32CharacterData.targetOrb.showBlizzTargetFrame)BD32OrbAbsorbCheckBox:SetChecked(BD32CharacterData.healthOrb.showAbsorb)checkPetFontPlacement()if miniOrb then if not BD32CharacterData.miniOrb.showValue then miniOrb.font2:Hide()end if not BD32CharacterData.miniOrb.showPercentage then miniOrb.font1:Hide()end checkComboFontPlacement()end if not BD32CharacterData.targetOrb.showValue then targetOrb.font3:Hide()targetOrb.font4:Hide()end if not BD32CharacterData.targetOrb.showPercentage then targetOrb.font1:Hide()targetOrb.font2:Hide()end checkTargetFontPlacement()if not BD32CharacterData.petOrb.enabled then UnregisterUnitWatch(petOrb)if not InCombatLockdown()then petOrb:Hide()end end if not BD32CharacterData.miniOrb.enabled and miniOrb and not InCombatLockdown()then miniOrb:Hide()elseif BD32CharacterData.miniOrb.enabled and miniOrb and not InCombatLockdown()then miniOrb:Show()end if not BD32CharacterData.artwork.show and not InCombatLockdown()then angelFrame:Hide()demonFrame:Hide()end if not BD32CharacterData.barFrame.show and not InCombatLockdown()then bar1Frame:Hide()bar2Frame:Hide()bar3Frame:Hide()end if not BD32CharacterData.barFrame.show and not InCombatLockdown()or not BD32CharacterData.artwork.show and not InCombatLockdown()then barEndcapLeft:Hide()barEndcapRight:Hide()end if not BD32CharacterData.BD32Orbs.enabled and not InCombatLockdown()then if miniOrb then	miniOrb:Hide()end petOrb:Hide()healthOrb:Hide()manaOrb:Hide()healthOrb:SetScript("\79\110\85\112\100\97\116\101",nil)manaOrb:SetScript("\79\110\85\112\100\97\116\101",nil)end end local function updateColorsFromMemory()local r,g,b,a=BD32CharacterData.healthOrb.orbColor.r,BD32CharacterData.healthOrb.orbColor.g,BD32CharacterData.healthOrb.orbColor.b,BD32CharacterData.healthOrb.orbColor.a healthOrb.filling:SetVertexColor(r,g,b,a)r,g,b,a=BD32CharacterData.healthOrb.galaxy.r,BD32CharacterData.healthOrb.galaxy.g,BD32CharacterData.healthOrb.galaxy.b,BD32CharacterData.healthOrb.galaxy.a healthOrb.galaxy1.texture:SetVertexColor(r,g,b,a)healthOrb.galaxy2.texture:SetVertexColor(r,g,b,a)healthOrb.galaxy3.texture:SetVertexColor(r,g,b,a)r,g,b,a=BD32CharacterData.healthOrb.font1.r,BD32CharacterData.healthOrb.font1.g,BD32CharacterData.healthOrb.font1.b,BD32CharacterData.healthOrb.font1.a healthOrb.font1:SetTextColor(r,g,b,a)r,g,b,a=BD32CharacterData.healthOrb.font2.r,BD32CharacterData.healthOrb.font2.g,BD32CharacterData.healthOrb.font2.b,BD32CharacterData.healthOrb.font2.a healthOrb.font2:SetTextColor(r,g,b,a)r,g,b,a=BD32CharacterData.manaOrb.orbColor.r,BD32CharacterData.manaOrb.orbColor.g,BD32CharacterData.manaOrb.orbColor.b,BD32CharacterData.manaOrb.orbColor.a manaOrb.filling:SetVertexColor(r,g,b,a)r,g,b,a=BD32CharacterData.manaOrb.galaxy.r,BD32CharacterData.manaOrb.galaxy.g,BD32CharacterData.manaOrb.galaxy.b,BD32CharacterData.manaOrb.galaxy.a manaOrb.galaxy1.texture:SetVertexColor(r,g,b,a)manaOrb.galaxy2.texture:SetVertexColor(r,g,b,a)manaOrb.galaxy3.texture:SetVertexColor(r,g,b,a)r,g,b,a=BD32CharacterData.manaOrb.font1.r,BD32CharacterData.manaOrb.font1.g,BD32CharacterData.manaOrb.font1.b,BD32CharacterData.manaOrb.font1.a manaOrb.font1:SetTextColor(r,g,b,a)r,g,b,a=BD32CharacterData.manaOrb.font2.r,BD32CharacterData.manaOrb.font2.g,BD32CharacterData.manaOrb.font2.b,BD32CharacterData.manaOrb.font2.a manaOrb.font2:SetTextColor(r,g,b,a)petOrb.filling1:SetVertexColor(healthOrb.filling:GetVertexColor())petOrb.filling2:SetVertexColor(manaOrb.filling:GetVertexColor())targetOrb.filling1:SetVertexColor(0,1,0,1)targetOrb.filling2:SetVertexColor(0,0,1,1)petOrb.font1:SetTextColor(healthOrb.font1:GetTextColor())petOrb.font2:SetTextColor(manaOrb.font1:GetTextColor())petOrb.font3:SetTextColor(healthOrb.font2:GetTextColor())petOrb.font4:SetTextColor(manaOrb.font2:GetTextColor())if miniOrb then miniOrb.filling:SetVertexColor(healthOrb.filling:GetVertexColor())end if miniOrb then miniOrb.font1:SetTextColor(manaOrb.font1:GetTextColor())end if miniOrb then miniOrb.font2:SetTextColor(manaOrb.font2:GetTextColor())end if BD32CharacterData.targetOrb.scale==nil then BD32CharacterData.targetOrb.scale=1 end BD32TargetOrbScaleSlider:SetValue((BD32CharacterData.targetOrb.scale)*100)BD32ComboOrbScaleSlider:SetValue((BD32CharacterData.miniOrb.scale)*100)BD32PetOrbScaleSlider:SetValue((BD32CharacterData.petOrb.scale)*100)setOrbFontPlacement(healthOrb,BD32CharacterData.healthOrb)setOrbFontPlacement(manaOrb,BD32CharacterData.manaOrb)end function BD32UpdateOrbColor(orb,orbColor,galaxyColor,font1Color,font2Color)orb.filling:SetVertexColor(orbColor.r,orbColor.g,orbColor.b,orbColor.a)orb.galaxy1.texture:SetVertexColor(galaxyColor.r,galaxyColor.g,galaxyColor.b,galaxyColor.a)orb.galaxy2.texture:SetVertexColor(galaxyColor.r,galaxyColor.g,galaxyColor.b,galaxyColor.a)orb.galaxy3.texture:SetVertexColor(galaxyColor.r,galaxyColor.g,galaxyColor.b,galaxyColor.a)orb.font1:SetTextColor(font1Color.r,font1Color.g,font1Color.b,font1Color.a)orb.font2:SetTextColor(font2Color.r,font2Color.g,font2Color.b,font2Color.a)end local function TryNewColors(restore)local r,g,b=ColorPickerFrame:GetColorRGB()local a=OpacitySliderFrame:GetValue()if restore then r,g,b,a=unpack(restore)end if ColorPickerFrame.elementToChange=="\70\105\108\108\105\110\103" then xmlOrbDisplayFrame2.orb.filling:SetVertexColor(r,g,b,a)elseif ColorPickerFrame.elementToChange=="\83\119\105\114\108" then xmlOrbDisplayFrame2.orb.galaxy1.texture:SetVertexColor(r,g,b,a)xmlOrbDisplayFrame2.orb.galaxy2.texture:SetVertexColor(r,g,b,a)xmlOrbDisplayFrame2.orb.galaxy3.texture:SetVertexColor(r,g,b,a)elseif ColorPickerFrame.elementToChange=="\70\111\110\116\49" then xmlOrbDisplayFrame2.orb.font1:SetTextColor(r,g,b,a)elseif ColorPickerFrame.elementToChange=="\70\111\110\116\50" then xmlOrbDisplayFrame2.orb.font2:SetTextColor(r,g,b,a)end end function TryNewTextures(fillTexture,swirlTexture)xmlOrbDisplayFrame2.orb.filling:SetTexture(fillTexture)if swirlTexture then xmlOrbDisplayFrame2.orb.galaxy1.texture:SetTexture(swirlTexture.."\49\46\116\103\97")xmlOrbDisplayFrame2.orb.galaxy2.texture:SetTexture(swirlTexture.."\50\46\116\103\97")xmlOrbDisplayFrame2.orb.galaxy3.texture:SetTexture(swirlTexture.."\51\46\116\103\97")end end function TryNewFonts(fntNumber)if fntNumber then local _,font1Height=xmlOrbDisplayFrame2.orb.font1:GetFont()local _,font2Height=xmlOrbDisplayFrame2.orb.font2:GetFont()local fontChoiceNumber=(fntNumber-1)local selectedFontType=BD32_fontChoices[fontChoiceNumber]local num=table.getn(BD32_fontChoices)for i=1,100,1 do for i=1,num,1 do local selectedFontType=BD32_fontChoices[0]xmlOrbDisplayFrame2.orb.font1:SetFont(selectedFontType,font1Height,"\84\72\73\78\79\85\84\76\73\78\69")xmlOrbDisplayFrame2.orb.font2:SetFont(selectedFontType,font2Height,"\84\72\73\78\79\85\84\76\73\78\69")local selectedFontType=BD32_fontChoices[i]xmlOrbDisplayFrame2.orb.font1:SetFont(selectedFontType,font1Height,"\84\72\73\78\79\85\84\76\73\78\69")xmlOrbDisplayFrame2.orb.font2:SetFont(selectedFontType,font2Height,"\84\72\73\78\79\85\84\76\73\78\69")local selectedFontType=BD32_fontChoices[1]xmlOrbDisplayFrame2.orb.font1:SetFont(selectedFontType,font1Height,"\84\72\73\78\79\85\84\76\73\78\69")xmlOrbDisplayFrame2.orb.font2:SetFont(selectedFontType,font2Height,"\84\72\73\78\79\85\84\76\73\78\69")local selectedFontType=BD32_fontChoices[i]xmlOrbDisplayFrame2.orb.font1:SetFont(selectedFontType,font1Height,"\84\72\73\78\79\85\84\76\73\78\69")xmlOrbDisplayFrame2.orb.font2:SetFont(selectedFontType,font2Height,"\84\72\73\78\79\85\84\76\73\78\69")local selectedFontType=BD32_fontChoices[2]xmlOrbDisplayFrame2.orb.font1:SetFont(selectedFontType,font1Height,"\84\72\73\78\79\85\84\76\73\78\69")xmlOrbDisplayFrame2.orb.font2:SetFont(selectedFontType,font2Height,"\84\72\73\78\79\85\84\76\73\78\69")end end xmlOrbDisplayFrame2.orb.font1:SetFont(selectedFontType,font1Height,"\84\72\73\78\79\85\84\76\73\78\69")xmlOrbDisplayFrame2.orb.font2:SetFont(selectedFontType,font2Height,"\84\72\73\78\79\85\84\76\73\78\69")end end local function checkShapeShiftInfo()local form=GetShapeshiftFormID()local Spec=GetSpecializationInfo(GetSpecialization())local druidFormTable=BD32CharacterData.manaOrb local changeOcurred=true if form==BEAR_FORM then manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)druidFormTable=BD32CharacterData.druidColors.bear previousPowerValue=UnitPower("\112\108\97\121\101\114",SPELL_POWER_RAGE)elseif form==CAT_FORM then druidFormTable=BD32CharacterData.druidColors.cat if BD32CharacterData.miniOrb.swapOrb and not previousPowerValue then previousPowerValue=UnitPower("\112\108\97\121\101\114",4)elseif not previousPowerValue then previousPowerValue=UnitPower("\112\108\97\121\101\114",SPELL_POWER_ENERGY)end elseif form==27 then manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)druidFormTable=BD32CharacterData.manaOrb previousPowerValue=UnitPower("\112\108\97\121\101\114",SPELL_POWER_MANA)elseif form==3 then manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)druidFormTable=BD32CharacterData.manaOrb previousPowerValue=UnitPower("\112\108\97\121\101\114",SPELL_POWER_MANA)elseif form==4 then manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)druidFormTable=BD32CharacterData.manaOrb previousPowerValue=UnitPower("\112\108\97\121\101\114",SPELL_POWER_MANA)elseif form==2 then manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)druidFormTable=BD32CharacterData.manaOrb previousPowerValue=UnitPower("\112\108\97\121\101\114",SPELL_POWER_MANA)elseif Spec==102 then druidFormTable=BD32CharacterData.druidColors.moonkin previousPowerValue=UnitPower("\112\108\97\121\101\114",SPELL_POWER_ECLIPSE)else if miniOrb and not InCombatLockdown()then miniOrb:Hide()end druidFormTable=BD32CharacterData.manaOrb previousPowerValue=UnitPower("\112\108\97\121\101\114",SPELL_POWER_MANA)end BD32UpdateOrbColor(manaOrb,druidFormTable.orbColor,druidFormTable.galaxy,druidFormTable.font1,druidFormTable.font2)if miniOrb then BD32UpdateOrbColor(miniOrb,druidFormTable.orbColor,druidFormTable.galaxy,druidFormTable.font1,druidFormTable.font2)end maxHealth=UnitHealthMax("\112\108\97\121\101\114")previousHealthValue=UnitHealth("\112\108\97\121\101\114")end local function UpdateOrbTextures()healthOrb.filling:SetTexture(images..BD32CharacterData.healthOrb.textures.fill)healthOrb.galaxy1.texture:SetTexture(images..BD32CharacterData.healthOrb.textures.rotation.."\49\46\116\103\97")healthOrb.galaxy2.texture:SetTexture(images..BD32CharacterData.healthOrb.textures.rotation.."\50\46\116\103\97")healthOrb.galaxy3.texture:SetTexture(images..BD32CharacterData.healthOrb.textures.rotation.."\51\46\116\103\97")manaOrb.filling:SetTexture(images..BD32CharacterData.manaOrb.textures.fill)manaOrb.galaxy1.texture:SetTexture(images..BD32CharacterData.manaOrb.textures.rotation.."\49\46\116\103\97")manaOrb.galaxy2.texture:SetTexture(images..BD32CharacterData.manaOrb.textures.rotation.."\50\46\116\103\97")manaOrb.galaxy3.texture:SetTexture(images..BD32CharacterData.manaOrb.textures.rotation.."\51\46\116\103\97")if miniOrb then miniOrb.filling:SetTexture(images..BD32CharacterData.manaOrb.textures.fill)miniOrb.galaxy1.texture:SetTexture(images..BD32CharacterData.manaOrb.textures.rotation.."\49\46\116\103\97")miniOrb.galaxy2.texture:SetTexture(images..BD32CharacterData.manaOrb.textures.rotation.."\50\46\116\103\97")miniOrb.galaxy3.texture:SetTexture(images..BD32CharacterData.manaOrb.textures.rotation.."\51\46\116\103\97")end end function BD32ApplyChanges()fontiName,fontHeight,fontFlags=xmlOrbDisplayFrame2.orb.font1:GetFont()BD32CharacterData.font=fontiName local activeElement=CommitButton.activeElement local r,g,b,a=xmlOrbDisplayFrame2.orb.filling:GetVertexColor()local fillColors={r=0,g=0,b=0,a=0}fillColors.r,fillColors.g,fillColors.b,fillColors.a=r,g,b,a activeElement.orbColor.r,activeElement.orbColor.g,activeElement.orbColor.b,activeElement.orbColor.a=r,g,b,a local galaxyColors={r=0,g=0,b=0,a=0}r,g,b,a=xmlOrbDisplayFrame2.orb.galaxy1.texture:GetVertexColor()galaxyColors.r,galaxyColors.g,galaxyColors.b,galaxyColors.a=r,g,b,a activeElement.galaxy.r,activeElement.galaxy.g,activeElement.galaxy.b,activeElement.galaxy.a=r,g,b,a local font1Color={r=0,g=0,b=0,a=0}r,g,b,a=xmlOrbDisplayFrame2.orb.font1:GetTextColor()font1Color.r,font1Color.g,font1Color.b,font1Color.a=r,g,b,a activeElement.font1.r,activeElement.font1.g,activeElement.font1.b,activeElement.font1.a=r,g,b,a local font2Color={r=0,g=0,b=0,a=0}r,g,b,a=xmlOrbDisplayFrame2.orb.font2:GetTextColor()font2Color.r,font2Color.g,font2Color.b,font2Color.a=r,g,b,a activeElement.font2.r,activeElement.font2.g,activeElement.font2.b,activeElement.font2.a=r,g,b,a BD32UpdateOrbColor(healthOrb,BD32CharacterData.healthOrb.orbColor,BD32CharacterData.healthOrb.galaxy,BD32CharacterData.healthOrb.font1,BD32CharacterData.healthOrb.font2)local hPrefix=strmatch(xmlOrbDisplayFrame2.orb.filling:GetTexture(),"\40\77\68\79\95\111\114\98\95\102\105\108\108\105\110\103\37\100\43\41")CommitButton.textureElement.fill=hPrefix local mPrefix,mNum=strmatch(xmlOrbDisplayFrame2.orb.galaxy1.texture:GetTexture(),"\40\111\114\98\95\114\111\116\97\116\105\111\110\95\37\97\43\41\40\37\100\41")CommitButton.textureElement.rotation=mPrefix UpdateOrbTextures()if BD32OrbPercentageCheckBox:GetChecked()then CommitButton.orbData.font1.show=true else CommitButton.orbData.font1.show=false end if BD32OrbValueCheckBox:GetChecked()then CommitButton.orbData.font2.show=true else CommitButton.orbData.font2.show=false end local BD32localizedDisplayName,BD32className,BD32classNumber=UnitClass("\112\108\97\121\101\114")if BD32className=="\68\82\85\73\68" then checkShapeShiftInfo()previousPowerValue=UnitPower("\112\108\97\121\101\114")else BD32UpdateOrbColor(manaOrb,BD32CharacterData.manaOrb.orbColor,BD32CharacterData.manaOrb.galaxy,BD32CharacterData.manaOrb.font1,BD32CharacterData.manaOrb.font2)if miniOrb then miniOrb.filling:SetVertexColor(manaOrb.filling:GetVertexColor())miniOrb.font1:SetTextColor(manaOrb.font1:GetTextColor())miniOrb.font2:SetTextColor(manaOrb.font2:GetTextColor())BD32UpdateOrbColor(miniOrb,BD32CharacterData.manaOrb.orbColor,BD32CharacterData.manaOrb.galaxy,BD32CharacterData.manaOrb.font1,BD32CharacterData.manaOrb.font2)end end petOrb.filling1:SetVertexColor(healthOrb.filling:GetVertexColor())petOrb.filling2:SetVertexColor(manaOrb.filling:GetVertexColor())targetOrb.filling1:SetVertexColor(0,1,0,1)targetOrb.filling2:SetVertexColor(0,0,1,1)petOrb.font1:SetTextColor(healthOrb.font1:GetTextColor())petOrb.font2:SetTextColor(manaOrb.font1:GetTextColor())petOrb.font3:SetTextColor(healthOrb.font2:GetTextColor())petOrb.font4:SetTextColor(manaOrb.font2:GetTextColor())setOrbFontPlacement(healthOrb,BD32CharacterData.healthOrb)setOrbFontPlacement(manaOrb,BD32CharacterData.manaOrb)if petOrb then checkPetFontPlacement()end if miniOrb then checkComboFontPlacement()end checkTargetFontPlacement()if BD32OrbAbsorbCheckBox:GetChecked()then local absorb=UnitGetTotalAbsorbs("\112\108\97\121\101\114")or 0 if absorb>1 then healthOrb.Shield:Show()else healthOrb.Shield:Hide()end BD32CharacterData.healthOrb.showAbsorb=true else BD32CharacterData.healthOrb.showAbsorb=false healthOrb.Shield:Hide()end end function BD32ColorPicker(xmlElement)local r,g,b,a if xmlElement=="\70\105\108\108\105\110\103" then r,g,b,a=xmlOrbDisplayFrame2.orb.filling:GetVertexColor()elseif xmlElement=="\83\119\105\114\108" then r,g,b,a=xmlOrbDisplayFrame2.orb.galaxy1.texture:GetVertexColor()elseif xmlElement=="\70\111\110\116\49" then r,g,b,a=xmlOrbDisplayFrame2.orb.font1:GetTextColor()elseif xmlElement=="\70\111\110\116\50" then r,g,b,a=xmlOrbDisplayFrame2.orb.font2:GetTextColor()end ColorPickerFrame.elementToChange=xmlElement ColorPickerFrame.func,ColorPickerFrame.opacityFunc,ColorPickerFrame.cancelFunc=TryNewColors,TryNewColors,TryNewColors ColorPickerFrame:SetColorRGB(r,g,b,a)ColorPickerFrame.hasOpacity,ColorPickerFrame.opacity=(a~=nil),a ColorPickerFrame.previousValues={r,g,b,a}makeFrameMovable(ColorPickerFrame,"\82\105\103\104\116\66\117\116\116\111\110")ColorPickerFrame:EnableKeyboard(false)ColorPickerFrame:Show()end function UpdateXMLTextures(orb)xmlOrbDisplayFrame2.orb.filling:SetTexture(orb.filling:GetTexture())xmlOrbDisplayFrame2.orb.filling:SetDrawLayer("\66\65\67\75\71\82\79\85\78\68")xmlOrbDisplayFrame2.orb.galaxy1.texture:SetTexture(orb.galaxy1.texture:GetTexture())xmlOrbDisplayFrame2.orb.galaxy2.texture:SetTexture(orb.galaxy2.texture:GetTexture())xmlOrbDisplayFrame2.orb.galaxy3.texture:SetTexture(orb.galaxy3.texture:GetTexture())Lib_UIDropDownMenu_SetText(FillTexturesDropDown,BD_CHOOSE)Lib_UIDropDownMenu_SetText(RotationTexturesDropDown,BD_CHOOSE)Lib_UIDropDownMenu_SetText(orbFontDropDown,BD_CHOOSE)end function UpdateXMLColors(orbColor,galaxyColor,font1,font2)xmlOrbDisplayFrame2.orb.filling:SetVertexColor(orbColor.r,orbColor.g,orbColor.b,orbColor.a)xmlOrbDisplayFrame2.orb.galaxy1.texture:SetVertexColor(galaxyColor.r,galaxyColor.g,galaxyColor.b,galaxyColor.a)xmlOrbDisplayFrame2.orb.galaxy2.texture:SetVertexColor(galaxyColor.r,galaxyColor.g,galaxyColor.b,galaxyColor.a)xmlOrbDisplayFrame2.orb.galaxy3.texture:SetVertexColor(galaxyColor.r,galaxyColor.g,galaxyColor.b,galaxyColor.a)xmlOrbDisplayFrame2.orb.font1:SetTextColor(font1.r,font1.g,font1.b,font1.a)xmlOrbDisplayFrame2.orb.font2:SetTextColor(font2.r,font2.g,font2.b,font2.a)end function UpdateXMLText(orb)if xmlOrbDisplayFrame2.orb.font1:IsVisible()then xmlOrbDisplayFrame2.orb.font1:SetText(orb.font1:GetText())end if xmlOrbDisplayFrame2.orb.font2:IsVisible()then xmlOrbDisplayFrame2.orb.font2:SetText(orb.font2:GetText())end end function FillXMLTemplate(frame)frame.orb=CreateXMLOrb(xmlOrbDisplayFrame2,"\66\68\51\50\95\88\77\76\79\114\98",200,defaultTextures.healthOrb.fill,defaultTextures.healthOrb.rotation)frame.orb.galaxy1.texture:SetAlpha(0.5)frame.orb.galaxy2.texture:SetAlpha(0.5)frame.orb.galaxy3.texture:SetAlpha(0.5)end local function TargetBuffSetup()local buff local tbX=64 local tbY if not UnitDebuff('\116\97\114\103\101\116',1)then tbY=-4 else tbY=-60 end for index=1,40 do buff=_G['\84\97\114\103\101\116\70\114\97\109\101\66\117\102\102'..index]if UnitAura('\116\97\114\103\101\116',index)then if buff then buff:ClearAllPoints()buff:SetParent(BD32_TargetOrb)buff:SetFrameStrata("\77\69\68\73\85\77")buff:SetFrameLevel(3)buff:SetPoint("\84\79\80",BD32_TargetOrb,"\84\79\80",tbX,tbY)buff:SetFrameStrata("\77\69\68\73\85\77")tbX=tbX+21 if tbX>148 then tbY=tbY-21 tbX=64 end end else if buff then buff:Hide()end end end local buff local tbX=64 local tbY=-4 for index=1,40 do buff=_G['\84\97\114\103\101\116\70\114\97\109\101\68\101\98\117\102\102'..index]if UnitDebuff('\116\97\114\103\101\116',index)then if buff then buff:ClearAllPoints()buff:SetParent(BD32_TargetOrb)buff:SetFrameStrata("\66\65\67\75\71\82\79\85\78\68")buff:SetFrameLevel(3)buff:SetPoint("\84\79\80",BD32_TargetOrb,"\84\79\80",tbX,tbY)tbX=tbX+24 if tbX>148 then tbY=tbY-21 tbX=64 end end else if buff then buff:Hide()end end end end local function Level(unit)if UnitIsWildBattlePet(unit)or UnitIsBattlePetCompanion(unit)then return UnitBattlePetLevel(unit)end local level=UnitLevel(unit)if level<=0 then level='\63\63' end return level end local function DifficultyColor(unit)local level=Level(unit)if level=='\63\63' then level=99 end local color=GetQuestDifficultyColor(level)return color.r,color.g,color.b end function checkBDTargetOrb()if BD32CharacterData.targetOrb.enabled then previousTargetHealth=UnitHealth("\116\97\114\103\101\116")previousTargetPower=UnitPower("\116\97\114\103\101\116")targetOrb.font5:SetText(UnitLevel("\116\97\114\103\101\116"))if UnitLevel("\116\97\114\103\101\116")==-1 then BD32_levelFrameSkull:Show()targetOrb.font5:Hide()elseif not UnitIsEnemy("\116\97\114\103\101\116","\112\108\97\121\101\114")then BD32_levelFrameSkull:Hide()targetOrb.font5:Show()if UnitIsFriend("\116\97\114\103\101\116","\112\108\97\121\101\114")then targetOrb.font5:SetTextColor(1,0.82,0,1)else BD32_levelFrameSkull:Hide()targetOrb.font5:Show()local Tdr,Tdg,Tdb=DifficultyColor("\116\97\114\103\101\116")targetOrb.font5:SetTextColor(Tdr,Tdg,Tdb,1)end else BD32_levelFrameSkull:Hide()targetOrb.font5:Show()local Tdr,Tdg,Tdb=DifficultyColor("\116\97\114\103\101\116")targetOrb.font5:SetTextColor(Tdr,Tdg,Tdb,1)end local classification=UnitClassification("\116\97\114\103\101\116")if BD32CharacterData.targetOrb.eliteFrame then if classification=="\101\108\105\116\101" or classification=="\119\111\114\108\100\98\111\115\115" then targetOrb.namePlate:SetPoint("\84\79\80",0,35)targetOrb.font6:SetPoint("\84\79\80",0,29)BD32_eliteFrame:Show()BD32_rareFrame:Hide()BD32_normalFrame:Hide()elseif classification=="\114\97\114\101" or classification=="\114\97\114\101\101\108\105\116\101" then targetOrb.namePlate:SetPoint("\84\79\80",0,35)targetOrb.font6:SetPoint("\84\79\80",0,29)BD32_rareFrame:Show()BD32_normalFrame:Show()BD32_eliteFrame:Hide()else targetOrb.namePlate:SetPoint("\84\79\80",0,18)targetOrb.font6:SetPoint("\84\79\80",0,12)BD32_normalFrame:Show()BD32_eliteFrame:Hide()BD32_rareFrame:Hide()end else targetOrb.namePlate:SetPoint("\84\79\80",0,18)targetOrb.font6:SetPoint("\84\79\80",0,12)BD32_normalFrame:Show()BD32_eliteFrame:Hide()BD32_rareFrame:Hide()end local BD32localizedFaction=UnitFactionGroup("\116\97\114\103\101\116")local prestigeLevel=UnitPrestige("\116\97\114\103\101\116")targetOrb.font7:Hide()if BD32localizedFaction=="\65\108\108\105\97\110\99\101" then if UnitIsPVP("\116\97\114\103\101\116")or UnitIsPVPFreeForAll("\116\97\114\103\101\116")then BD32_pvpAlliFrame:Show()BD32_pvpHordeFrame:Hide()if prestigeLevel>0 then targetOrb.font7:Show()targetOrb.font7:SetPoint("\66\79\84\84\79\77",46,40)targetOrb.font7:SetText(prestigeLevel)end else BD32_pvpHordeFrame:Hide()BD32_pvpAlliFrame:Hide()end elseif BD32localizedFaction=="\72\111\114\100\101" then if UnitIsPVP("\116\97\114\103\101\116")or UnitIsPVPFreeForAll("\116\97\114\103\101\116")then BD32_pvpHordeFrame:Show()BD32_pvpAlliFrame:Hide()if prestigeLevel>0 then targetOrb.font7:Show()targetOrb.font7:SetPoint("\66\79\84\84\79\77",48,36)targetOrb.font7:SetText(prestigeLevel)end else BD32_pvpHordeFrame:Hide()BD32_pvpAlliFrame:Hide()end else BD32_pvpHordeFrame:Hide()BD32_pvpAlliFrame:Hide()end if BD32CharacterData.BD32Orbs.scale then TargetFrameSpellBar:SetParent(BD32_TargetOrb)TargetFrameSpellBar:ClearAllPoints()TargetFrameSpellBar:SetScale(BD32CharacterData.BD32Orbs.scale)TargetFrameSpellBar:SetFrameStrata("\77\69\68\73\85\77")TargetFrameSpellBar:SetFrameLevel(9)end if TargetFrameToT:IsVisible()then TargetFrameSpellBar:SetPoint('\66\79\84\84\79\77',BD32_TargetOrb,0,-45)else TargetFrameSpellBar:SetPoint('\66\79\84\84\79\77',BD32_TargetOrb,0,-20)end if not InCombatLockdown()then TargetFrameToT:ClearAllPoints()TargetFrameToT:SetPoint('\66\79\84\84\79\77',BD32_TargetOrb,-10,-36)TargetFrameToT:SetScale(BD32CharacterData.targetOrb.scale)end if UnitName("\116\97\114\103\101\116")and strlen(UnitName("\116\97\114\103\101\116"))>19 then targetOrb.namePlate:SetWidth(185)targetOrb.font6:SetText(utf8sub(UnitName("\116\97\114\103\101\116"),1,17).."\46\46\46")elseif UnitName("\116\97\114\103\101\116")then if strlen(UnitName("\116\97\114\103\101\116"))>9 then targetOrb.namePlate:SetWidth(strlen(UnitName("\116\97\114\103\101\116"))*10)else targetOrb.namePlate:SetWidth(100)end targetOrb.font6:SetText(UnitName("\116\97\114\103\101\116"))else targetOrb.namePlate:SetWidth(100)targetOrb.font6:SetText("")end targetOrb.filling1:SetVertexColor(0,1,0,1)local id,power,r,g,b=UnitPowerType("\116\97\114\103\101\116")local localpower=_G[power]if not localpower then return "";end local color=PowerBarColor[power]if not(r and b and g)and color then r,g,b=color.r,color.g,color.b end targetOrb.filling2:SetVertexColor(r,g,b,1)TargetBuffSetup()end end function handleActionBars()if BD32CharacterData.barFrame.show then showBarBottomLeft,showBarBottomRight=GetActionBarToggles()if showBarBottomRight then UnregisterStateDriver(bar1Frame,"\118\105\115\105\98\105\108\105\116\121")UnregisterStateDriver(bar2Frame,"\118\105\115\105\98\105\108\105\116\121")bar1Frame:Hide()bar2Frame:Hide()RegisterStateDriver(bar3Frame,"\118\105\115\105\98\105\108\105\116\121","\91\98\111\110\117\115\98\97\114\58\53\93\91\111\118\101\114\114\105\100\101\98\97\114\93\91\112\111\115\115\101\115\115\98\97\114\44\64\118\101\104\105\99\108\101\44\32\101\120\105\115\116\115\93\91\112\101\116\98\97\116\116\108\101\93\32\104\105\100\101\59\32\115\104\111\119")elseif showBarBottomLeft and not showBarBottomRight then UnregisterStateDriver(bar1Frame,"\118\105\115\105\98\105\108\105\116\121")UnregisterStateDriver(bar3Frame,"\118\105\115\105\98\105\108\105\116\121")bar1Frame:Hide()bar3Frame:Hide()RegisterStateDriver(bar2Frame,"\118\105\115\105\98\105\108\105\116\121","\91\98\111\110\117\115\98\97\114\58\53\93\91\111\118\101\114\114\105\100\101\98\97\114\93\91\112\111\115\115\101\115\115\98\97\114\44\64\118\101\104\105\99\108\101\44\32\101\120\105\115\116\115\93\91\112\101\116\98\97\116\116\108\101\93\32\104\105\100\101\59\32\115\104\111\119")elseif not showBarBottomLeft and not showBarBottomRight then UnregisterStateDriver(bar3Frame,"\118\105\115\105\98\105\108\105\116\121")UnregisterStateDriver(bar2Frame,"\118\105\115\105\98\105\108\105\116\121")bar3Frame:Hide()bar2Frame:Hide()RegisterStateDriver(bar1Frame,"\118\105\115\105\98\105\108\105\116\121","\91\98\111\110\117\115\98\97\114\58\53\93\91\111\118\101\114\114\105\100\101\98\97\114\93\91\112\111\115\115\101\115\115\98\97\114\44\64\118\101\104\105\99\108\101\44\32\101\120\105\115\116\115\93\91\112\101\116\98\97\116\116\108\101\93\32\104\105\100\101\59\32\115\104\111\119")end else UnregisterStateDriver(bar1Frame,"\118\105\115\105\98\105\108\105\116\121")UnregisterStateDriver(bar2Frame,"\118\105\115\105\98\105\108\105\116\121")UnregisterStateDriver(bar3Frame,"\118\105\115\105\98\105\108\105\116\121")bar1Frame:Hide()bar2Frame:Hide()bar3Frame:Hide()end end local bdoOptionsPanel=CreateFrame("\70\82\65\77\69","\98\100\111\79\114\98\115\80\97\110\101\108")bdoOptionsPanel.name="\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115";bdoOptionsPanel.okay=function(self)if not InCombatLockdown()then handleActionBars()HandleProgressBarsShow()end end bdoOptionsPanel.default=function(self)if not InCombatLockdown()then handleActionBars()HandleProgressBarsShow()end end local bdoOptPannel=bdoOptionsPanel:CreateFontString(nil,"\79\86\69\82\76\65\89","\71\97\109\101\70\111\110\116\78\111\114\109\97\108")bdoOptPannel:SetFont(BD32_fontChoices[2],25)bdoOptPannel:SetTextColor(0,1,0,1)bdoOptPannel:ClearAllPoints()bdoOptPannel:SetPoint("\84\79\80\76\69\70\84",bdoOptionsPanel,"\84\79\80\76\69\70\84",12,-12)bdoOptPannel:SetText("\66\101\97\114\100\108\101\121\39\115\32\68\105\97\98\108\111\32\79\114\98\115")local frmBDOhideMinimapBtn=CreateFrame("\67\104\101\99\107\66\117\116\116\111\110","\66\68\51\50\95\102\114\109\66\68\79\104\105\100\101\77\105\110\105\109\97\112\66\116\110",bdoOptionsPanel,"\85\73\67\104\101\99\107\66\117\116\116\111\110\84\101\109\112\108\97\116\101")frmBDOhideMinimapBtn:ClearAllPoints()frmBDOhideMinimapBtn:SetPoint("\84\79\80\76\69\70\84",12,-45)getglobal(BD32_frmBDOhideMinimapBtn:GetName().."\84\101\120\116"):SetFont(BD32_fontChoices[0],12)getglobal(BD32_frmBDOhideMinimapBtn:GetName().."\84\101\120\116"):SetText("\83\104\111\119\32\77\105\110\105\109\97\112\32\73\99\111\110")frmBDOhideMinimapBtn:SetScript("\79\110\67\108\105\99\107",function(self)if frmBDOhideMinimapBtn:GetChecked()then BD32CharacterData.BD32minimapIcon.show=true BDOminimapButton:Show("\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115")else BD32CharacterData.BD32minimapIcon.show=false BDOminimapButton:Hide("\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115")end end)frmBDOhideMinimapBtn:SetScript("\79\110\76\111\97\100",function(self)frmBDOhideMinimapBtn:SetChecked(BD32CharacterData.BD32minimapIcon.show)end)btnOpenBD32GUI=CreateFrame("\66\117\116\116\111\110","\111\112\101\110\66\68\51\50\71\85\73\98\116\110",bdoOptionsPanel,"\85\73\80\97\110\101\108\66\117\116\116\111\110\84\101\109\112\108\97\116\101")btnOpenBD32GUI:SetPoint("\84\79\80\76\69\70\84",bdoOptionsPanel,"\84\79\80\76\69\70\84",14,-80)btnOpenBD32GUI:SetText("\79\112\101\110\32\77\101\110\117")btnOpenBD32GUI:SetWidth(100)btnOpenBD32GUI:SetHeight(22)btnOpenBD32GUI:SetScript("\79\110\67\108\105\99\107",function()if not InCombatLockdown()then Handle_BD32GUI()else message(BDINFIGT_MESSAGE)end end)InterfaceOptions_AddCategory(bdoOptionsPanel)local BD32localizedDisplayName,BD32className,BD32classNumber=UnitClass("\112\108\97\121\101\114")local factionGroup,factionName=UnitFactionGroup("\112\108\97\121\101\114")healthOrb=CreateOrb(nil,"\66\68\51\50\95\72\101\97\108\116\104\79\114\98",defaultOrbSize,defaultTextures.healthOrb.fill,defaultTextures.healthOrb.rotation,-250,0,"\66\79\84\84\79\77\76\69\70\84",monitorHealth)manaOrb=CreateOrb(nil,"\66\68\51\50\95\77\97\110\97\79\114\98",defaultOrbSize,defaultTextures.manaOrb.fill,defaultTextures.manaOrb.rotation,250,0,"\66\79\84\84\79\77\82\73\71\72\84",monitorPower)petOrb=CreatePetOrb(healthOrb,"\66\68\51\50\95\80\101\116\79\114\98",87,-95,70,nil)targetOrb=CreateTargetOrb(nil,"\66\68\51\50\95\84\97\114\103\101\116\79\114\98",87,290,110,nil)bar1Frame=addCastBar(images.."\98\97\114\49\46\116\103\97",UIParent,"\66\68\51\50\95\66\97\114\49\70\114\97\109\101",1,-4,63,491)bar2Frame=addCastBar(images.."\98\97\114\50\46\116\103\97",UIParent,"\66\68\51\50\95\66\97\114\50\70\114\97\109\101",1,-4,127,491)bar3Frame=addCastBar(images.."\98\97\114\51\46\116\103\97",UIParent,"\66\68\51\50\95\66\97\114\51\70\114\97\109\101",1,-4,127,491)if BD32className=="\80\65\76\65\68\73\78" or BD32className=="\87\65\82\76\79\67\75" or BD32className=="\82\79\71\85\69" or BD32className=="\68\82\85\73\68" or BD32className=="\77\79\78\75" or BD32className=="\80\82\73\69\83\84" or BD32className=="\77\65\71\69" or BD32className=="\83\72\65\77\65\78" or BD32className=="\68\69\65\84\72\75\78\73\71\72\84" then miniOrb=CreateMiniOrb(manaOrb,"\66\68\51\50\95\77\105\110\105\79\114\98",87,defaultTextures.manaOrb.fill,defaultTextures.manaOrb.rotation,95,70,nil)makeFrameMovable(miniOrb)end RegisterStateDriver(healthOrb,"\118\105\115\105\98\105\108\105\116\121","\91\98\111\110\117\115\98\97\114\58\53\93\91\111\118\101\114\114\105\100\101\98\97\114\93\91\112\101\116\98\97\116\116\108\101\93\91\112\111\115\115\101\115\115\98\97\114\44\64\118\101\104\105\99\108\101\44\32\101\120\105\115\116\115\93\32\104\105\100\101\59\32\115\104\111\119")RegisterStateDriver(manaOrb,"\118\105\115\105\98\105\108\105\116\121","\91\98\111\110\117\115\98\97\114\58\53\93\91\111\118\101\114\114\105\100\101\98\97\114\93\91\112\101\116\98\97\116\116\108\101\93\91\112\111\115\115\101\115\115\98\97\114\44\64\118\101\104\105\99\108\101\44\32\101\120\105\115\116\115\93\32\104\105\100\101\59\32\115\104\111\119")angelFrame=addArtwork(images.."\100\51\95\97\110\103\101\108\46\116\103\97",manaOrb,"\65\110\103\101\108\70\114\97\109\101",84,5,160,160)demonFrame=addArtwork(images.."\100\51\95\100\101\109\111\110\46\116\103\97",healthOrb,"\68\101\109\111\110\70\114\97\109\101",-98,5,160,160)leadercrownFrame=addArtwork(images.."\99\114\111\119\110\46\116\103\97",healthOrb,"\99\114\111\119\110\70\114\97\109\101",-62,63,25,25)if factionGroup=="\72\111\114\100\101" then pvpFlagFrame=addArtwork("\73\110\116\101\114\102\97\99\101\92\84\97\114\103\101\116\105\110\103\70\114\97\109\101\92\85\73\45\80\86\80\45"..factionGroup,healthOrb,"\70\108\97\103\70\114\97\109\101",66,-68,35,35)else pvpFlagFrame=addArtwork("\73\110\116\101\114\102\97\99\101\92\84\97\114\103\101\116\105\110\103\70\114\97\109\101\92\85\73\45\80\86\80\45"..factionGroup,healthOrb,"\70\108\97\103\70\114\97\109\101",68,-67,35,35)end barEndcapLeft=addCastBar(images.."\98\108\97\99\107\46\116\103\97",healthOrb,"\66\97\114\70\114\97\109\101",-10,0,3,48)barEndcapRight=addCastBar(images.."\98\108\97\99\107\46\116\103\97",manaOrb,"\66\97\114\70\114\97\109\101",8,0,4,48)BDOrestIcon=addArtwork(images.."\114\101\115\116\73\99\111\110\46\116\103\97",healthOrb,"\66\68\51\50\95\114\101\115\116\73\99\111\110\70\114\97\109\101",-75,40,32,32)makeFrameMovable(healthOrb)makeFrameMovable(manaOrb)makeFrameMovable(petOrb)makeFrameMovable(targetOrb)makeFrameMovable(MultiBarRight)makeFrameMovable(MultiBarLeft)makeFrameMovable(bar1Frame)makeFrameMovable(bar2Frame)makeFrameMovable(bar3Frame)local BDeventFrame=CreateFrame("\70\114\97\109\101")BDeventFrame:RegisterEvent("\80\76\65\89\69\82\95\69\78\84\69\82\73\78\71\95\87\79\82\76\68")BDeventFrame:RegisterEvent("\86\65\82\73\65\66\76\69\83\95\76\79\65\68\69\68")BDeventFrame:RegisterEvent("\80\76\65\89\69\82\95\76\79\71\73\78")BDeventFrame:RegisterEvent("\80\76\65\89\69\82\95\82\69\71\69\78\95\68\73\83\65\66\76\69\68")BDeventFrame:RegisterEvent("\80\76\65\89\69\82\95\82\69\71\69\78\95\69\78\65\66\76\69\68")BDeventFrame:RegisterEvent("\85\78\73\84\95\80\69\84")BDeventFrame:RegisterEvent("\71\82\79\85\80\95\74\79\73\78\69\68")BDeventFrame:RegisterEvent("\71\82\79\85\80\95\82\79\83\84\69\82\95\85\80\68\65\84\69")BDeventFrame:RegisterEvent("\85\78\73\84\95\65\66\83\79\82\66\95\65\77\79\85\78\84\95\67\72\65\78\71\69\68")BDeventFrame:RegisterEvent("\85\78\73\84\95\70\65\67\84\73\79\78")BDeventFrame:RegisterEvent("\90\79\78\69\95\67\72\65\78\71\69\68")BDeventFrame:RegisterEvent("\65\67\84\73\86\69\95\84\65\76\69\78\84\95\71\82\79\85\80\95\67\72\65\78\71\69\68")BDeventFrame:RegisterEvent("\80\76\65\89\69\82\95\84\65\82\71\69\84\95\67\72\65\78\71\69\68")BDeventFrame:RegisterEvent("\80\76\65\89\69\82\95\85\80\68\65\84\69\95\82\69\83\84\73\78\71")if BD32className=="\68\82\85\73\68" then BDeventFrame:RegisterEvent("\85\80\68\65\84\69\95\83\72\65\80\69\83\72\73\70\84\95\70\79\82\77")end function BDeventFrame:OnEvent(event,arg1)if event=="\80\76\65\89\69\82\95\69\78\84\69\82\73\78\71\95\87\79\82\76\68" then local BD32localizedDisplayName,BD32className,BD32classNumber=UnitClass("\112\108\97\121\101\114")checkDefaultsFromMemory()handlePlayerFrame(BD32CharacterData.defaultPlayerFrame.show)handleTargetFrame(BD32CharacterData.targetOrb.showBlizzTargetFrame)updateColorsFromMemory()UpdateOrbTextures()handleActionBars()setSecureFunctions()HandleProgressBarsShow()frmBDOhideMinimapBtn:SetChecked(BD32CharacterData.BD32minimapIcon.show)BD32UpdateOrbColor(healthOrb,BD32CharacterData.healthOrb.orbColor,BD32CharacterData.healthOrb.galaxy,BD32CharacterData.healthOrb.font1,BD32CharacterData.healthOrb.font2)local colorTable if BD32className=="\68\82\85\73\68" then local Spec=GetSpecializationInfo(GetSpecialization())checkShapeShiftInfo()if BD32CharacterData.miniOrb.enabled then if Spec==102 then RegisterStateDriver(miniOrb,"\118\105\115\105\98\105\108\105\116\121","\91\102\111\114\109\58\50\47\52\93\115\104\111\119\59\91\102\111\114\109\58\49\47\51\93\104\105\100\101\59")else RegisterStateDriver(miniOrb,"\118\105\115\105\98\105\108\105\116\121","\91\102\111\114\109\58\50\93\115\104\111\119\59\91\102\111\114\109\58\49\47\51\47\52\93\104\105\100\101\59")end end else BD32UpdateOrbColor(manaOrb,BD32CharacterData.manaOrb.orbColor,BD32CharacterData.manaOrb.galaxy,BD32CharacterData.manaOrb.font1,BD32CharacterData.manaOrb.font2)if miniOrb then BD32UpdateOrbColor(miniOrb,BD32CharacterData.manaOrb.orbColor,BD32CharacterData.manaOrb.galaxy,BD32CharacterData.manaOrb.font1,BD32CharacterData.manaOrb.font2)end end if BD32className=="\83\72\65\77\65\78" then local Spec=GetSpecializationInfo(GetSpecialization())if BD32CharacterData.miniOrb.enabled then if Spec==262 or Spec==263 then RegisterStateDriver(miniOrb,"\118\105\115\105\98\105\108\105\116\121","\91\102\111\114\109\58\48\93\115\104\111\119\59\91\102\111\114\109\58\49\93\104\105\100\101\59")else RegisterStateDriver(miniOrb,"\118\105\115\105\98\105\108\105\116\121","\104\105\100\101\59")end end end if BD32className=="\77\79\78\75" then local Spec=GetSpecializationInfo(GetSpecialization())if BD32CharacterData.miniOrb.enabled then if Spec==268 or Spec==269 then RegisterStateDriver(miniOrb,"\118\105\115\105\98\105\108\105\116\121","\91\102\111\114\109\58\48\93\115\104\111\119\59\91\102\111\114\109\58\49\93\104\105\100\101\59")else RegisterStateDriver(miniOrb,"\118\105\115\105\98\105\108\105\116\121","\104\105\100\101\59")end end end VersionFontString:SetText("\86"..GetAddOnMetadata("\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115","\86\101\114\115\105\111\110"))BD32GUI:Hide()if UnitIsGroupLeader("\112\108\97\121\101\114")then leadercrownFrame:Show()else leadercrownFrame:Hide()end if UnitIsPVP("\112\108\97\121\101\114")or UnitIsPVPFreeForAll("\112\108\97\121\101\114")then pvpFlagFrame:Show()else pvpFlagFrame:Hide()end if BD32CharacterData.healthOrb.showAbsorb==true then local absorb=UnitGetTotalAbsorbs("\112\108\97\121\101\114")or 0 if absorb>1 then healthOrb.Shield:Show()else healthOrb.Shield:Hide()end else healthOrb.Shield:Hide()end if petOrb then checkPetFontPlacement()end if miniOrb then checkComboFontPlacement()end if BD32CharacterData.targetOrb.enabled then targetOrb:SetScript("\79\110\85\112\100\97\116\101",BDOupdateTargetValues)targetOrb:SetParent(UIParent)RegisterStateDriver(targetOrb,"\118\105\115\105\98\105\108\105\116\121","\91\101\120\105\115\116\115\93\32\115\104\111\119\59\32\104\105\100\101")else targetOrb:SetScript("\79\110\85\112\100\97\116\101",nil)targetOrb:Hide()end if NotForbiddenAddonLoaded()then MainMenuBar:SetScale(.01)MainMenuBar.ignoreFramePositionManager=true end if IsResting()then BDOrestIcon:Show()else BDOrestIcon:Hide()end if BD32CharacterData.targetOrb.enabled then TargetFrame:HookScript("\79\110\69\118\101\110\116",function()TargetBuffSetup()end)Target_Spellbar_AdjustPosition=function()end TargetFrameSpellBar:SetScript("\79\110\83\104\111\119",nil)TargetFrameToT:SetScript("\79\110\83\104\111\119",function()if TargetFrameToT:IsVisible()then TargetFrameSpellBar:SetPoint('\66\79\84\84\79\77',BD32_TargetOrb,0,-53)else TargetFrameSpellBar:SetPoint('\66\79\84\84\79\77',BD32_TargetOrb,0,-20)end end)else TargetFrameToT:SetScript("\79\110\83\104\111\119",nil)TargetFrameToT:SetScript("\79\110\72\105\100\101",nil)end if BD32CharacterData.BD32Orbs.enabled==false then healthOrb:SetScript("\79\110\85\112\100\97\116\101",nil)manaOrb:SetScript("\79\110\85\112\100\97\116\101",nil)healthOrb:Hide()manaOrb:Hide()BD32CharacterData.BD32Orbs.enabled=false if petOrb:IsVisible()then petOrb:Hide()end if miniOrb then miniOrb:Hide()end miniOrb:SetScript("\79\110\85\112\100\97\116\101",MiniOrbUpdate)petOrb:SetScript("\79\110\85\112\100\97\116\101",updatePetValues)UnregisterStateDriver(bar1Frame,"\118\105\115\105\98\105\108\105\116\121")UnregisterStateDriver(bar2Frame,"\118\105\115\105\98\105\108\105\116\121")UnregisterStateDriver(bar3Frame,"\118\105\115\105\98\105\108\105\116\121")UnregisterStateDriver(healthOrb,"\118\105\115\105\98\105\108\105\116\121")UnregisterStateDriver(manaOrb,"\118\105\115\105\98\105\108\105\116\121")end BD32TargetOrbScaleSlider:SetValue(BD32CharacterData.targetOrb.scale*100)BD32ComboOrbScaleSlider:SetValue(BD32CharacterData.miniOrb.scale*100)BD32PetOrbScaleSlider:SetValue(BD32CharacterData.petOrb.scale*100)BD32ScaleSlider:SetValue(BD32CharacterData.barFrame.scale*100)if BD32CharacterData.healthOrb.scale==BD32CharacterData.manaOrb.scale then BD32OrbScaleSlider:SetValue(BD32CharacterData.BD32Orbs.scale*100)end BD32HealthOrbScaleSlider:SetValue(BD32CharacterData.healthOrb.scale*100)BD32ManaOrbScaleSlider:SetValue(BD32CharacterData.manaOrb.scale*100)elseif event=="\86\65\82\73\65\66\76\69\83\95\76\79\65\68\69\68" then loadLocalization()if not BD32CharacterData.manaOrb.OrbXOffset then BD32CharacterData.healthOrb.OrbXOffset=0 end if not BD32CharacterData.healthOrb.hasMoved and not InCombatLockdown()then healthOrb:ClearAllPoints()healthOrb:SetPoint("\66\79\84\84\79\77",nil,"\66\79\84\84\79\77",-250-BD32CharacterData.healthOrb.OrbXOffset,0)healthOrb:SetScale(BD32CharacterData.healthOrb.scale)end if not BD32CharacterData.manaOrb.OrbXOffset then BD32CharacterData.manaOrb.OrbXOffset=0 end if not BD32CharacterData.manaOrb.hasMoved and not InCombatLockdown()then manaOrb:ClearAllPoints()manaOrb:SetPoint("\66\79\84\84\79\77",nil,"\66\79\84\84\79\77",250+BD32CharacterData.manaOrb.OrbXOffset,0)manaOrb:SetScale(BD32CharacterData.manaOrb.scale)end elseif event=="\80\76\65\89\69\82\95\76\79\71\73\78" then local BDOdataObject=LibStub("\76\105\98\68\97\116\97\66\114\111\107\101\114\45\49\46\49"):NewDataObject("\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115",{type="\108\97\117\110\99\104\101\114",name="\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115",icon="\73\110\116\101\114\102\97\99\101\92\65\100\100\79\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\105\109\97\103\101\115\92\109\66\117\116\116\111\110\73\99\111\110\46\116\103\97",OnClick=function(self,button)if not InCombatLockdown()then Handle_BD32GUI()else print(BDINFIGT_MESSAGE)end end,OnShow=function(self)print("\103\101\104\116"..self)end,OnTooltipShow=function(tooltip)tooltip:SetText(BDMINIMAP_HEADLINE,1,1,1)tooltip:AddLine(BDMINIMAP_TEXT1)tooltip:AddLine(BDMINIMAP_TEXT2)tooltip:AddLine(BDMINIMAP_TEXT3)tooltip:Show()end })if not BDOdataObject then return end BDOminimapButton=LibStub("\76\105\98\68\66\73\99\111\110\45\49\46\48")BDOminimapButton:Register("\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115",BDOdataObject,BD32MiniMapButton)if BD32CharacterData.BD32minimapIcon.show then BDOminimapButton:Show("\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115")else BDOminimapButton:Hide("\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115")end elseif event=="\80\76\65\89\69\82\95\82\69\71\69\78\95\68\73\83\65\66\76\69\68" then if BD32GUI:IsVisible()then ColorPickerFrame:Hide()BD32GUI:Hide()end if BD32CharacterData.combat.enabled then BD32UpdateOrbColor(healthOrb,BD32CharacterData.combat.orbColor,BD32CharacterData.combat.galaxy,BD32CharacterData.combat.font1,BD32CharacterData.combat.font2)petOrb.filling1:SetVertexColor(BD32CharacterData.combat.orbColor.r,BD32CharacterData.combat.orbColor.g,BD32CharacterData.combat.orbColor.b,BD32CharacterData.combat.orbColor.a)end elseif event=="\80\76\65\89\69\82\95\82\69\71\69\78\95\69\78\65\66\76\69\68" then BD32ScaleSlider:Enable()BD32OrbScaleSlider:Enable()if BD32className=="\68\82\85\73\68" then checkShapeShiftInfo()end if BD32CharacterData.combat.enabled then BD32UpdateOrbColor(healthOrb,BD32CharacterData.healthOrb.orbColor,BD32CharacterData.healthOrb.galaxy,BD32CharacterData.healthOrb.font1,BD32CharacterData.healthOrb.font2)petOrb.filling1:SetVertexColor(BD32CharacterData.healthOrb.orbColor.r,BD32CharacterData.healthOrb.orbColor.g,BD32CharacterData.healthOrb.orbColor.b,BD32CharacterData.healthOrb.orbColor.a)end elseif event=="\85\80\68\65\84\69\95\83\72\65\80\69\83\72\73\70\84\95\70\79\82\77" then checkShapeShiftInfo()checkBDTargetOrb()elseif event=="\85\78\73\84\95\80\69\84" then local name,realm=UnitName("\112\101\116")if not name then petOrb:SetScript("\79\110\85\112\100\97\116\101",nil)else petOrb:SetScript("\79\110\85\112\100\97\116\101",updatePetValues)previousPetHealth=UnitHealth("\112\101\116")previousPetPower=UnitPower("\112\101\116")checkPetFontPlacement()end elseif event=="\71\82\79\85\80\95\74\79\73\78\69\68" then if UnitIsGroupLeader("\112\108\97\121\101\114")then leadercrownFrame:Show()else leadercrownFrame:Hide()end elseif event=="\71\82\79\85\80\95\82\79\83\84\69\82\95\85\80\68\65\84\69" then if UnitIsGroupLeader("\112\108\97\121\101\114")then leadercrownFrame:Show()else leadercrownFrame:Hide()end elseif event=="\85\78\73\84\95\65\66\83\79\82\66\95\65\77\79\85\78\84\95\67\72\65\78\71\69\68" then if BD32CharacterData.healthOrb.showAbsorb==true then local absorb=UnitGetTotalAbsorbs("\112\108\97\121\101\114")or 0 if absorb>1 then healthOrb.Shield:Show()else healthOrb.Shield:Hide()end end elseif event=="\85\78\73\84\95\70\65\67\84\73\79\78" then if UnitIsPVP("\112\108\97\121\101\114")or UnitIsPVPFreeForAll("\112\108\97\121\101\114")then pvpFlagFrame:Show()else pvpFlagFrame:Hide()end elseif event=="\90\79\78\69\95\67\72\65\78\71\69\68" then if UnitIsPVP("\112\108\97\121\101\114")or UnitIsPVPFreeForAll("\112\108\97\121\101\114")then pvpFlagFrame:Show()else pvpFlagFrame:Hide()end if not InCombatLockdown()then handleActionBars()end elseif event=="\65\67\84\73\86\69\95\84\65\76\69\78\84\95\71\82\79\85\80\95\67\72\65\78\71\69\68" then previousPowerValue=0 BD32MonitorPowers()checkBDTargetOrb()if BD32className=="\68\82\85\73\68" then local Spec=GetSpecializationInfo(GetSpecialization())checkShapeShiftInfo()if BD32CharacterData.miniOrb.enabled then if Spec==102 then RegisterStateDriver(miniOrb,"\118\105\115\105\98\105\108\105\116\121","\91\102\111\114\109\58\50\47\52\93\115\104\111\119\59\91\102\111\114\109\58\49\47\51\93\104\105\100\101\59")else RegisterStateDriver(miniOrb,"\118\105\115\105\98\105\108\105\116\121","\91\102\111\114\109\58\50\93\115\104\111\119\59\91\102\111\114\109\58\49\47\51\47\52\93\104\105\100\101\59")end end end if BD32className=="\83\72\65\77\65\78" then local Spec=GetSpecializationInfo(GetSpecialization())if BD32CharacterData.miniOrb.enabled then if Spec==262 or Spec==263 then RegisterStateDriver(miniOrb,"\118\105\115\105\98\105\108\105\116\121","\91\102\111\114\109\58\48\93\115\104\111\119\59\91\102\111\114\109\58\49\93\104\105\100\101\59")else RegisterStateDriver(miniOrb,"\118\105\115\105\98\105\108\105\116\121","\104\105\100\101\59")end end end if BD32className=="\77\79\78\75" then local Spec=GetSpecializationInfo(GetSpecialization())if BD32CharacterData.miniOrb.enabled then if Spec==268 or Spec==269 then RegisterStateDriver(miniOrb,"\118\105\115\105\98\105\108\105\116\121","\91\102\111\114\109\58\48\93\115\104\111\119\59\91\102\111\114\109\58\49\93\104\105\100\101\59")else RegisterStateDriver(miniOrb,"\118\105\115\105\98\105\108\105\116\121","\104\105\100\101\59")end end end elseif event=="\80\76\65\89\69\82\95\84\65\82\71\69\84\95\67\72\65\78\71\69\68" then checkBDTargetOrb()elseif event=="\80\76\65\89\69\82\95\85\80\68\65\84\69\95\82\69\83\84\73\78\71" then if IsResting()then BDOrestIcon:Show()else BDOrestIcon:Hide()end end end BDeventFrame:SetScript("\79\110\69\118\101\110\116",BDeventFrame.OnEvent)BDeventFrame:HookScript("\79\110\85\112\100\97\116\101",BD32MonitorPowers)local function CommandFunc(cmd)if not InCombatLockdown()then if cmd=="\100\105\115\97\98\108\101" then healthOrb:SetScript("\79\110\85\112\100\97\116\101",nil)manaOrb:SetScript("\79\110\85\112\100\97\116\101",nil)healthOrb:Hide()manaOrb:Hide()BD32CharacterData.BD32Orbs.enabled=false if petOrb:IsVisible()then petOrb:Hide()end if miniOrb then miniOrb:Hide()end miniOrb:SetScript("\79\110\85\112\100\97\116\101",MiniOrbUpdate)petOrb:SetScript("\79\110\85\112\100\97\116\101",updatePetValues)UnregisterStateDriver(bar1Frame,"\118\105\115\105\98\105\108\105\116\121")UnregisterStateDriver(bar2Frame,"\118\105\115\105\98\105\108\105\116\121")UnregisterStateDriver(bar3Frame,"\118\105\115\105\98\105\108\105\116\121")UnregisterStateDriver(healthOrb,"\118\105\115\105\98\105\108\105\116\121")UnregisterStateDriver(manaOrb,"\118\105\115\105\98\105\108\105\116\121")elseif cmd=="\101\110\97\98\108\101" then BD32CharacterData.BD32Orbs.enabled=true healthOrb:SetScript("\79\110\85\112\100\97\116\101",monitorHealth)manaOrb:SetScript("\79\110\85\112\100\97\116\101",monitorPower)RegisterStateDriver(healthOrb,"\118\105\115\105\98\105\108\105\116\121","\91\98\111\110\117\115\98\97\114\58\53\93\91\111\118\101\114\114\105\100\101\98\97\114\93\91\112\111\115\115\101\115\115\98\97\114\44\64\118\101\104\105\99\108\101\44\32\101\120\105\115\116\115\93\91\112\101\116\98\97\116\116\108\101\93\32\104\105\100\101\59\32\115\104\111\119")RegisterStateDriver(manaOrb,"\118\105\115\105\98\105\108\105\116\121","\91\98\111\110\117\115\98\97\114\58\53\93\91\111\118\101\114\114\105\100\101\98\97\114\93\91\112\111\115\115\101\115\115\98\97\114\44\64\118\101\104\105\99\108\101\44\32\101\120\105\115\116\115\93\91\112\101\116\98\97\116\116\108\101\93\32\104\105\100\101\59\32\115\104\111\119")local name,realm=UnitName("\112\101\116")if not name then petOrb:SetScript("\79\110\85\112\100\97\116\101",nil)else petOrb:SetScript("\79\110\85\112\100\97\116\101",updatePetValues)petOrb:Show()end if miniOrb then miniOrb:SetScript("\79\110\85\112\100\97\116\101",BD32MonitorPowers)end handleActionBars()healthOrb:Show()manaOrb:Show()elseif cmd=="\109\101\110\117" then Handle_BD32GUI()elseif cmd=="\104\101\108\112" or cmd then print(BD_HELPMESSAGE_HEADLINE1)print(BD_HELPMESSAGE_HEADLINE2)print(BD_HELPMESSAGE_TEXT1)print(BD_HELPMESSAGE_TEXT2)print(BD_HELPMESSAGE_TEXT3)print(BD_HELPMESSAGE_TEXT4)end else print(BDINFIGT_MESSAGE)end end SlashCmdList["\66\68\79"]=CommandFunc SLASH_BDO1="\47\98\100\111";local function hideBDCastBar(readOnly)if NotForbiddenAddonLoaded()then CharacterMicroButton:SetScale(1)if readOnly==true then else point,relativeTo,relativePoint,xOffset,yOffset=CharacterMicroButton:GetPoint()end if PetBattleFrame:IsVisible()then yOffset=yOffset-2 end CharacterMicroButton:SetPoint("\66\79\84\84\79\77\76\69\70\84",xOffset,yOffset)SpellbookMicroButton:SetScale(1)SpellbookMicroButton:SetPoint("\66\79\84\84\79\77\76\69\70\84",xOffset+24,yOffset)TalentMicroButton:SetScale(1)TalentMicroButton:SetPoint("\66\79\84\84\79\77\76\69\70\84",xOffset+48,yOffset)AchievementMicroButton:SetScale(1)AchievementMicroButton:SetPoint("\66\79\84\84\79\77\76\69\70\84",xOffset+72,yOffset)QuestLogMicroButton:SetScale(1)QuestLogMicroButton:SetPoint("\66\79\84\84\79\77\76\69\70\84",xOffset+96,yOffset)GuildMicroButton:SetScale(1)GuildMicroButton:SetPoint("\66\79\84\84\79\77\76\69\70\84",xOffset+120,yOffset)LFDMicroButton:SetScale(1)LFDMicroButton:SetPoint("\66\79\84\84\79\77\76\69\70\84",xOffset,yOffset-34)CollectionsMicroButton:SetScale(1)CollectionsMicroButton:SetPoint("\66\79\84\84\79\77\76\69\70\84",xOffset+24,yOffset-34)EJMicroButton:SetScale(1)EJMicroButton:SetPoint("\66\79\84\84\79\77\76\69\70\84",xOffset+48,yOffset-34)StoreMicroButton:SetScale(1)StoreMicroButton:SetPoint("\66\79\84\84\79\77\76\69\70\84",xOffset+72,yOffset-34)MainMenuMicroButton:SetScale(1)MainMenuMicroButton:SetPoint("\66\79\84\84\79\77\76\69\70\84",xOffset+97,yOffset-34)end end function setSecureMicroButtons()if OverrideActionBar:IsVisible()or PetBattleFrame:IsVisible()then hideBDCastBar(true)end end OverrideActionBar:HookScript("\79\110\83\104\111\119",hideBDCastBar)PetBattleFrame:HookScript("\79\110\83\104\111\119",hideBDCastBar)MainMenuBar:HookScript("\79\110\72\105\100\101",hideBDCastBar)MainMenuBar:HookScript("\79\110\83\104\111\119",HandleMicroButtons)function loadLocalization()local fontName,fontHeight,fontFlags,setThisFont fontStrConfiguration:SetText(BD_ORB_CONFIGURATION)fontStrReloadReq:SetText(BD_RELOAD_REQUIRED)fontStrReloadReq1:SetText(BD_RELOAD_REQUIRED)fontStrHealthOrbButton:SetText(BD_LEFT_ORB_BUTTON)fontStrManaOrbButton:SetText(BD_RIGHT_ORB_BUTTON)fontStrResetBDWindows:SetText(BD_RESET_WINDOWS)fontStrCloseButton:SetText(BD_CLOSE_BUTTON)fontStrTCCheckButton:SetText(BD_SHOW_COMBAT_ORB)fontStrArtworkCheckButton:SetText(BD_SHOW_ARTWORK)fontStrPlayerFrameCheckButton:SetText(BD_SHOW_PLAYERFRAME)fontStrLockBDWindowsCheckButton:SetText(BD_LOCK_WINDOWS)fontStrShowBDTargetOrb:SetText(BD_SHOW_TARGET_ORB)fontStrShowTargetFrame:SetText(BD_SHOW_TARGET_FRAME)fontStrShowOrbEliteFrame:SetText(BD_SHOW_RAREELITE_FRAME)fontStrBDTargetOrbValue:SetText(BD_SHOW_TARGET_VALUE)fontStrBDTargetOrbPercentage:SetText(BD_SHOW_TARGET_PERCENT)fontStrAnimateOrbCheckButton:SetText(BD_SMOOTH_ANIMATION)fontStrBarImageCheckButton:SetText(BD_SHOW_BARIMAGE)fontStrTruncatedCheckButton:SetText(BD_SET_TRUNCATED)fontStrUsePetOrbCheckButton:SetText(BD_SHOW_PETORB)fontStrPetOrbValuesCheckButton:SetText(BD_SHOW_PETORB_VALUES)fontStrPetOrbPercentagesCheckButton:SetText(BD_SHOW_PETORB_PERCENT)fontStrPowerTrackerCheckButton:SetText(BD_SHOW_COMBO_TRACKER)fontStrComboPercentCheckButton:SetText(BD_SHOW_COMBO_PERCENT)fontStrComboValuesCheckButton:SetText(BD_SHOW_COMBO_VALUES)fontStrSwapValuesCheckButton:SetText(BD_SWAP_COMBO_ORB)getglobal(BD32ScaleSlider:GetName().."\84\101\120\116"):SetText(BD_BAR_SCALE)getglobal(BD32OrbScaleSlider:GetName().."\84\101\120\116"):SetText(BD_ORB_SCALE)getglobal(BD32HealthOrbScaleSlider:GetName().."\84\101\120\116"):SetText(BD_LEFT_ORB_BUTTON)getglobal(BD32ManaOrbScaleSlider:GetName().."\84\101\120\116"):SetText(BD_RIGHT_ORB_BUTTON)getglobal(BD32TargetOrbScaleSlider:GetName().."\84\101\120\116"):SetText(BD_TARGET_ORB_SCALE)getglobal(BD32PetOrbScaleSlider:GetName().."\84\101\120\116"):SetText(BD_PET_ORB_SCALE)getglobal(BD32ComboOrbScaleSlider:GetName().."\84\101\120\116"):SetText(BD_COMBO_ORB_SCALE)OrbTextureLabel:SetText(BD_ORB_TEXTURE)FillTextureLabel:SetText(BD_ORB_FILLING)fontStrOrbPercentageCheckBox:SetText(BD_ORB_PERCENTAGE)fontStrOrbValueCheckBox:SetText(BD_ORB_VALUES)fontStrFillButton:SetText(BD_ORB_FILL)fontStrSwirlButton:SetText(BD_ORB_SWIRL)fontStrPercentageButton:SetText(BD_ORB_PERCENT)fontStrValueButton:SetText(BD_ORB_VALUE)fontStrCommitButton:SetText(BD_COMMIT)getglobal(BD32_frmBDOhideMinimapBtn:GetName().."\84\101\120\116"):SetText(BD_SHOW_MINIMAP)btnOpenBD32GUI:SetText(BD_SHOW_MENU)FontChoiceLabel:SetText(BD_FONT_CHOICE)fontStrBD32OrbAbsorbCheckBox:SetText(BD_SHOW_ABSORB)if GetLocale()=="\107\111\75\82" then setThisFont="\105\110\116\101\114\102\97\99\101\92\97\100\100\111\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\102\111\110\116\115\92\107\111\75\82\46\116\116\102";elseif GetLocale()=="\114\117\82\85" then setThisFont="\105\110\116\101\114\102\97\99\101\92\97\100\100\111\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\102\111\110\116\115\92\114\117\82\85\46\116\116\102";else setThisFont="\73\110\116\101\114\102\97\99\101\92\65\100\100\79\110\115\92\66\101\97\114\100\108\101\121\115\68\105\97\98\108\111\79\114\98\115\92\102\111\110\116\115\92\100\105\97\98\108\111\45\108\105\103\104\116\46\116\116\102";end fontName,fontHeight,fontFlags=fontStrConfiguration:GetFont()fontStrConfiguration:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrReloadReq:GetFont()fontStrReloadReq:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrReloadReq1:GetFont()fontStrReloadReq1:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrHealthOrbButton:GetFont()fontStrHealthOrbButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrManaOrbButton:GetFont()fontStrManaOrbButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrResetBDWindows:GetFont()fontStrResetBDWindows:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrCloseButton:GetFont()fontStrCloseButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrTCCheckButton:GetFont()fontStrTCCheckButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrArtworkCheckButton:GetFont()fontStrArtworkCheckButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrPlayerFrameCheckButton:GetFont()fontStrPlayerFrameCheckButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrLockBDWindowsCheckButton:GetFont()fontStrLockBDWindowsCheckButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrShowOrbEliteFrame:GetFont()fontStrShowOrbEliteFrame:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrShowBDTargetOrb:GetFont()fontStrShowBDTargetOrb:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrShowTargetFrame:GetFont()fontStrShowTargetFrame:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrBDTargetOrbValue:GetFont()fontStrBDTargetOrbValue:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrBDTargetOrbPercentage:GetFont()fontStrBDTargetOrbPercentage:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrAnimateOrbCheckButton:GetFont()fontStrAnimateOrbCheckButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrBarImageCheckButton:GetFont()fontStrBarImageCheckButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrTruncatedCheckButton:GetFont()fontStrTruncatedCheckButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrUsePetOrbCheckButton:GetFont()fontStrUsePetOrbCheckButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrPetOrbValuesCheckButton:GetFont()fontStrPetOrbValuesCheckButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrPetOrbPercentagesCheckButton:GetFont()fontStrPetOrbPercentagesCheckButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrPowerTrackerCheckButton:GetFont()fontStrPowerTrackerCheckButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrComboPercentCheckButton:GetFont()fontStrComboPercentCheckButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrComboValuesCheckButton:GetFont()fontStrComboValuesCheckButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrSwapValuesCheckButton:GetFont()fontStrSwapValuesCheckButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=getglobal(BD32ScaleSlider:GetName().."\84\101\120\116"):GetFont()getglobal(BD32ScaleSlider:GetName().."\84\101\120\116"):SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=getglobal(BD32OrbScaleSlider:GetName().."\84\101\120\116"):GetFont()getglobal(BD32OrbScaleSlider:GetName().."\84\101\120\116"):SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=getglobal(BD32HealthOrbScaleSlider:GetName().."\84\101\120\116"):GetFont()getglobal(BD32HealthOrbScaleSlider:GetName().."\84\101\120\116"):SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=getglobal(BD32ManaOrbScaleSlider:GetName().."\84\101\120\116"):GetFont()getglobal(BD32ManaOrbScaleSlider:GetName().."\84\101\120\116"):SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=getglobal(BD32TargetOrbScaleSlider:GetName().."\84\101\120\116"):GetFont()getglobal(BD32TargetOrbScaleSlider:GetName().."\84\101\120\116"):SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=getglobal(BD32PetOrbScaleSlider:GetName().."\84\101\120\116"):GetFont()getglobal(BD32PetOrbScaleSlider:GetName().."\84\101\120\116"):SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=getglobal(BD32ComboOrbScaleSlider:GetName().."\84\101\120\116"):GetFont()getglobal(BD32ComboOrbScaleSlider:GetName().."\84\101\120\116"):SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=OrbTextureLabel:GetFont()OrbTextureLabel:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=FillTextureLabel:GetFont()FillTextureLabel:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrOrbPercentageCheckBox:GetFont()fontStrOrbPercentageCheckBox:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrOrbValueCheckBox:GetFont()fontStrOrbValueCheckBox:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrFillButton:GetFont()fontStrFillButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrSwirlButton:GetFont()fontStrSwirlButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrValueButton:GetFont()fontStrValueButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrCommitButton:GetFont()fontStrCommitButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=fontStrPercentageButton:GetFont()fontStrPercentageButton:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=getglobal(BD32_frmBDOhideMinimapBtn:GetName().."\84\101\120\116"):GetFont()getglobal(BD32_frmBDOhideMinimapBtn:GetName().."\84\101\120\116"):SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=FontChoiceLabel:GetFont()FontChoiceLabel:SetFont(setThisFont,fontHeight,fontFlags)fontName,fontHeight,fontFlags=BD32ConfigFrame.text:GetFont()if GetLocale()=="\101\115\69\83" or GetLocale()=="\101\115\77\88" then BD32ConfigFrame.text:SetFont(setThisFont,18,fontFlags)fontName,fontHeight,fontFlags=fontStrHealthOrbButton:GetFont()fontStrHealthOrbButton:SetFont(setThisFont,12,fontFlags)fontName,fontHeight,fontFlags=fontStrManaOrbButton:GetFont()fontStrManaOrbButton:SetFont(setThisFont,12,fontFlags)fontName,fontHeight,fontFlags=FillTextureLabel:GetFont()FillTextureLabel:SetFont(setThisFont,12,fontFlags)fontName,fontHeight,fontFlags=OrbTextureLabel:GetFont()OrbTextureLabel:SetFont(setThisFont,12,fontFlags)fontName,fontHeight,fontFlags=FontChoiceLabel:GetFont()FontChoiceLabel:SetFont(setThisFont,12,fontFlags)else BD32ConfigFrame.text:SetFont(setThisFont,23,fontFlags)end fontName,fontHeight,fontFlags=fontStrBD32OrbAbsorbCheckBox:GetFont()fontStrBD32OrbAbsorbCheckBox:SetFont(setThisFont,fontHeight,fontFlags)end function BD32GUIScrollBar_Update()local lineOffset local lineplusoffset local bottomHideOffset local scrollRange=115 FauxScrollFrame_Update(BD32GUIScrollBar,scrollRange,5,16)lineplusoffset=FauxScrollFrame_GetOffset(BD32GUIScrollBar)bottomHideOffset=-607 lineOffset=-43 if HealthOrbButton then if lineplusoffset<=51+lineOffset then fontStrConfiguration:Show()fontStrConfiguration:SetPoint("\84\79\80",-12,-60+lineplusoffset)else fontStrConfiguration:Hide()end if lineplusoffset<=75+lineOffset then HealthOrbButton:Show()HealthOrbButton:SetPoint("\67\69\78\84\69\82",-80,235+lineplusoffset)else HealthOrbButton:Hide()end if lineplusoffset<=75+lineOffset then ManaOrbButton:Show()ManaOrbButton:SetPoint("\67\69\78\84\69\82",60,235+lineplusoffset)else ManaOrbButton:Hide()end if lineplusoffset<=105+lineOffset then BD32ScaleSlider:Show()BD32ScaleSlider:SetPoint("\67\69\78\84\69\82",-10,195+lineplusoffset)else BD32ScaleSlider:Hide()end if lineplusoffset<=140+lineOffset then BD32OrbScaleSlider:Show()BD32OrbScaleSlider:SetPoint("\67\69\78\84\69\82",-10,160+lineplusoffset)else BD32OrbScaleSlider:Hide()end if lineplusoffset<=245+lineOffset then BD32HealthOrbScaleSlider:Show()BD32HealthOrbScaleSlider:SetPoint("\67\69\78\84\69\82",-10,125+lineplusoffset)else BD32HealthOrbScaleSlider:Hide()end if lineplusoffset<=245+lineOffset then BD32ManaOrbScaleSlider:Show()BD32ManaOrbScaleSlider:SetPoint("\67\69\78\84\69\82",-10,90+lineplusoffset)else BD32ManaOrbScaleSlider:Hide()end if lineplusoffset<=245+lineOffset then BD32TargetOrbScaleSlider:Show()BD32TargetOrbScaleSlider:SetPoint("\67\69\78\84\69\82",-10,55+lineplusoffset)else BD32TargetOrbScaleSlider:Hide()end if lineplusoffset<=280+lineOffset then BD32PetOrbScaleSlider:Show()BD32PetOrbScaleSlider:SetPoint("\67\69\78\84\69\82",-10,20+lineplusoffset)else BD32PetOrbScaleSlider:Hide()end if lineplusoffset<=315+lineOffset then BD32ComboOrbScaleSlider:Show()BD32ComboOrbScaleSlider:SetPoint("\67\69\78\84\69\82",-10,-15+lineplusoffset)else BD32ComboOrbScaleSlider:Hide()end if lineplusoffset<=355+lineOffset then AnimateOrbValuesCheckButton:Show()AnimateOrbValuesCheckButton:SetPoint("\84\79\80\76\69\70\84",26,-363+lineplusoffset)else AnimateOrbValuesCheckButton:Hide()end if lineplusoffset<=355+lineOffset then TrackCombatCheckButton:Show()TrackCombatCheckButton:SetPoint("\84\79\80\76\69\70\84",220,-363+lineplusoffset)else TrackCombatCheckButton:Hide()end if lineplusoffset<=390+lineOffset then TruncatedValuesCheckButton:Show()TruncatedValuesCheckButton:SetPoint("\84\79\80\76\69\70\84",26,-401+lineplusoffset)else TruncatedValuesCheckButton:Hide()end if lineplusoffset<=390+lineOffset then UsePetOrbCheckButton:Show()UsePetOrbCheckButton:SetPoint("\84\79\80\76\69\70\84",220,-401+lineplusoffset)else UsePetOrbCheckButton:Hide()end if lineplusoffset<=430+lineOffset then ShowArtworkCheckButton:Show()ShowArtworkCheckButton:SetPoint("\84\79\80\76\69\70\84",26,-439+lineplusoffset)else ShowArtworkCheckButton:Hide()end if lineplusoffset<=430+lineOffset then ShowPetOrbPercentagesCheckButton:Show()ShowPetOrbPercentagesCheckButton:SetPoint("\84\79\80\76\69\70\84",220,-439+lineplusoffset)else ShowPetOrbPercentagesCheckButton:Hide()end if lineplusoffset<=465+lineOffset then UseBarImageCheckButton:Show()UseBarImageCheckButton:SetPoint("\84\79\80\76\69\70\84",26,-477+lineplusoffset)else UseBarImageCheckButton:Hide()end if lineplusoffset<=465+lineOffset then ShowPetOrbValuesCheckButton:Show()ShowPetOrbValuesCheckButton:SetPoint("\84\79\80\76\69\70\84",220,-477+lineplusoffset)else ShowPetOrbValuesCheckButton:Hide()end if lineplusoffset<=505+lineOffset then ShowBlizzPlayerFrameCheckButton:Show()ShowBlizzPlayerFrameCheckButton:SetPoint("\84\79\80\76\69\70\84",26,-515+lineplusoffset)else ShowBlizzPlayerFrameCheckButton:Hide()end if lineplusoffset<=505+lineOffset then UsePowerTrackerCheckButton:Show()UsePowerTrackerCheckButton:SetPoint("\84\79\80\76\69\70\84",220,-515+lineplusoffset)else UsePowerTrackerCheckButton:Hide()end if lineplusoffset<=545+lineOffset then ShowTargetFrame:Show()ShowTargetFrame:SetPoint("\84\79\80\76\69\70\84",26,-553+lineplusoffset)else ShowTargetFrame:Hide()end if lineplusoffset<=545+lineOffset then ShowComboPercentCheckButton:Show()ShowComboPercentCheckButton:SetPoint("\84\79\80\76\69\70\84",220,-553+lineplusoffset)else ShowComboPercentCheckButton:Hide()end if lineplusoffset<=580+lineOffset then ShowBDTargetOrb:Show()ShowBDTargetOrb:SetPoint("\84\79\80\76\69\70\84",26,-591+lineplusoffset)else ShowBDTargetOrb:Hide()end if lineplusoffset<=580+lineOffset then ShowComboValuesCheckButton:Show()ShowComboValuesCheckButton:SetPoint("\84\79\80\76\69\70\84",220,-591+lineplusoffset)else ShowComboValuesCheckButton:Hide()end if lineplusoffset<=620+lineOffset then showBDTargetOrbValue:Show()showBDTargetOrbValue:SetPoint("\84\79\80\76\69\70\84",26,-629+lineplusoffset)else showBDTargetOrbValue:Hide()end if lineplusoffset<=620+lineOffset then SwapComboValuesCheckButton:Show()SwapComboValuesCheckButton:SetPoint("\84\79\80\76\69\70\84",220,-629+lineplusoffset)else SwapComboValuesCheckButton:Hide()end if lineplusoffset<=655+lineOffset then showBDTargetOrbPercentage:Show()showBDTargetOrbPercentage:SetPoint("\84\79\80\76\69\70\84",26,-667+lineplusoffset)else showBDTargetOrbPercentage:Hide()end if lineplusoffset<=690+lineOffset then ShowOrbEliteFrame:Show()ShowOrbEliteFrame:SetPoint("\84\79\80\76\69\70\84",26,-705+lineplusoffset)else ShowOrbEliteFrame:Hide()end if lineplusoffset<=655+lineOffset then LockBDWindowsCheckButton:Show()LockBDWindowsCheckButton:SetPoint("\84\79\80\76\69\70\84",220,-667+lineplusoffset)else LockBDWindowsCheckButton:Hide()end if lineplusoffset<=580+lineOffset then fontStrReloadReq:Show()fontStrReloadReq:SetPoint("\66\79\84\84\79\77\76\69\70\84",45,55+lineplusoffset)else fontStrReloadReq:Hide()end if lineplusoffset<=540+lineOffset then fontStrReloadReq1:Show()fontStrReloadReq1:SetPoint("\66\79\84\84\79\77\76\69\70\84",45,18+lineplusoffset)else fontStrReloadReq1:Hide()end local point,relativeTo,relativePoint,xOffset,yOffset point,relativeTo,relativePoint,xOffset,yOffset=fontStrConfiguration:GetPoint()if yOffset<bottomHideOffset then fontStrConfiguration:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=HealthOrbButton:GetPoint()if yOffset<bottomHideOffset then HealthOrbButton:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=ManaOrbButton:GetPoint()if yOffset<bottomHideOffset then ManaOrbButton:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=BD32ScaleSlider:GetPoint()if yOffset<bottomHideOffset then BD32ScaleSlider:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=BD32OrbScaleSlider:GetPoint()if yOffset<bottomHideOffset then BD32OrbScaleSlider:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=BD32HealthOrbScaleSlider:GetPoint()if yOffset<bottomHideOffset then BD32HealthOrbScaleSlider:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=BD32ManaOrbScaleSlider:GetPoint()if yOffset<bottomHideOffset then BD32ManaOrbScaleSlider:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=BD32TargetOrbScaleSlider:GetPoint()if yOffset<bottomHideOffset then BD32TargetOrbScaleSlider:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=BD32PetOrbScaleSlider:GetPoint()if yOffset<bottomHideOffset then BD32PetOrbScaleSlider:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=BD32ComboOrbScaleSlider:GetPoint()if yOffset<bottomHideOffset then BD32ComboOrbScaleSlider:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=AnimateOrbValuesCheckButton:GetPoint()if yOffset<bottomHideOffset then AnimateOrbValuesCheckButton:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=TrackCombatCheckButton:GetPoint()if yOffset<bottomHideOffset then TrackCombatCheckButton:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=TruncatedValuesCheckButton:GetPoint()if yOffset<bottomHideOffset then TruncatedValuesCheckButton:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=UsePetOrbCheckButton:GetPoint()if yOffset<bottomHideOffset then UsePetOrbCheckButton:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=ShowArtworkCheckButton:GetPoint()if yOffset<bottomHideOffset then ShowArtworkCheckButton:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=ShowPetOrbPercentagesCheckButton:GetPoint()if yOffset<bottomHideOffset then ShowPetOrbPercentagesCheckButton:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=UseBarImageCheckButton:GetPoint()if yOffset<bottomHideOffset then UseBarImageCheckButton:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=ShowPetOrbValuesCheckButton:GetPoint()if yOffset<bottomHideOffset then ShowPetOrbValuesCheckButton:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=ShowBlizzPlayerFrameCheckButton:GetPoint()if yOffset<bottomHideOffset then ShowBlizzPlayerFrameCheckButton:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=UsePowerTrackerCheckButton:GetPoint()if yOffset<bottomHideOffset then UsePowerTrackerCheckButton:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=ShowTargetFrame:GetPoint()if yOffset<bottomHideOffset then ShowTargetFrame:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=ShowComboPercentCheckButton:GetPoint()if yOffset<bottomHideOffset then ShowComboPercentCheckButton:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=ShowBDTargetOrb:GetPoint()if yOffset<bottomHideOffset then ShowBDTargetOrb:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=ShowComboValuesCheckButton:GetPoint()if yOffset<bottomHideOffset then ShowComboValuesCheckButton:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=showBDTargetOrbValue:GetPoint()if yOffset<bottomHideOffset then showBDTargetOrbValue:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=SwapComboValuesCheckButton:GetPoint()if yOffset<bottomHideOffset then SwapComboValuesCheckButton:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=showBDTargetOrbPercentage:GetPoint()if yOffset<bottomHideOffset then showBDTargetOrbPercentage:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=ShowOrbEliteFrame:GetPoint()if yOffset<bottomHideOffset then ShowOrbEliteFrame:Hide()end point,relativeTo,relativePoint,xOffset,yOffset=LockBDWindowsCheckButton:GetPoint()if yOffset<bottomHideOffset then LockBDWindowsCheckButton:Hide()end end end;